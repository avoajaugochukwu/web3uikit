(self.webpackChunkweb3uikit=self.webpackChunkweb3uikit||[]).push([[690,298,873,201],{"./node_modules/.pnpm/@web3auth+phantom-adapter@1.1.1_6q6l43ixbnrc7bgejtmqcq6qmi/node_modules/@web3auth/phantom-adapter/dist/phantomAdapter.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PhantomAdapter:()=>PhantomAdapter});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_web3auth_base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@web3auth+base@1.1.1_@babel+runtime@7.18.3/node_modules/@web3auth/base/dist/base.esm.js"),_web3auth_solana_provider__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@web3auth+solana-provider@1.1.1_6q6l43ixbnrc7bgejtmqcq6qmi/node_modules/@web3auth/solana-provider/dist/solanaProvider.esm.js");function poll(callback,interval,count){return new Promise(((resolve,reject)=>{count>0?setTimeout((async()=>{const done=await callback();done&&resolve(done),done||poll(callback,interval,count-1).then((res=>(resolve(res),res))).catch((err=>reject(err)))}),interval):resolve(!1)}))}class PhantomAdapter extends _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.J5{constructor(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__.Z)(this,"name",_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.rW.PHANTOM),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__.Z)(this,"adapterNamespace",_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.yk.SOLANA),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__.Z)(this,"currentChainNamespace",_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.EN.SOLANA),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__.Z)(this,"type",_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.hN.EXTERNAL),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__.Z)(this,"status",_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.NOT_READY),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__.Z)(this,"_wallet",null),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__.Z)(this,"phantomProvider",null),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__.Z)(this,"rehydrated",!1),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__.Z)(this,"_onDisconnect",(()=>{this._wallet&&(this._wallet.off("disconnect",this._onDisconnect),this.rehydrated=!1,this.status=this.status===_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTED?_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.READY:_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.NOT_READY,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.DISCONNECTED))})),this.chainConfig=options.chainConfig||null}get isWalletConnected(){var _this$_wallet;return!(null===(_this$_wallet=this._wallet)||void 0===_this$_wallet||!_this$_wallet.isConnected||this.status!==_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTED)}get provider(){var _this$phantomProvider;return(null===(_this$phantomProvider=this.phantomProvider)||void 0===_this$phantomProvider?void 0:_this$phantomProvider.provider)||null}set provider(_){throw new Error("Not implemented")}setAdapterSettings(_){}async init(options){if(super.checkInitializationRequirements(),this.chainConfig||(this.chainConfig=(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.h2)(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.EN.SOLANA,"0x1")),this._wallet=await async function(){var _window$solana;let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interval:1e3,count:3};if("undefined"!=typeof window&&null!==(_window$solana=window.solana)&&void 0!==_window$solana&&_window$solana.isPhantom)return window.solana;return await poll((()=>{var _window$solana2;return null===(_window$solana2=window.solana)||void 0===_window$solana2?void 0:_window$solana2.isPhantom}),options.interval,options.count)?window.solana:null}({interval:500,count:3}),!this._wallet)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Ty.notInstalled();this.phantomProvider=new _web3auth_solana_provider__WEBPACK_IMPORTED_MODULE_1__.PhantomInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.READY,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.READY,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.rW.PHANTOM);try{_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.cM.debug("initializing phantom adapter"),options.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(error){_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.cM.error("Failed to connect with cached phantom provider",error),this.emit("ERRORED",error)}}async connect(){var _this=this;try{if(super.checkConnectionRequirements(),this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTING,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.CONNECTING,{adapter:_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.rW.PHANTOM}),!this._wallet)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Ty.notInstalled();if(this._wallet.isConnected)await this.connectWithProvider(this._wallet);else{const handleDisconnect=this._wallet._handleDisconnect;try{await new Promise(((resolve,reject)=>{if(!this._wallet)return reject(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Ty.notInstalled());this._wallet.once("connect",(async()=>{await this.connectWithProvider(this._wallet),resolve(this.provider)})),this._wallet._handleDisconnect=function(){reject(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Ty.windowClosed());for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return handleDisconnect.apply(_this._wallet,args)},this._wallet.connect().catch((reason=>{reject(reason)}))}))}catch(error){if(error instanceof _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.up)throw error;throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.connectionError(null==error?void 0:error.message)}finally{this._wallet._handleDisconnect=handleDisconnect}}if(!this._wallet.publicKey)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.connectionError();return this._wallet.on("disconnect",this._onDisconnect),this.provider}catch(error){throw this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.READY,this.rehydrated=!1,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.ERRORED,error),error}}async disconnect(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};if(!this.isWalletConnected)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.notConnectedError("Not connected with wallet");try{var _this$_wallet2;await(null===(_this$_wallet2=this._wallet)||void 0===_this$_wallet2?void 0:_this$_wallet2.disconnect()),options.cleanup&&(this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.NOT_READY,this.phantomProvider=null,this._wallet=null),this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.DISCONNECTED)}catch(error){this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.ERRORED,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.disconnectionError(null==error?void 0:error.message))}}async getUserInfo(){if(!this.isWalletConnected)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async connectWithProvider(injectedProvider){if(!this.phantomProvider)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.connectionError("No phantom provider");return await this.phantomProvider.setupProvider(injectedProvider),this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTED,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.CONNECTED,{adapter:_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.rW.PHANTOM,reconnected:this.rehydrated}),this.provider}}},"?d360":()=>{},"?78b1":()=>{}}]);