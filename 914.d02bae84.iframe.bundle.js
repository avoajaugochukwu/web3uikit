/*! For license information please see 914.d02bae84.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkweb3uikit=self.webpackChunkweb3uikit||[]).push([[914],{"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/assertThisInitialized.js":module=>{module.exports=function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/asyncToGenerator.js":module=>{function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}module.exports=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/classCallCheck.js":module=>{module.exports=function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/createClass.js":module=>{function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}module.exports=function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/getPrototypeOf.js":module=>{function _getPrototypeOf(o){return module.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},module.exports.__esModule=!0,module.exports.default=module.exports,_getPrototypeOf(o)}module.exports=_getPrototypeOf,module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/inherits.js":(module,__unused_webpack_exports,__webpack_require__)=>{var setPrototypeOf=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/setPrototypeOf.js");module.exports=function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&setPrototypeOf(subClass,superClass)},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/interopRequireDefault.js":module=>{module.exports=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/typeof.js").default,assertThisInitialized=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/assertThisInitialized.js");module.exports=function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return assertThisInitialized(self)},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/regeneratorRuntime.js":(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/typeof.js").default;function _regeneratorRuntime(){"use strict";module.exports=_regeneratorRuntime=function _regeneratorRuntime(){return exports},module.exports.__esModule=!0,module.exports.default=module.exports;var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}module.exports=_regeneratorRuntime,module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/setPrototypeOf.js":module=>{function _setPrototypeOf(o,p){return module.exports=_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},module.exports.__esModule=!0,module.exports.default=module.exports,_setPrototypeOf(o,p)}module.exports=_setPrototypeOf,module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/typeof.js":module=>{function _typeof(obj){return module.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},module.exports.__esModule=!0,module.exports.default=module.exports,_typeof(obj)}module.exports=_typeof,module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/regenerator/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var runtime=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();module.exports=runtime;try{regeneratorRuntime=runtime}catch(accidentalStrictMode){"object"==typeof globalThis?globalThis.regeneratorRuntime=runtime:Function("r","regeneratorRuntime = r")(runtime)}},"./node_modules/.pnpm/@solana+buffer-layout@4.0.0/node_modules/@solana/buffer-layout/lib/Layout.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports._O=exports.Jq=exports.KB=exports.u8=exports.cv=void 0,exports.Ik=exports.A9=exports.n_=exports.gM=void 0;const buffer_1=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js");function checkUint8Array(b){if(!(b instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function uint8ArrayToBuffer(b){return checkUint8Array(b),buffer_1.Buffer.from(b.buffer,b.byteOffset,b.length)}class Layout{constructor(span,property){if(!Number.isInteger(span))throw new TypeError("span must be an integer");this.span=span,this.property=property}makeDestinationObject(){return{}}getSpan(b,offset){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(property){const rv=Object.create(this.constructor.prototype);return Object.assign(rv,this),rv.property=property,rv}fromArray(values){}}function nameWithProperty(name,lo){return lo.property?name+"["+lo.property+"]":name}class ExternalLayout extends Layout{isCount(){throw new Error("ExternalLayout is abstract")}}class GreedyCount extends ExternalLayout{constructor(elementSpan=1,property){if(!Number.isInteger(elementSpan)||0>=elementSpan)throw new TypeError("elementSpan must be a (positive) integer");super(-1,property),this.elementSpan=elementSpan}isCount(){return!0}decode(b,offset=0){checkUint8Array(b);const rem=b.length-offset;return Math.floor(rem/this.elementSpan)}encode(src,b,offset){return 0}}class OffsetLayout extends ExternalLayout{constructor(layout,offset=0,property){if(!(layout instanceof Layout))throw new TypeError("layout must be a Layout");if(!Number.isInteger(offset))throw new TypeError("offset must be integer or undefined");super(layout.span,property||layout.property),this.layout=layout,this.offset=offset}isCount(){return this.layout instanceof UInt||this.layout instanceof UIntBE}decode(b,offset=0){return this.layout.decode(b,offset+this.offset)}encode(src,b,offset=0){return this.layout.encode(src,b,offset+this.offset)}}class UInt extends Layout{constructor(span,property){if(super(span,property),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(b,offset=0){return uint8ArrayToBuffer(b).readUIntLE(offset,this.span)}encode(src,b,offset=0){return uint8ArrayToBuffer(b).writeUIntLE(src,offset,this.span),this.span}}class UIntBE extends Layout{constructor(span,property){if(super(span,property),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(b,offset=0){return uint8ArrayToBuffer(b).readUIntBE(offset,this.span)}encode(src,b,offset=0){return uint8ArrayToBuffer(b).writeUIntBE(src,offset,this.span),this.span}}class Int extends Layout{constructor(span,property){if(super(span,property),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(b,offset=0){return uint8ArrayToBuffer(b).readIntLE(offset,this.span)}encode(src,b,offset=0){return uint8ArrayToBuffer(b).writeIntLE(src,offset,this.span),this.span}}class IntBE extends Layout{constructor(span,property){if(super(span,property),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(b,offset=0){return uint8ArrayToBuffer(b).readIntBE(offset,this.span)}encode(src,b,offset=0){return uint8ArrayToBuffer(b).writeIntBE(src,offset,this.span),this.span}}const V2E32=Math.pow(2,32);function divmodInt64(src){const hi32=Math.floor(src/V2E32);return{hi32,lo32:src-hi32*V2E32}}function roundedInt64(hi32,lo32){return hi32*V2E32+lo32}class NearUInt64 extends Layout{constructor(property){super(8,property)}decode(b,offset=0){const buffer=uint8ArrayToBuffer(b),lo32=buffer.readUInt32LE(offset);return roundedInt64(buffer.readUInt32LE(offset+4),lo32)}encode(src,b,offset=0){const split=divmodInt64(src),buffer=uint8ArrayToBuffer(b);return buffer.writeUInt32LE(split.lo32,offset),buffer.writeUInt32LE(split.hi32,offset+4),8}}class NearUInt64BE extends Layout{constructor(property){super(8,property)}decode(b,offset=0){const buffer=uint8ArrayToBuffer(b);return roundedInt64(buffer.readUInt32BE(offset),buffer.readUInt32BE(offset+4))}encode(src,b,offset=0){const split=divmodInt64(src),buffer=uint8ArrayToBuffer(b);return buffer.writeUInt32BE(split.hi32,offset),buffer.writeUInt32BE(split.lo32,offset+4),8}}class NearInt64 extends Layout{constructor(property){super(8,property)}decode(b,offset=0){const buffer=uint8ArrayToBuffer(b),lo32=buffer.readUInt32LE(offset);return roundedInt64(buffer.readInt32LE(offset+4),lo32)}encode(src,b,offset=0){const split=divmodInt64(src),buffer=uint8ArrayToBuffer(b);return buffer.writeUInt32LE(split.lo32,offset),buffer.writeInt32LE(split.hi32,offset+4),8}}class NearInt64BE extends Layout{constructor(property){super(8,property)}decode(b,offset=0){const buffer=uint8ArrayToBuffer(b);return roundedInt64(buffer.readInt32BE(offset),buffer.readUInt32BE(offset+4))}encode(src,b,offset=0){const split=divmodInt64(src),buffer=uint8ArrayToBuffer(b);return buffer.writeInt32BE(split.hi32,offset),buffer.writeUInt32BE(split.lo32,offset+4),8}}class Float extends Layout{constructor(property){super(4,property)}decode(b,offset=0){return uint8ArrayToBuffer(b).readFloatLE(offset)}encode(src,b,offset=0){return uint8ArrayToBuffer(b).writeFloatLE(src,offset),4}}class FloatBE extends Layout{constructor(property){super(4,property)}decode(b,offset=0){return uint8ArrayToBuffer(b).readFloatBE(offset)}encode(src,b,offset=0){return uint8ArrayToBuffer(b).writeFloatBE(src,offset),4}}class Double extends Layout{constructor(property){super(8,property)}decode(b,offset=0){return uint8ArrayToBuffer(b).readDoubleLE(offset)}encode(src,b,offset=0){return uint8ArrayToBuffer(b).writeDoubleLE(src,offset),8}}class DoubleBE extends Layout{constructor(property){super(8,property)}decode(b,offset=0){return uint8ArrayToBuffer(b).readDoubleBE(offset)}encode(src,b,offset=0){return uint8ArrayToBuffer(b).writeDoubleBE(src,offset),8}}class Sequence extends Layout{constructor(elementLayout,count,property){if(!(elementLayout instanceof Layout))throw new TypeError("elementLayout must be a Layout");if(!(count instanceof ExternalLayout&&count.isCount()||Number.isInteger(count)&&0<=count))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let span=-1;!(count instanceof ExternalLayout)&&0<elementLayout.span&&(span=count*elementLayout.span),super(span,property),this.elementLayout=elementLayout,this.count=count}getSpan(b,offset=0){if(0<=this.span)return this.span;let span=0,count=this.count;if(count instanceof ExternalLayout&&(count=count.decode(b,offset)),0<this.elementLayout.span)span=count*this.elementLayout.span;else{let idx=0;for(;idx<count;)span+=this.elementLayout.getSpan(b,offset+span),++idx}return span}decode(b,offset=0){const rv=[];let i=0,count=this.count;for(count instanceof ExternalLayout&&(count=count.decode(b,offset));i<count;)rv.push(this.elementLayout.decode(b,offset)),offset+=this.elementLayout.getSpan(b,offset),i+=1;return rv}encode(src,b,offset=0){const elo=this.elementLayout,span=src.reduce(((span,v)=>span+elo.encode(v,b,offset+span)),0);return this.count instanceof ExternalLayout&&this.count.encode(src.length,b,offset),span}}class Structure extends Layout{constructor(fields,property,decodePrefixes){if(!Array.isArray(fields)||!fields.reduce(((acc,v)=>acc&&v instanceof Layout),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof property&&void 0===decodePrefixes&&(decodePrefixes=property,property=void 0);for(const fd of fields)if(0>fd.span&&void 0===fd.property)throw new Error("fields cannot contain unnamed variable-length layout");let span=-1;try{span=fields.reduce(((span,fd)=>span+fd.getSpan()),0)}catch(e){}super(span,property),this.fields=fields,this.decodePrefixes=!!decodePrefixes}getSpan(b,offset=0){if(0<=this.span)return this.span;let span=0;try{span=this.fields.reduce(((span,fd)=>{const fsp=fd.getSpan(b,offset);return offset+=fsp,span+fsp}),0)}catch(e){throw new RangeError("indeterminate span")}return span}decode(b,offset=0){checkUint8Array(b);const dest=this.makeDestinationObject();for(const fd of this.fields)if(void 0!==fd.property&&(dest[fd.property]=fd.decode(b,offset)),offset+=fd.getSpan(b,offset),this.decodePrefixes&&b.length===offset)break;return dest}encode(src,b,offset=0){const firstOffset=offset;let lastOffset=0,lastWrote=0;for(const fd of this.fields){let span=fd.span;if(lastWrote=0<span?span:0,void 0!==fd.property){const fv=src[fd.property];void 0!==fv&&(lastWrote=fd.encode(fv,b,offset),0>span&&(span=fd.getSpan(b,offset)))}lastOffset=offset,offset+=span}return lastOffset+lastWrote-firstOffset}fromArray(values){const dest=this.makeDestinationObject();for(const fd of this.fields)void 0!==fd.property&&0<values.length&&(dest[fd.property]=values.shift());return dest}layoutFor(property){if("string"!=typeof property)throw new TypeError("property must be string");for(const fd of this.fields)if(fd.property===property)return fd}offsetOf(property){if("string"!=typeof property)throw new TypeError("property must be string");let offset=0;for(const fd of this.fields){if(fd.property===property)return offset;0>fd.span?offset=-1:0<=offset&&(offset+=fd.span)}}}class UnionDiscriminator{constructor(property){this.property=property}decode(b,offset){throw new Error("UnionDiscriminator is abstract")}encode(src,b,offset){throw new Error("UnionDiscriminator is abstract")}}class UnionLayoutDiscriminator extends UnionDiscriminator{constructor(layout,property){if(!(layout instanceof ExternalLayout&&layout.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(property||layout.property||"variant"),this.layout=layout}decode(b,offset){return this.layout.decode(b,offset)}encode(src,b,offset){return this.layout.encode(src,b,offset)}}class Union extends Layout{constructor(discr,defaultLayout,property){let discriminator;if(discr instanceof UInt||discr instanceof UIntBE)discriminator=new UnionLayoutDiscriminator(new OffsetLayout(discr));else if(discr instanceof ExternalLayout&&discr.isCount())discriminator=new UnionLayoutDiscriminator(discr);else{if(!(discr instanceof UnionDiscriminator))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");discriminator=discr}if(void 0===defaultLayout&&(defaultLayout=null),!(null===defaultLayout||defaultLayout instanceof Layout))throw new TypeError("defaultLayout must be null or a Layout");if(null!==defaultLayout){if(0>defaultLayout.span)throw new Error("defaultLayout must have constant span");void 0===defaultLayout.property&&(defaultLayout=defaultLayout.replicate("content"))}let span=-1;defaultLayout&&(span=defaultLayout.span,0<=span&&(discr instanceof UInt||discr instanceof UIntBE)&&(span+=discriminator.layout.span)),super(span,property),this.discriminator=discriminator,this.usesPrefixDiscriminator=discr instanceof UInt||discr instanceof UIntBE,this.defaultLayout=defaultLayout,this.registry={};let boundGetSourceVariant=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(src){return boundGetSourceVariant(src)},this.configGetSourceVariant=function(gsv){boundGetSourceVariant=gsv.bind(this)}}getSpan(b,offset=0){if(0<=this.span)return this.span;const vlo=this.getVariant(b,offset);if(!vlo)throw new Error("unable to determine span for unrecognized variant");return vlo.getSpan(b,offset)}defaultGetSourceVariant(src){if(Object.prototype.hasOwnProperty.call(src,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(src,this.defaultLayout.property))return;const vlo=this.registry[src[this.discriminator.property]];if(vlo&&(!vlo.layout||vlo.property&&Object.prototype.hasOwnProperty.call(src,vlo.property)))return vlo}else for(const tag in this.registry){const vlo=this.registry[tag];if(vlo.property&&Object.prototype.hasOwnProperty.call(src,vlo.property))return vlo}throw new Error("unable to infer src variant")}decode(b,offset=0){let dest;const dlo=this.discriminator,discr=dlo.decode(b,offset),clo=this.registry[discr];if(void 0===clo){const defaultLayout=this.defaultLayout;let contentOffset=0;this.usesPrefixDiscriminator&&(contentOffset=dlo.layout.span),dest=this.makeDestinationObject(),dest[dlo.property]=discr,dest[defaultLayout.property]=defaultLayout.decode(b,offset+contentOffset)}else dest=clo.decode(b,offset);return dest}encode(src,b,offset=0){const vlo=this.getSourceVariant(src);if(void 0===vlo){const dlo=this.discriminator,clo=this.defaultLayout;let contentOffset=0;return this.usesPrefixDiscriminator&&(contentOffset=dlo.layout.span),dlo.encode(src[dlo.property],b,offset),contentOffset+clo.encode(src[clo.property],b,offset+contentOffset)}return vlo.encode(src,b,offset)}addVariant(variant,layout,property){const rv=new VariantLayout(this,variant,layout,property);return this.registry[variant]=rv,rv}getVariant(vb,offset=0){let variant;return variant=vb instanceof Uint8Array?this.discriminator.decode(vb,offset):vb,this.registry[variant]}}class VariantLayout extends Layout{constructor(union,variant,layout,property){if(!(union instanceof Union))throw new TypeError("union must be a Union");if(!Number.isInteger(variant)||0>variant)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof layout&&void 0===property&&(property=layout,layout=null),layout){if(!(layout instanceof Layout))throw new TypeError("layout must be a Layout");if(null!==union.defaultLayout&&0<=layout.span&&layout.span>union.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof property)throw new TypeError("variant must have a String property")}let span=union.span;0>union.span&&(span=layout?layout.span:0,0<=span&&union.usesPrefixDiscriminator&&(span+=union.discriminator.layout.span)),super(span,property),this.union=union,this.variant=variant,this.layout=layout||null}getSpan(b,offset=0){if(0<=this.span)return this.span;let contentOffset=0;this.union.usesPrefixDiscriminator&&(contentOffset=this.union.discriminator.layout.span);let span=0;return this.layout&&(span=this.layout.getSpan(b,offset+contentOffset)),contentOffset+span}decode(b,offset=0){const dest=this.makeDestinationObject();if(this!==this.union.getVariant(b,offset))throw new Error("variant mismatch");let contentOffset=0;return this.union.usesPrefixDiscriminator&&(contentOffset=this.union.discriminator.layout.span),this.layout?dest[this.property]=this.layout.decode(b,offset+contentOffset):this.property?dest[this.property]=!0:this.union.usesPrefixDiscriminator&&(dest[this.union.discriminator.property]=this.variant),dest}encode(src,b,offset=0){let contentOffset=0;if(this.union.usesPrefixDiscriminator&&(contentOffset=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(src,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,b,offset);let span=contentOffset;if(this.layout&&(this.layout.encode(src[this.property],b,offset+contentOffset),span+=this.layout.getSpan(b,offset+contentOffset),0<=this.union.span&&span>this.union.span))throw new Error("encoded variant overruns containing union");return span}fromArray(values){if(this.layout)return this.layout.fromArray(values)}}function fixBitwiseResult(v){return 0>v&&(v+=4294967296),v}class BitStructure extends Layout{constructor(word,msb,property){if(!(word instanceof UInt||word instanceof UIntBE))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof msb&&void 0===property&&(property=msb,msb=!1),4<word.span)throw new RangeError("word cannot exceed 32 bits");super(word.span,property),this.word=word,this.msb=!!msb,this.fields=[];let value=0;this._packedSetValue=function(v){return value=fixBitwiseResult(v),this},this._packedGetValue=function(){return value}}decode(b,offset=0){const dest=this.makeDestinationObject(),value=this.word.decode(b,offset);this._packedSetValue(value);for(const fd of this.fields)void 0!==fd.property&&(dest[fd.property]=fd.decode(b));return dest}encode(src,b,offset=0){const value=this.word.decode(b,offset);this._packedSetValue(value);for(const fd of this.fields)if(void 0!==fd.property){const fv=src[fd.property];void 0!==fv&&fd.encode(fv)}return this.word.encode(this._packedGetValue(),b,offset)}addField(bits,property){const bf=new BitField(this,bits,property);return this.fields.push(bf),bf}addBoolean(property){const bf=new Boolean(this,property);return this.fields.push(bf),bf}fieldFor(property){if("string"!=typeof property)throw new TypeError("property must be string");for(const fd of this.fields)if(fd.property===property)return fd}}class BitField{constructor(container,bits,property){if(!(container instanceof BitStructure))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(bits)||0>=bits)throw new TypeError("bits must be positive integer");const totalBits=8*container.span,usedBits=container.fields.reduce(((sum,fd)=>sum+fd.bits),0);if(bits+usedBits>totalBits)throw new Error("bits too long for span remainder ("+(totalBits-usedBits)+" of "+totalBits+" remain)");this.container=container,this.bits=bits,this.valueMask=(1<<bits)-1,32===bits&&(this.valueMask=4294967295),this.start=usedBits,this.container.msb&&(this.start=totalBits-usedBits-bits),this.wordMask=fixBitwiseResult(this.valueMask<<this.start),this.property=property}decode(b,offset){return fixBitwiseResult(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(value){if("number"!=typeof value||!Number.isInteger(value)||value!==fixBitwiseResult(value&this.valueMask))throw new TypeError(nameWithProperty("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const word=this.container._packedGetValue(),wordValue=fixBitwiseResult(value<<this.start);this.container._packedSetValue(fixBitwiseResult(word&~this.wordMask)|wordValue)}}class Boolean extends BitField{constructor(container,property){super(container,1,property)}decode(b,offset){return!!super.decode(b,offset)}encode(value){"boolean"==typeof value&&(value=+value),super.encode(value)}}class Blob extends Layout{constructor(length,property){if(!(length instanceof ExternalLayout&&length.isCount()||Number.isInteger(length)&&0<=length))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let span=-1;length instanceof ExternalLayout||(span=length),super(span,property),this.length=length}getSpan(b,offset){let span=this.span;return 0>span&&(span=this.length.decode(b,offset)),span}decode(b,offset=0){let span=this.span;return 0>span&&(span=this.length.decode(b,offset)),uint8ArrayToBuffer(b).slice(offset,offset+span)}encode(src,b,offset){let span=this.length;if(this.length instanceof ExternalLayout&&(span=src.length),!(src instanceof Uint8Array&&span===src.length))throw new TypeError(nameWithProperty("Blob.encode",this)+" requires (length "+span+") Uint8Array as src");if(offset+span>b.length)throw new RangeError("encoding overruns Uint8Array");const srcBuffer=uint8ArrayToBuffer(src);return uint8ArrayToBuffer(b).write(srcBuffer.toString("hex"),offset,span,"hex"),this.length instanceof ExternalLayout&&this.length.encode(span,b,offset),span}}class CString extends Layout{constructor(property){super(-1,property)}getSpan(b,offset=0){checkUint8Array(b);let idx=offset;for(;idx<b.length&&0!==b[idx];)idx+=1;return 1+idx-offset}decode(b,offset=0){const span=this.getSpan(b,offset);return uint8ArrayToBuffer(b).slice(offset,offset+span-1).toString("utf-8")}encode(src,b,offset=0){"string"!=typeof src&&(src=String(src));const srcb=buffer_1.Buffer.from(src,"utf8"),span=srcb.length;if(offset+span>b.length)throw new RangeError("encoding overruns Buffer");const buffer=uint8ArrayToBuffer(b);return srcb.copy(buffer,offset),buffer[offset+span]=0,span+1}}class UTF8 extends Layout{constructor(maxSpan,property){if("string"==typeof maxSpan&&void 0===property&&(property=maxSpan,maxSpan=void 0),void 0===maxSpan)maxSpan=-1;else if(!Number.isInteger(maxSpan))throw new TypeError("maxSpan must be an integer");super(-1,property),this.maxSpan=maxSpan}getSpan(b,offset=0){return checkUint8Array(b),b.length-offset}decode(b,offset=0){const span=this.getSpan(b,offset);if(0<=this.maxSpan&&this.maxSpan<span)throw new RangeError("text length exceeds maxSpan");return uint8ArrayToBuffer(b).slice(offset,offset+span).toString("utf-8")}encode(src,b,offset=0){"string"!=typeof src&&(src=String(src));const srcb=buffer_1.Buffer.from(src,"utf8"),span=srcb.length;if(0<=this.maxSpan&&this.maxSpan<span)throw new RangeError("text length exceeds maxSpan");if(offset+span>b.length)throw new RangeError("encoding overruns Buffer");return srcb.copy(uint8ArrayToBuffer(b),offset),span}}class Constant extends Layout{constructor(value,property){super(0,property),this.value=value}decode(b,offset){return this.value}encode(src,b,offset){return 0}}exports.cv=(layout,offset,property)=>new OffsetLayout(layout,offset,property),exports.u8=property=>new UInt(1,property),exports.KB=property=>new UInt(2,property),exports.Jq=property=>new UInt(4,property),exports._O=property=>new NearUInt64(property),exports.gM=property=>new NearInt64(property),exports.n_=(fields,property,decodePrefixes)=>new Structure(fields,property,decodePrefixes),exports.A9=(elementLayout,count,property)=>new Sequence(elementLayout,count,property),exports.Ik=(length,property)=>new Blob(length,property)},"./node_modules/.pnpm/@solana+web3.js@1.47.4_react-native@0.69.1/node_modules/@solana/web3.js/lib/index.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ew:()=>Connection,RG:()=>Keypair,nh:()=>PublicKey});var nacl_fast=__webpack_require__("./node_modules/.pnpm/tweetnacl@1.0.3/node_modules/tweetnacl/nacl-fast.js"),nacl_fast_default=__webpack_require__.n(nacl_fast),node_modules_buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.1/node_modules/buffer/index.js"),bn=__webpack_require__("./node_modules/.pnpm/bn.js@5.2.1/node_modules/bn.js/lib/bn.js"),bn_default=__webpack_require__.n(bn),bs58=__webpack_require__("./node_modules/.pnpm/bs58@4.0.1/node_modules/bs58/index.js"),bs58_default=__webpack_require__.n(bs58),lib=__webpack_require__("./node_modules/.pnpm/borsh@0.7.0/node_modules/borsh/lib/index.js"),Layout=__webpack_require__("./node_modules/.pnpm/@solana+buffer-layout@4.0.0/node_modules/@solana/buffer-layout/lib/Layout.js"),browser=__webpack_require__("./node_modules/.pnpm/bigint-buffer@1.1.5/node_modules/bigint-buffer/dist/browser.js");__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");class StructError extends TypeError{constructor(failure,failures){let cached;const{message,...rest}=failure,{path}=failure;super(0===path.length?message:"At path: "+path.join(".")+" -- "+message),Object.assign(this,rest),this.name=this.constructor.name,this.failures=()=>{var _cached;return null!=(_cached=cached)?_cached:cached=[failure,...failures()]}}}function isObject(x){return"object"==typeof x&&null!=x}function print(value){return"string"==typeof value?JSON.stringify(value):""+value}function toFailure(result,context,struct,value){if(!0===result)return;!1===result?result={}:"string"==typeof result&&(result={message:result});const{path,branch}=context,{type}=struct,{refinement,message="Expected a value of type `"+type+"`"+(refinement?" with refinement `"+refinement+"`":"")+", but received: `"+print(value)+"`"}=result;return{value,type,refinement,key:path[path.length-1],path,branch,...result,message}}function*toFailures(result,context,struct,value){(function isIterable(x){return isObject(x)&&"function"==typeof x[Symbol.iterator]})(result)||(result=[result]);for(const r of result){const failure=toFailure(r,context,struct,value);failure&&(yield failure)}}function*run(value,struct,options={}){const{path=[],branch=[value],coerce=!1,mask=!1}=options,ctx={path,branch};if(coerce&&(value=struct.coercer(value,ctx),mask&&"type"!==struct.type&&isObject(struct.schema)&&isObject(value)&&!Array.isArray(value)))for(const key in value)void 0===struct.schema[key]&&delete value[key];let valid=!0;for(const failure of struct.validator(value,ctx))valid=!1,yield[failure,void 0];for(let[k,v,s]of struct.entries(value,ctx)){const ts=run(v,s,{path:void 0===k?path:[...path,k],branch:void 0===k?branch:[...branch,v],coerce,mask});for(const t of ts)t[0]?(valid=!1,yield[t[0],void 0]):coerce&&(v=t[1],void 0===k?value=v:value instanceof Map?value.set(k,v):value instanceof Set?value.add(v):isObject(value)&&(value[k]=v))}if(valid)for(const failure of struct.refiner(value,ctx))valid=!1,yield[failure,void 0];valid&&(yield[void 0,value])}class Struct{constructor(props){const{type,schema,validator,refiner,coercer=value=>value,entries=function*(){}}=props;this.type=type,this.schema=schema,this.entries=entries,this.coercer=coercer,this.validator=validator?(value,context)=>toFailures(validator(value,context),context,this,value):()=>[],this.refiner=refiner?(value,context)=>toFailures(refiner(value,context),context,this,value):()=>[]}assert(value){return function assert(value,struct){const result=validate(value,struct);if(result[0])throw result[0]}(value,this)}create(value){return create(value,this)}is(value){return is(value,this)}mask(value){return function mask(value,struct){const result=validate(value,struct,{coerce:!0,mask:!0});if(result[0])throw result[0];return result[1]}(value,this)}validate(value,options={}){return validate(value,this,options)}}function create(value,struct){const result=validate(value,struct,{coerce:!0});if(result[0])throw result[0];return result[1]}function is(value,struct){return!validate(value,struct)[0]}function validate(value,struct,options={}){const tuples=run(value,struct,options),tuple=function shiftIterator(input){const{done,value}=input.next();return done?void 0:value}(tuples);if(tuple[0]){return[new StructError(tuple[0],(function*(){for(const t of tuples)t[0]&&(yield t[0])})),void 0]}return[void 0,tuple[1]]}function index_es_define(name,validator){return new Struct({type:name,schema:null,validator})}function array(Element){return new Struct({type:"array",schema:Element,*entries(value){if(Element&&Array.isArray(value))for(const[i,v]of value.entries())yield[i,v,Element]},coercer:value=>Array.isArray(value)?value.slice():value,validator:value=>Array.isArray(value)||"Expected an array value, but received: "+print(value)})}function index_es_boolean(){return index_es_define("boolean",(value=>"boolean"==typeof value))}function instance(Class){return index_es_define("instance",(value=>value instanceof Class||"Expected a `"+Class.name+"` instance, but received: "+print(value)))}function literal(constant){const description=print(constant),t=typeof constant;return new Struct({type:"literal",schema:"string"===t||"number"===t||"boolean"===t?constant:null,validator:value=>value===constant||"Expected the literal `"+description+"`, but received: "+print(value)})}function never(){return index_es_define("never",(()=>!1))}function nullable(struct){return new Struct({...struct,validator:(value,ctx)=>null===value||struct.validator(value,ctx),refiner:(value,ctx)=>null===value||struct.refiner(value,ctx)})}function number(){return index_es_define("number",(value=>"number"==typeof value&&!isNaN(value)||"Expected a number, but received: "+print(value)))}function optional(struct){return new Struct({...struct,validator:(value,ctx)=>void 0===value||struct.validator(value,ctx),refiner:(value,ctx)=>void 0===value||struct.refiner(value,ctx)})}function record(Key,Value){return new Struct({type:"record",schema:null,*entries(value){if(isObject(value))for(const k in value){const v=value[k];yield[k,k,Key],yield[k,v,Value]}},validator:value=>isObject(value)||"Expected an object, but received: "+print(value)})}function string(){return index_es_define("string",(value=>"string"==typeof value||"Expected a string, but received: "+print(value)))}function tuple(Elements){const Never=never();return new Struct({type:"tuple",schema:null,*entries(value){if(Array.isArray(value)){const length=Math.max(Elements.length,value.length);for(let i=0;i<length;i++)yield[i,value[i],Elements[i]||Never]}},validator:value=>Array.isArray(value)||"Expected an array, but received: "+print(value)})}function type(schema){const keys=Object.keys(schema);return new Struct({type:"type",schema,*entries(value){if(isObject(value))for(const k of keys)yield[k,value[k],schema[k]]},validator:value=>isObject(value)||"Expected an object, but received: "+print(value)})}function union(Structs){const description=Structs.map((s=>s.type)).join(" | ");return new Struct({type:"union",schema:null,validator(value,ctx){const failures=[];for(const S of Structs){const[...tuples]=run(value,S,ctx),[first]=tuples;if(!first[0])return[];for(const[failure]of tuples)failure&&failures.push(failure)}return["Expected the value to satisfy a union of `"+description+"`, but received: "+print(value),...failures]}})}function unknown(){return index_es_define("unknown",(()=>!0))}function coerce(struct,condition,coercer){return new Struct({...struct,coercer:(value,ctx)=>is(value,condition)?struct.coercer(coercer(value,ctx),ctx):struct.coercer(value,ctx)})}var index_browser=__webpack_require__("./node_modules/.pnpm/rpc-websockets@7.5.0/node_modules/rpc-websockets/dist/index.browser.js"),client_browser=__webpack_require__("./node_modules/.pnpm/jayson@3.6.6/node_modules/jayson/lib/client/browser/index.js"),browser_default=__webpack_require__.n(client_browser),elliptic=__webpack_require__("./node_modules/.pnpm/secp256k1@4.0.3/node_modules/secp256k1/elliptic.js"),elliptic_default=__webpack_require__.n(elliptic),sha3=__webpack_require__("./node_modules/.pnpm/js-sha3@0.8.0/node_modules/js-sha3/src/sha3.js"),sha3_default=__webpack_require__.n(sha3),index_browser_esm_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const toBuffer=arr=>node_modules_buffer.lW.isBuffer(arr)?arr:arr instanceof Uint8Array?node_modules_buffer.lW.from(arr.buffer,arr.byteOffset,arr.byteLength):node_modules_buffer.lW.from(arr);var hash$1={},utils$9={},minimalisticAssert=assert$6;function assert$6(val,msg){if(!val)throw new Error(msg||"Assertion failed")}assert$6.equal=function assertEqual(l,r,msg){if(l!=r)throw new Error(msg||"Assertion failed: "+l+" != "+r)};var inherits_browser={exports:{}};"function"==typeof Object.create?inherits_browser.exports=function inherits(ctor,superCtor){superCtor&&(ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}};var assert$5=minimalisticAssert,inherits=inherits_browser.exports;function isSurrogatePair(msg,i){return 55296==(64512&msg.charCodeAt(i))&&(!(i<0||i+1>=msg.length)&&56320==(64512&msg.charCodeAt(i+1)))}function htonl(w){return(w>>>24|w>>>8&65280|w<<8&16711680|(255&w)<<24)>>>0}function zero2(word){return 1===word.length?"0"+word:word}function zero8(word){return 7===word.length?"0"+word:6===word.length?"00"+word:5===word.length?"000"+word:4===word.length?"0000"+word:3===word.length?"00000"+word:2===word.length?"000000"+word:1===word.length?"0000000"+word:word}utils$9.inherits=inherits,utils$9.toArray=function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if("string"==typeof msg)if(enc){if("hex"===enc)for((msg=msg.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(msg="0"+msg),i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}else for(var p=0,i=0;i<msg.length;i++){var c=msg.charCodeAt(i);c<128?res[p++]=c:c<2048?(res[p++]=c>>6|192,res[p++]=63&c|128):isSurrogatePair(msg,i)?(c=65536+((1023&c)<<10)+(1023&msg.charCodeAt(++i)),res[p++]=c>>18|240,res[p++]=c>>12&63|128,res[p++]=c>>6&63|128,res[p++]=63&c|128):(res[p++]=c>>12|224,res[p++]=c>>6&63|128,res[p++]=63&c|128)}else for(i=0;i<msg.length;i++)res[i]=0|msg[i];return res},utils$9.toHex=function toHex(msg){for(var res="",i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res},utils$9.htonl=htonl,utils$9.toHex32=function toHex32(msg,endian){for(var res="",i=0;i<msg.length;i++){var w=msg[i];"little"===endian&&(w=htonl(w)),res+=zero8(w.toString(16))}return res},utils$9.zero2=zero2,utils$9.zero8=zero8,utils$9.join32=function join32(msg,start,end,endian){var len=end-start;assert$5(len%4==0);for(var res=new Array(len/4),i=0,k=start;i<res.length;i++,k+=4){var w;w="big"===endian?msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3]:msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k],res[i]=w>>>0}return res},utils$9.split32=function split32(msg,endian){for(var res=new Array(4*msg.length),i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];"big"===endian?(res[k]=m>>>24,res[k+1]=m>>>16&255,res[k+2]=m>>>8&255,res[k+3]=255&m):(res[k+3]=m>>>24,res[k+2]=m>>>16&255,res[k+1]=m>>>8&255,res[k]=255&m)}return res},utils$9.rotr32=function rotr32$1(w,b){return w>>>b|w<<32-b},utils$9.rotl32=function rotl32$2(w,b){return w<<b|w>>>32-b},utils$9.sum32=function sum32$3(a,b){return a+b>>>0},utils$9.sum32_3=function sum32_3$1(a,b,c){return a+b+c>>>0},utils$9.sum32_4=function sum32_4$2(a,b,c,d){return a+b+c+d>>>0},utils$9.sum32_5=function sum32_5$2(a,b,c,d,e){return a+b+c+d+e>>>0},utils$9.sum64=function sum64$1(buf,pos,ah,al){var bh=buf[pos],lo=al+buf[pos+1]>>>0,hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0,buf[pos+1]=lo},utils$9.sum64_hi=function sum64_hi$1(ah,al,bh,bl){return(al+bl>>>0<al?1:0)+ah+bh>>>0},utils$9.sum64_lo=function sum64_lo$1(ah,al,bh,bl){return al+bl>>>0},utils$9.sum64_4_hi=function sum64_4_hi$1(ah,al,bh,bl,ch,cl,dh,dl){var carry=0,lo=al;return carry+=(lo=lo+bl>>>0)<al?1:0,carry+=(lo=lo+cl>>>0)<cl?1:0,ah+bh+ch+dh+(carry+=(lo=lo+dl>>>0)<dl?1:0)>>>0},utils$9.sum64_4_lo=function sum64_4_lo$1(ah,al,bh,bl,ch,cl,dh,dl){return al+bl+cl+dl>>>0},utils$9.sum64_5_hi=function sum64_5_hi$1(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0,lo=al;return carry+=(lo=lo+bl>>>0)<al?1:0,carry+=(lo=lo+cl>>>0)<cl?1:0,carry+=(lo=lo+dl>>>0)<dl?1:0,ah+bh+ch+dh+eh+(carry+=(lo=lo+el>>>0)<el?1:0)>>>0},utils$9.sum64_5_lo=function sum64_5_lo$1(ah,al,bh,bl,ch,cl,dh,dl,eh,el){return al+bl+cl+dl+el>>>0},utils$9.rotr64_hi=function rotr64_hi$1(ah,al,num){return(al<<32-num|ah>>>num)>>>0},utils$9.rotr64_lo=function rotr64_lo$1(ah,al,num){return(ah<<32-num|al>>>num)>>>0},utils$9.shr64_hi=function shr64_hi$1(ah,al,num){return ah>>>num},utils$9.shr64_lo=function shr64_lo$1(ah,al,num){return(ah<<32-num|al>>>num)>>>0};var common$5={},utils$8=utils$9,assert$4=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4,BlockHash$4.prototype.update=function update(msg,enc){if(msg=utils$8.toArray(msg,enc),this.pending?this.pending=this.pending.concat(msg):this.pending=msg,this.pendingTotal+=msg.length,this.pending.length>=this._delta8){var r=(msg=this.pending).length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length),0===this.pending.length&&(this.pending=null),msg=utils$8.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)this._update(msg,i,i+this._delta32)}return this},BlockHash$4.prototype.digest=function digest(enc){return this.update(this._pad()),assert$4(null===this.pending),this._digest(enc)},BlockHash$4.prototype._pad=function pad(){var len=this.pendingTotal,bytes=this._delta8,k=bytes-(len+this.padLength)%bytes,res=new Array(k+this.padLength);res[0]=128;for(var i=1;i<k;i++)res[i]=0;if(len<<=3,"big"===this.endian){for(var t=8;t<this.padLength;t++)res[i++]=0;res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=len>>>24&255,res[i++]=len>>>16&255,res[i++]=len>>>8&255,res[i++]=255&len}else for(res[i++]=255&len,res[i++]=len>>>8&255,res[i++]=len>>>16&255,res[i++]=len>>>24&255,res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=0,t=8;t<this.padLength;t++)res[i++]=0;return res};var sha={},common$4={},rotr32=utils$9.rotr32;function ch32$1(x,y,z){return x&y^~x&z}function maj32$1(x,y,z){return x&y^x&z^y&z}function p32(x,y,z){return x^y^z}common$4.ft_1=function ft_1$1(s,x,y,z){return 0===s?ch32$1(x,y,z):1===s||3===s?p32(x,y,z):2===s?maj32$1(x,y,z):void 0},common$4.ch32=ch32$1,common$4.maj32=maj32$1,common$4.p32=p32,common$4.s0_256=function s0_256$1(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22)},common$4.s1_256=function s1_256$1(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25)},common$4.g0_256=function g0_256$1(x){return rotr32(x,7)^rotr32(x,18)^x>>>3},common$4.g1_256=function g1_256$1(x){return rotr32(x,17)^rotr32(x,19)^x>>>10};var utils$6=utils$9,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$6.rotl32,sum32$2=utils$6.sum32,sum32_5$1=utils$6.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$6.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function _update(msg,start){for(var W=this.W,i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=rotl32$1(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);var a=this.h[0],b=this.h[1],c=this.h[2],d=this.h[3],e=this.h[4];for(i=0;i<W.length;i++){var s=~~(i/20),t=sum32_5$1(rotl32$1(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d,d=c,c=rotl32$1(b,30),b=a,a=t}this.h[0]=sum32$2(this.h[0],a),this.h[1]=sum32$2(this.h[1],b),this.h[2]=sum32$2(this.h[2],c),this.h[3]=sum32$2(this.h[3],d),this.h[4]=sum32$2(this.h[4],e)},SHA1.prototype._digest=function digest(enc){return"hex"===enc?utils$6.toHex32(this.h,"big"):utils$6.split32(this.h,"big")};var utils$5=utils$9,common$2=common$5,shaCommon=common$4,assert$3=minimalisticAssert,sum32$1=utils$5.sum32,sum32_4$1=utils$5.sum32_4,sum32_5=utils$5.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$5.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512,SHA256$1.outSize=256,SHA256$1.hmacStrength=192,SHA256$1.padLength=64,SHA256$1.prototype._update=function _update(msg,start){for(var W=this.W,i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=sum32_4$1(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0],b=this.h[1],c=this.h[2],d=this.h[3],e=this.h[4],f=this.h[5],g=this.h[6],h=this.h[7];for(assert$3(this.k.length===W.length),i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]),T2=sum32$1(s0_256(a),maj32(a,b,c));h=g,g=f,f=e,e=sum32$1(d,T1),d=c,c=b,b=a,a=sum32$1(T1,T2)}this.h[0]=sum32$1(this.h[0],a),this.h[1]=sum32$1(this.h[1],b),this.h[2]=sum32$1(this.h[2],c),this.h[3]=sum32$1(this.h[3],d),this.h[4]=sum32$1(this.h[4],e),this.h[5]=sum32$1(this.h[5],f),this.h[6]=sum32$1(this.h[6],g),this.h[7]=sum32$1(this.h[7],h)},SHA256$1.prototype._digest=function digest(enc){return"hex"===enc?utils$5.toHex32(this.h,"big"):utils$5.split32(this.h,"big")};var utils$4=utils$9,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$4.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function digest(enc){return"hex"===enc?utils$4.toHex32(this.h.slice(0,7),"big"):utils$4.split32(this.h.slice(0,7),"big")};var utils$3=utils$9,common$1=common$5,assert$2=minimalisticAssert,rotr64_hi=utils$3.rotr64_hi,rotr64_lo=utils$3.rotr64_lo,shr64_hi=utils$3.shr64_hi,shr64_lo=utils$3.shr64_lo,sum64=utils$3.sum64,sum64_hi=utils$3.sum64_hi,sum64_lo=utils$3.sum64_lo,sum64_4_hi=utils$3.sum64_4_hi,sum64_4_lo=utils$3.sum64_4_lo,sum64_5_hi=utils$3.sum64_5_hi,sum64_5_lo=utils$3.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$3.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;function ch64_hi(xh,xl,yh,yl,zh){var r=xh&yh^~xh&zh;return r<0&&(r+=4294967296),r}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;return r<0&&(r+=4294967296),r}function maj64_hi(xh,xl,yh,yl,zh){var r=xh&yh^xh&zh^yh&zh;return r<0&&(r+=4294967296),r}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;return r<0&&(r+=4294967296),r}function s0_512_hi(xh,xl){var r=rotr64_hi(xh,xl,28)^rotr64_hi(xl,xh,2)^rotr64_hi(xl,xh,7);return r<0&&(r+=4294967296),r}function s0_512_lo(xh,xl){var r=rotr64_lo(xh,xl,28)^rotr64_lo(xl,xh,2)^rotr64_lo(xl,xh,7);return r<0&&(r+=4294967296),r}function s1_512_hi(xh,xl){var r=rotr64_hi(xh,xl,14)^rotr64_hi(xh,xl,18)^rotr64_hi(xl,xh,9);return r<0&&(r+=4294967296),r}function s1_512_lo(xh,xl){var r=rotr64_lo(xh,xl,14)^rotr64_lo(xh,xl,18)^rotr64_lo(xl,xh,9);return r<0&&(r+=4294967296),r}function g0_512_hi(xh,xl){var r=rotr64_hi(xh,xl,1)^rotr64_hi(xh,xl,8)^shr64_hi(xh,xl,7);return r<0&&(r+=4294967296),r}function g0_512_lo(xh,xl){var r=rotr64_lo(xh,xl,1)^rotr64_lo(xh,xl,8)^shr64_lo(xh,xl,7);return r<0&&(r+=4294967296),r}function g1_512_hi(xh,xl){var r=rotr64_hi(xh,xl,19)^rotr64_hi(xl,xh,29)^shr64_hi(xh,xl,6);return r<0&&(r+=4294967296),r}function g1_512_lo(xh,xl){var r=rotr64_lo(xh,xl,19)^rotr64_lo(xl,xh,29)^shr64_lo(xh,xl,6);return r<0&&(r+=4294967296),r}SHA512$1.blockSize=1024,SHA512$1.outSize=512,SHA512$1.hmacStrength=192,SHA512$1.padLength=128,SHA512$1.prototype._prepareBlock=function _prepareBlock(msg,start){for(var W=this.W,i=0;i<32;i++)W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]),c0_lo=g1_512_lo(W[i-4],W[i-3]),c1_hi=W[i-14],c1_lo=W[i-13],c2_hi=g0_512_hi(W[i-30],W[i-29]),c2_lo=g0_512_lo(W[i-30],W[i-29]),c3_hi=W[i-32],c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo),W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo)}},SHA512$1.prototype._update=function _update(msg,start){this._prepareBlock(msg,start);var W=this.W,ah=this.h[0],al=this.h[1],bh=this.h[2],bl=this.h[3],ch=this.h[4],cl=this.h[5],dh=this.h[6],dl=this.h[7],eh=this.h[8],el=this.h[9],fh=this.h[10],fl=this.h[11],gh=this.h[12],gl=this.h[13],hh=this.h[14],hl=this.h[15];assert$2(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh,c0_lo=hl,c1_hi=s1_512_hi(eh,el),c1_lo=s1_512_lo(eh,el),c2_hi=ch64_hi(eh,el,fh,fl,gh),c2_lo=ch64_lo(eh,el,fh,fl,gh,gl),c3_hi=this.k[i],c3_lo=this.k[i+1],c4_hi=W[i],c4_lo=W[i+1],T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo),T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);c0_hi=s0_512_hi(ah,al),c0_lo=s0_512_lo(ah,al),c1_hi=maj64_hi(ah,al,bh,bl,ch),c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo),T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,eh=sum64_hi(dh,dl,T1_hi,T1_lo),el=sum64_lo(dl,dl,T1_hi,T1_lo),dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo),al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo)}sum64(this.h,0,ah,al),sum64(this.h,2,bh,bl),sum64(this.h,4,ch,cl),sum64(this.h,6,dh,dl),sum64(this.h,8,eh,el),sum64(this.h,10,fh,fl),sum64(this.h,12,gh,gl),sum64(this.h,14,hh,hl)},SHA512$1.prototype._digest=function digest(enc){return"hex"===enc?utils$3.toHex32(this.h,"big"):utils$3.split32(this.h,"big")};var utils$2=utils$9,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$2.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function digest(enc){return"hex"===enc?utils$2.toHex32(this.h.slice(0,12),"big"):utils$2.split32(this.h.slice(0,12),"big")},sha.sha1=_1,sha.sha224=_224,sha.sha256=_256,sha.sha384=_384,sha.sha512=_512;var ripemd={},utils$1=utils$9,common=common$5,rotl32=utils$1.rotl32,sum32=utils$1.sum32,sum32_3=utils$1.sum32_3,sum32_4=utils$1.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(j,x,y,z){return j<=15?x^y^z:j<=31?x&y|~x&z:j<=47?(x|~y)^z:j<=63?x&z|y&~z:x^(y|~z)}function K(j){return j<=15?0:j<=31?1518500249:j<=47?1859775393:j<=63?2400959708:2840853838}function Kh(j){return j<=15?1352829926:j<=31?1548603684:j<=47?1836072691:j<=63?2053994217:0}utils$1.inherits(RIPEMD160,BlockHash),ripemd.ripemd160=RIPEMD160,RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function update(msg,start){for(var A=this.h[0],B=this.h[1],C=this.h[2],D=this.h[3],E=this.h[4],Ah=A,Bh=B,Ch=C,Dh=D,Eh=E,j=0;j<80;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E,E=D,D=rotl32(C,10),C=B,B=T,T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh),Ah=Eh,Eh=Dh,Dh=rotl32(Ch,10),Ch=Bh,Bh=T}T=sum32_3(this.h[1],C,Dh),this.h[1]=sum32_3(this.h[2],D,Eh),this.h[2]=sum32_3(this.h[3],E,Ah),this.h[3]=sum32_3(this.h[4],A,Bh),this.h[4]=sum32_3(this.h[0],B,Ch),this.h[0]=T},RIPEMD160.prototype._digest=function digest(enc){return"hex"===enc?utils$1.toHex32(this.h,"little"):utils$1.split32(this.h,"little")};var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils=utils$9,assert$1=minimalisticAssert;function Hmac(hash,key,enc){if(!(this instanceof Hmac))return new Hmac(hash,key,enc);this.Hash=hash,this.blockSize=hash.blockSize/8,this.outSize=hash.outSize/8,this.inner=null,this.outer=null,this._init(utils.toArray(key,enc))}var hmac=Hmac;Hmac.prototype._init=function init(key){key.length>this.blockSize&&(key=(new this.Hash).update(key).digest()),assert$1(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)key.push(0);for(i=0;i<key.length;i++)key[i]^=54;for(this.inner=(new this.Hash).update(key),i=0;i<key.length;i++)key[i]^=106;this.outer=(new this.Hash).update(key)},Hmac.prototype.update=function update(msg,enc){return this.inner.update(msg,enc),this},Hmac.prototype.digest=function digest(enc){return this.outer.update(this.inner.digest()),this.outer.digest(enc)},function(exports){var hash=exports;hash.utils=utils$9,hash.common=common$5,hash.sha=sha,hash.ripemd=ripemd,hash.hmac=hmac,hash.sha1=hash.sha.sha1,hash.sha256=hash.sha.sha256,hash.sha224=hash.sha.sha224,hash.sha384=hash.sha.sha384,hash.sha512=hash.sha.sha512,hash.ripemd160=hash.ripemd.ripemd160}(hash$1);var hash=hash$1;let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;const _normalizeError=function _checkNormalize(){try{const missing=[];if(["NFD","NFC","NFKD","NFKC"].forEach((form=>{try{if("test"!=="test".normalize(form))throw new Error("bad normalize")}catch(error){missing.push(form)}})),missing.length)throw new Error("missing "+missing.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(error){return error.message}return null}();var LogLevel,ErrorCode;!function(LogLevel){LogLevel.DEBUG="DEBUG",LogLevel.INFO="INFO",LogLevel.WARNING="WARNING",LogLevel.ERROR="ERROR",LogLevel.OFF="OFF"}(LogLevel||(LogLevel={})),function(ErrorCode){ErrorCode.UNKNOWN_ERROR="UNKNOWN_ERROR",ErrorCode.NOT_IMPLEMENTED="NOT_IMPLEMENTED",ErrorCode.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",ErrorCode.NETWORK_ERROR="NETWORK_ERROR",ErrorCode.SERVER_ERROR="SERVER_ERROR",ErrorCode.TIMEOUT="TIMEOUT",ErrorCode.BUFFER_OVERRUN="BUFFER_OVERRUN",ErrorCode.NUMERIC_FAULT="NUMERIC_FAULT",ErrorCode.MISSING_NEW="MISSING_NEW",ErrorCode.INVALID_ARGUMENT="INVALID_ARGUMENT",ErrorCode.MISSING_ARGUMENT="MISSING_ARGUMENT",ErrorCode.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",ErrorCode.CALL_EXCEPTION="CALL_EXCEPTION",ErrorCode.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",ErrorCode.NONCE_EXPIRED="NONCE_EXPIRED",ErrorCode.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",ErrorCode.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",ErrorCode.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(version){Object.defineProperty(this,"version",{enumerable:!0,value:version,writable:!1})}_log(logLevel,args){const level=logLevel.toLowerCase();null==LogLevels[level]&&this.throwArgumentError("invalid log level name","logLevel",logLevel),_logLevel>LogLevels[level]||index_browser_esm_console.log.apply(index_browser_esm_console,args)}debug(...args){this._log(Logger.levels.DEBUG,args)}info(...args){this._log(Logger.levels.INFO,args)}warn(...args){this._log(Logger.levels.WARNING,args)}makeError(message,code,params){if(_censorErrors)return this.makeError("censored error",code,{});code||(code=Logger.errors.UNKNOWN_ERROR),params||(params={});const messageDetails=[];Object.keys(params).forEach((key=>{const value=params[key];try{if(value instanceof Uint8Array){let hex="";for(let i=0;i<value.length;i++)hex+=HEX[value[i]>>4],hex+=HEX[15&value[i]];messageDetails.push(key+"=Uint8Array(0x"+hex+")")}else messageDetails.push(key+"="+JSON.stringify(value))}catch(error){messageDetails.push(key+"="+JSON.stringify(params[key].toString()))}})),messageDetails.push(`code=${code}`),messageDetails.push(`version=${this.version}`);const reason=message;let url="";switch(code){case ErrorCode.NUMERIC_FAULT:{url="NUMERIC_FAULT";const fault=message;switch(fault){case"overflow":case"underflow":case"division-by-zero":url+="-"+fault;break;case"negative-power":case"negative-width":url+="-unsupported";break;case"unbound-bitwise-result":url+="-unbound-result"}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:url=code}url&&(message+=" [ See: https://links.ethers.org/v5-errors-"+url+" ]"),messageDetails.length&&(message+=" ("+messageDetails.join(", ")+")");const error=new Error(message);return error.reason=reason,error.code=code,Object.keys(params).forEach((function(key){error[key]=params[key]})),error}throwError(message,code,params){throw this.makeError(message,code,params)}throwArgumentError(message,name,value){return this.throwError(message,Logger.errors.INVALID_ARGUMENT,{argument:name,value})}assert(condition,message,code,params){condition||this.throwError(message,code,params)}assertArgument(condition,message,name,value){condition||this.throwArgumentError(message,name,value)}checkNormalize(message){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(value,message){"number"==typeof value&&(null==message&&(message="value not safe"),(value<0||value>=9007199254740991)&&this.throwError(message,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value}),value%1&&this.throwError(message,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value}))}checkArgumentCount(count,expectedCount,message){message=message?": "+message:"",count<expectedCount&&this.throwError("missing argument"+message,Logger.errors.MISSING_ARGUMENT,{count,expectedCount}),count>expectedCount&&this.throwError("too many arguments"+message,Logger.errors.UNEXPECTED_ARGUMENT,{count,expectedCount})}checkNew(target,kind){target!==Object&&null!=target||this.throwError("missing new",Logger.errors.MISSING_NEW,{name:kind.name})}checkAbstract(target,kind){target===kind?this.throwError("cannot instantiate abstract class "+JSON.stringify(kind.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:target.name,operation:"new"}):target!==Object&&null!=target||this.throwError("missing new",Logger.errors.MISSING_NEW,{name:kind.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger("logger/5.6.0")),_globalLogger}static setCensorship(censorship,permanent){if(!censorship&&permanent&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!censorship)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!censorship,_permanentCensorErrors=!!permanent}static setLogLevel(logLevel){const level=LogLevels[logLevel.toLowerCase()];null!=level?_logLevel=level:Logger.globalLogger().warn("invalid log level - "+logLevel)}static from(version){return new Logger(version)}}Logger.errors=ErrorCode,Logger.levels=LogLevel;const logger=new Logger("bytes/5.6.0");function addSlice(array){return array.slice||(array.slice=function(){const args=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(array,args)))}),array}function isInteger(value){return"number"==typeof value&&value==value&&value%1==0}function arrayify(value,options){if(options||(options={}),"number"==typeof value){logger.checkSafeUint53(value,"invalid arrayify value");const result=[];for(;value;)result.unshift(255&value),value=parseInt(String(value/256));return 0===result.length&&result.push(0),addSlice(new Uint8Array(result))}if(options.allowMissingPrefix&&"string"==typeof value&&"0x"!==value.substring(0,2)&&(value="0x"+value),function isHexable(value){return!!value.toHexString}(value)&&(value=value.toHexString()),function isHexString(value,length){if("string"!=typeof value||!value.match(/^0x[0-9A-Fa-f]*$/))return!1;if(length&&value.length!==2+2*length)return!1;return!0}(value)){let hex=value.substring(2);hex.length%2&&("left"===options.hexPad?hex="0x0"+hex.substring(2):"right"===options.hexPad?hex+="0":logger.throwArgumentError("hex data is odd-length","value",value));const result=[];for(let i=0;i<hex.length;i+=2)result.push(parseInt(hex.substring(i,i+2),16));return addSlice(new Uint8Array(result))}return function isBytes(value){if(null==value)return!1;if(value.constructor===Uint8Array)return!0;if("string"==typeof value)return!1;if(!isInteger(value.length)||value.length<0)return!1;for(let i=0;i<value.length;i++){const v=value[i];if(!isInteger(v)||v<0||v>=256)return!1}return!0}(value)?addSlice(new Uint8Array(value)):logger.throwArgumentError("invalid arrayify value","value",value)}function sha256(data){return"0x"+hash.sha256().update(arrayify(data)).digest("hex")}new Logger("sha2/5.6.0");class index_browser_esm_Struct{constructor(properties){Object.assign(this,properties)}encode(){return node_modules_buffer.lW.from((0,lib.serialize)(SOLANA_SCHEMA,this))}static decode(data){return(0,lib.deserialize)(SOLANA_SCHEMA,this,data)}static decodeUnchecked(data){return(0,lib.deserializeUnchecked)(SOLANA_SCHEMA,this,data)}}const SOLANA_SCHEMA=new Map;class PublicKey extends index_browser_esm_Struct{constructor(value){if(super({}),this._bn=void 0,function isPublicKeyData(value){return void 0!==value._bn}(value))this._bn=value._bn;else{if("string"==typeof value){const decoded=bs58_default().decode(value);if(32!=decoded.length)throw new Error("Invalid public key input");this._bn=new(bn_default())(decoded)}else this._bn=new(bn_default())(value);if(this._bn.byteLength()>32)throw new Error("Invalid public key input")}}equals(publicKey){return this._bn.eq(publicKey._bn)}toBase58(){return bs58_default().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){return this.toBuffer()}toBuffer(){const b=this._bn.toArrayLike(node_modules_buffer.lW);if(32===b.length)return b;const zeroPad=node_modules_buffer.lW.alloc(32);return b.copy(zeroPad,32-b.length),zeroPad}toString(){return this.toBase58()}static async createWithSeed(fromPublicKey,seed,programId){const buffer=node_modules_buffer.lW.concat([fromPublicKey.toBuffer(),node_modules_buffer.lW.from(seed),programId.toBuffer()]),hash=sha256(new Uint8Array(buffer)).slice(2);return new PublicKey(node_modules_buffer.lW.from(hash,"hex"))}static createProgramAddressSync(seeds,programId){let buffer=node_modules_buffer.lW.alloc(0);seeds.forEach((function(seed){if(seed.length>32)throw new TypeError("Max seed length exceeded");buffer=node_modules_buffer.lW.concat([buffer,toBuffer(seed)])})),buffer=node_modules_buffer.lW.concat([buffer,programId.toBuffer(),node_modules_buffer.lW.from("ProgramDerivedAddress")]);let hash=sha256(new Uint8Array(buffer)).slice(2),publicKeyBytes=new(bn_default())(hash,16).toArray(void 0,32);if(is_on_curve(publicKeyBytes))throw new Error("Invalid seeds, address must fall off the curve");return new PublicKey(publicKeyBytes)}static async createProgramAddress(seeds,programId){return this.createProgramAddressSync(seeds,programId)}static findProgramAddressSync(seeds,programId){let address,nonce=255;for(;0!=nonce;){try{const seedsWithNonce=seeds.concat(node_modules_buffer.lW.from([nonce]));address=this.createProgramAddressSync(seedsWithNonce,programId)}catch(err){if(err instanceof TypeError)throw err;nonce--;continue}return[address,nonce]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(seeds,programId){return this.findProgramAddressSync(seeds,programId)}static isOnCurve(pubkeyData){return 1==is_on_curve(new PublicKey(pubkeyData).toBytes())}}PublicKey.default=new PublicKey("11111111111111111111111111111111"),SOLANA_SCHEMA.set(PublicKey,{kind:"struct",fields:[["_bn","u256"]]});let naclLowLevel=nacl_fast_default().lowlevel;function is_on_curve(p){var r=[naclLowLevel.gf(),naclLowLevel.gf(),naclLowLevel.gf(),naclLowLevel.gf()],t=naclLowLevel.gf(),chk=naclLowLevel.gf(),num=naclLowLevel.gf(),den=naclLowLevel.gf(),den2=naclLowLevel.gf(),den4=naclLowLevel.gf(),den6=naclLowLevel.gf();return naclLowLevel.set25519(r[2],gf1),naclLowLevel.unpack25519(r[1],p),naclLowLevel.S(num,r[1]),naclLowLevel.M(den,num,naclLowLevel.D),naclLowLevel.Z(num,num,r[2]),naclLowLevel.A(den,r[2],den),naclLowLevel.S(den2,den),naclLowLevel.S(den4,den2),naclLowLevel.M(den6,den4,den2),naclLowLevel.M(t,den6,num),naclLowLevel.M(t,t,den),naclLowLevel.pow2523(t,t),naclLowLevel.M(t,t,num),naclLowLevel.M(t,t,den),naclLowLevel.M(t,t,den),naclLowLevel.M(r[0],t,den),naclLowLevel.S(chk,r[0]),naclLowLevel.M(chk,chk,den),neq25519(chk,num)&&naclLowLevel.M(r[0],r[0],I),naclLowLevel.S(chk,r[0]),naclLowLevel.M(chk,chk,den),neq25519(chk,num)?0:1}let gf1=naclLowLevel.gf([1]),I=naclLowLevel.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);return naclLowLevel.pack25519(c,a),naclLowLevel.pack25519(d,b),naclLowLevel.crypto_verify_32(c,0,d,0)}new PublicKey("BPFLoader1111111111111111111111111111111111");const publicKey=(property="publicKey")=>Layout.Ik(32,property),rustString=(property="string")=>{const rsl=Layout.n_([Layout.Jq("length"),Layout.Jq("lengthPadding"),Layout.Ik(Layout.cv(Layout.Jq(),-8),"chars")],property),_decode=rsl.decode.bind(rsl),_encode=rsl.encode.bind(rsl),rslShim=rsl;return rslShim.decode=(b,offset)=>_decode(b,offset).chars.toString(),rslShim.encode=(str,b,offset)=>{const data={chars:node_modules_buffer.lW.from(str,"utf8")};return _encode(data,b,offset)},rslShim.alloc=str=>Layout.Jq().span+Layout.Jq().span+node_modules_buffer.lW.from(str,"utf8").length,rslShim};function decodeLength(bytes){let len=0,size=0;for(;;){let elem=bytes.shift();if(len|=(127&elem)<<7*size,size+=1,0==(128&elem))break}return len}function encodeLength(bytes,len){let rem_len=len;for(;;){let elem=127&rem_len;if(rem_len>>=7,0==rem_len){bytes.push(elem);break}elem|=128,bytes.push(elem)}}class Message{constructor(args){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=args.header,this.accountKeys=args.accountKeys.map((account=>new PublicKey(account))),this.recentBlockhash=args.recentBlockhash,this.instructions=args.instructions,this.instructions.forEach((ix=>this.indexToProgramIds.set(ix.programIdIndex,this.accountKeys[ix.programIdIndex])))}isAccountSigner(index){return index<this.header.numRequiredSignatures}isAccountWritable(index){return index<this.header.numRequiredSignatures-this.header.numReadonlySignedAccounts||index>=this.header.numRequiredSignatures&&index<this.accountKeys.length-this.header.numReadonlyUnsignedAccounts}isProgramId(index){return this.indexToProgramIds.has(index)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((_,index)=>!this.isProgramId(index)))}serialize(){const numKeys=this.accountKeys.length;let keyCount=[];encodeLength(keyCount,numKeys);const instructions=this.instructions.map((instruction=>{const{accounts,programIdIndex}=instruction,data=Array.from(bs58_default().decode(instruction.data));let keyIndicesCount=[];encodeLength(keyIndicesCount,accounts.length);let dataCount=[];return encodeLength(dataCount,data.length),{programIdIndex,keyIndicesCount:node_modules_buffer.lW.from(keyIndicesCount),keyIndices:accounts,dataLength:node_modules_buffer.lW.from(dataCount),data}}));let instructionCount=[];encodeLength(instructionCount,instructions.length);let instructionBuffer=node_modules_buffer.lW.alloc(1232);node_modules_buffer.lW.from(instructionCount).copy(instructionBuffer);let instructionBufferLength=instructionCount.length;instructions.forEach((instruction=>{const length=Layout.n_([Layout.u8("programIdIndex"),Layout.Ik(instruction.keyIndicesCount.length,"keyIndicesCount"),Layout.A9(Layout.u8("keyIndex"),instruction.keyIndices.length,"keyIndices"),Layout.Ik(instruction.dataLength.length,"dataLength"),Layout.A9(Layout.u8("userdatum"),instruction.data.length,"data")]).encode(instruction,instructionBuffer,instructionBufferLength);instructionBufferLength+=length})),instructionBuffer=instructionBuffer.slice(0,instructionBufferLength);const signDataLayout=Layout.n_([Layout.Ik(1,"numRequiredSignatures"),Layout.Ik(1,"numReadonlySignedAccounts"),Layout.Ik(1,"numReadonlyUnsignedAccounts"),Layout.Ik(keyCount.length,"keyCount"),Layout.A9(publicKey("key"),numKeys,"keys"),publicKey("recentBlockhash")]),transaction={numRequiredSignatures:node_modules_buffer.lW.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:node_modules_buffer.lW.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:node_modules_buffer.lW.from([this.header.numReadonlyUnsignedAccounts]),keyCount:node_modules_buffer.lW.from(keyCount),keys:this.accountKeys.map((key=>toBuffer(key.toBytes()))),recentBlockhash:bs58_default().decode(this.recentBlockhash)};let signData=node_modules_buffer.lW.alloc(2048);const length=signDataLayout.encode(transaction,signData);return instructionBuffer.copy(signData,length),signData.slice(0,length+instructionBuffer.length)}static from(buffer){let byteArray=[...buffer];const numRequiredSignatures=byteArray.shift(),numReadonlySignedAccounts=byteArray.shift(),numReadonlyUnsignedAccounts=byteArray.shift(),accountCount=decodeLength(byteArray);let accountKeys=[];for(let i=0;i<accountCount;i++){const account=byteArray.slice(0,32);byteArray=byteArray.slice(32),accountKeys.push(bs58_default().encode(node_modules_buffer.lW.from(account)))}const recentBlockhash=byteArray.slice(0,32);byteArray=byteArray.slice(32);const instructionCount=decodeLength(byteArray);let instructions=[];for(let i=0;i<instructionCount;i++){const programIdIndex=byteArray.shift(),accountCount=decodeLength(byteArray),accounts=byteArray.slice(0,accountCount);byteArray=byteArray.slice(accountCount);const dataLength=decodeLength(byteArray),dataSlice=byteArray.slice(0,dataLength),data=bs58_default().encode(node_modules_buffer.lW.from(dataSlice));byteArray=byteArray.slice(dataLength),instructions.push({programIdIndex,accounts,data})}const messageArgs={header:{numRequiredSignatures,numReadonlySignedAccounts,numReadonlyUnsignedAccounts},recentBlockhash:bs58_default().encode(node_modules_buffer.lW.from(recentBlockhash)),accountKeys,instructions};return new Message(messageArgs)}}function index_browser_esm_assert(condition,message){if(!condition)throw new Error(message||"Assertion failed")}let TransactionStatus;!function(TransactionStatus){TransactionStatus[TransactionStatus.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",TransactionStatus[TransactionStatus.PROCESSED=1]="PROCESSED",TransactionStatus[TransactionStatus.TIMED_OUT=2]="TIMED_OUT"}(TransactionStatus||(TransactionStatus={}));const DEFAULT_SIGNATURE=node_modules_buffer.lW.alloc(64).fill(0);class TransactionInstruction{constructor(opts){this.keys=void 0,this.programId=void 0,this.data=node_modules_buffer.lW.alloc(0),this.programId=opts.programId,this.keys=opts.keys,opts.data&&(this.data=opts.data)}toJSON(){return{keys:this.keys.map((({pubkey,isSigner,isWritable})=>({pubkey:pubkey.toJSON(),isSigner,isWritable}))),programId:this.programId.toJSON(),data:[...this.data]}}}class Transaction{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(opts){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this._message=void 0,this._json=void 0,opts)if(opts.feePayer&&(this.feePayer=opts.feePayer),opts.signatures&&(this.signatures=opts.signatures),Object.prototype.hasOwnProperty.call(opts,"lastValidBlockHeight")){const{blockhash,lastValidBlockHeight}=opts;this.recentBlockhash=blockhash,this.lastValidBlockHeight=lastValidBlockHeight}else{const{recentBlockhash,nonceInfo}=opts;nonceInfo&&(this.nonceInfo=nonceInfo),this.recentBlockhash=recentBlockhash}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((instruction=>instruction.toJSON())),signers:this.signatures.map((({publicKey})=>publicKey.toJSON()))}}add(...items){if(0===items.length)throw new Error("No instructions");return items.forEach((item=>{"instructions"in item?this.instructions=this.instructions.concat(item.instructions):"data"in item&&"programId"in item&&"keys"in item?this.instructions.push(item):this.instructions.push(new TransactionInstruction(item))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let recentBlockhash,instructions,feePayer;if(this.nonceInfo?(recentBlockhash=this.nonceInfo.nonce,instructions=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(recentBlockhash=this.recentBlockhash,instructions=this.instructions),!recentBlockhash)throw new Error("Transaction recentBlockhash required");if(instructions.length<1&&index_browser_esm_console.warn("No instructions provided"),this.feePayer)feePayer=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");feePayer=this.signatures[0].publicKey}for(let i=0;i<instructions.length;i++)if(void 0===instructions[i].programId)throw new Error(`Transaction instruction index ${i} has undefined program id`);const programIds=[],accountMetas=[];instructions.forEach((instruction=>{instruction.keys.forEach((accountMeta=>{accountMetas.push({...accountMeta})}));const programId=instruction.programId.toString();programIds.includes(programId)||programIds.push(programId)})),programIds.forEach((programId=>{accountMetas.push({pubkey:new PublicKey(programId),isSigner:!1,isWritable:!1})}));const uniqueMetas=[];accountMetas.forEach((accountMeta=>{const pubkeyString=accountMeta.pubkey.toString(),uniqueIndex=uniqueMetas.findIndex((x=>x.pubkey.toString()===pubkeyString));uniqueIndex>-1?(uniqueMetas[uniqueIndex].isWritable=uniqueMetas[uniqueIndex].isWritable||accountMeta.isWritable,uniqueMetas[uniqueIndex].isSigner=uniqueMetas[uniqueIndex].isSigner||accountMeta.isSigner):uniqueMetas.push(accountMeta)})),uniqueMetas.sort((function(x,y){return x.isSigner!==y.isSigner?x.isSigner?-1:1:x.isWritable!==y.isWritable?x.isWritable?-1:1:x.pubkey.toBase58().localeCompare(y.pubkey.toBase58())}));const feePayerIndex=uniqueMetas.findIndex((x=>x.pubkey.equals(feePayer)));if(feePayerIndex>-1){const[payerMeta]=uniqueMetas.splice(feePayerIndex,1);payerMeta.isSigner=!0,payerMeta.isWritable=!0,uniqueMetas.unshift(payerMeta)}else uniqueMetas.unshift({pubkey:feePayer,isSigner:!0,isWritable:!0});for(const signature of this.signatures){const uniqueIndex=uniqueMetas.findIndex((x=>x.pubkey.equals(signature.publicKey)));if(!(uniqueIndex>-1))throw new Error(`unknown signer: ${signature.publicKey.toString()}`);uniqueMetas[uniqueIndex].isSigner||(uniqueMetas[uniqueIndex].isSigner=!0,index_browser_esm_console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let numRequiredSignatures=0,numReadonlySignedAccounts=0,numReadonlyUnsignedAccounts=0;const signedKeys=[],unsignedKeys=[];uniqueMetas.forEach((({pubkey,isSigner,isWritable})=>{isSigner?(signedKeys.push(pubkey.toString()),numRequiredSignatures+=1,isWritable||(numReadonlySignedAccounts+=1)):(unsignedKeys.push(pubkey.toString()),isWritable||(numReadonlyUnsignedAccounts+=1))}));const accountKeys=signedKeys.concat(unsignedKeys),compiledInstructions=instructions.map((instruction=>{const{data,programId}=instruction;return{programIdIndex:accountKeys.indexOf(programId.toString()),accounts:instruction.keys.map((meta=>accountKeys.indexOf(meta.pubkey.toString()))),data:bs58_default().encode(data)}}));return compiledInstructions.forEach((instruction=>{index_browser_esm_assert(instruction.programIdIndex>=0),instruction.accounts.forEach((keyIndex=>index_browser_esm_assert(keyIndex>=0)))})),new Message({header:{numRequiredSignatures,numReadonlySignedAccounts,numReadonlyUnsignedAccounts},accountKeys,recentBlockhash,instructions:compiledInstructions})}_compile(){const message=this.compileMessage(),signedKeys=message.accountKeys.slice(0,message.header.numRequiredSignatures);if(this.signatures.length===signedKeys.length){if(this.signatures.every(((pair,index)=>signedKeys[index].equals(pair.publicKey))))return message}return this.signatures=signedKeys.map((publicKey=>({signature:null,publicKey}))),message}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(connection){return(await connection.getFeeForMessage(this.compileMessage())).value}setSigners(...signers){if(0===signers.length)throw new Error("No signers");const seen=new Set;this.signatures=signers.filter((publicKey=>{const key=publicKey.toString();return!seen.has(key)&&(seen.add(key),!0)})).map((publicKey=>({signature:null,publicKey})))}sign(...signers){if(0===signers.length)throw new Error("No signers");const seen=new Set,uniqueSigners=[];for(const signer of signers){const key=signer.publicKey.toString();seen.has(key)||(seen.add(key),uniqueSigners.push(signer))}this.signatures=uniqueSigners.map((signer=>({signature:null,publicKey:signer.publicKey})));const message=this._compile();this._partialSign(message,...uniqueSigners)}partialSign(...signers){if(0===signers.length)throw new Error("No signers");const seen=new Set,uniqueSigners=[];for(const signer of signers){const key=signer.publicKey.toString();seen.has(key)||(seen.add(key),uniqueSigners.push(signer))}const message=this._compile();this._partialSign(message,...uniqueSigners)}_partialSign(message,...signers){const signData=message.serialize();signers.forEach((signer=>{const signature=nacl_fast_default().sign.detached(signData,signer.secretKey);this._addSignature(signer.publicKey,toBuffer(signature))}))}addSignature(pubkey,signature){this._compile(),this._addSignature(pubkey,signature)}_addSignature(pubkey,signature){index_browser_esm_assert(64===signature.length);const index=this.signatures.findIndex((sigpair=>pubkey.equals(sigpair.publicKey)));if(index<0)throw new Error(`unknown signer: ${pubkey.toString()}`);this.signatures[index].signature=node_modules_buffer.lW.from(signature)}verifySignatures(){return this._verifySignatures(this.serializeMessage(),!0)}_verifySignatures(signData,requireAllSignatures){for(const{signature,publicKey}of this.signatures)if(null===signature){if(requireAllSignatures)return!1}else if(!nacl_fast_default().sign.detached.verify(signData,signature,publicKey.toBuffer()))return!1;return!0}serialize(config){const{requireAllSignatures,verifySignatures}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},config),signData=this.serializeMessage();if(verifySignatures&&!this._verifySignatures(signData,requireAllSignatures))throw new Error("Signature verification failed");return this._serialize(signData)}_serialize(signData){const{signatures}=this,signatureCount=[];encodeLength(signatureCount,signatures.length);const transactionLength=signatureCount.length+64*signatures.length+signData.length,wireTransaction=node_modules_buffer.lW.alloc(transactionLength);return index_browser_esm_assert(signatures.length<256),node_modules_buffer.lW.from(signatureCount).copy(wireTransaction,0),signatures.forEach((({signature},index)=>{null!==signature&&(index_browser_esm_assert(64===signature.length,"signature has invalid length"),node_modules_buffer.lW.from(signature).copy(wireTransaction,signatureCount.length+64*index))})),signData.copy(wireTransaction,signatureCount.length+64*signatures.length),index_browser_esm_assert(wireTransaction.length<=1232,`Transaction too large: ${wireTransaction.length} > 1232`),wireTransaction}get keys(){return index_browser_esm_assert(1===this.instructions.length),this.instructions[0].keys.map((keyObj=>keyObj.pubkey))}get programId(){return index_browser_esm_assert(1===this.instructions.length),this.instructions[0].programId}get data(){return index_browser_esm_assert(1===this.instructions.length),this.instructions[0].data}static from(buffer){let byteArray=[...buffer];const signatureCount=decodeLength(byteArray);let signatures=[];for(let i=0;i<signatureCount;i++){const signature=byteArray.slice(0,64);byteArray=byteArray.slice(64),signatures.push(bs58_default().encode(node_modules_buffer.lW.from(signature)))}return Transaction.populate(Message.from(byteArray),signatures)}static populate(message,signatures=[]){const transaction=new Transaction;return transaction.recentBlockhash=message.recentBlockhash,message.header.numRequiredSignatures>0&&(transaction.feePayer=message.accountKeys[0]),signatures.forEach(((signature,index)=>{const sigPubkeyPair={signature:signature==bs58_default().encode(DEFAULT_SIGNATURE)?null:bs58_default().decode(signature),publicKey:message.accountKeys[index]};transaction.signatures.push(sigPubkeyPair)})),message.instructions.forEach((instruction=>{const keys=instruction.accounts.map((account=>{const pubkey=message.accountKeys[account];return{pubkey,isSigner:transaction.signatures.some((keyObj=>keyObj.publicKey.toString()===pubkey.toString()))||message.isAccountSigner(account),isWritable:message.isAccountWritable(account)}}));transaction.instructions.push(new TransactionInstruction({keys,programId:message.accountKeys[instruction.programIdIndex],data:bs58_default().decode(instruction.data)}))})),transaction._message=message,transaction._json=transaction.toJSON(),transaction}}const SYSVAR_CLOCK_PUBKEY=new PublicKey("SysvarC1ock11111111111111111111111111111111"),SYSVAR_RECENT_BLOCKHASHES_PUBKEY=(new PublicKey("SysvarEpochSchedu1e111111111111111111111111"),new PublicKey("Sysvar1nstructions1111111111111111111111111"),new PublicKey("SysvarRecentB1ockHashes11111111111111111111")),SYSVAR_RENT_PUBKEY=new PublicKey("SysvarRent111111111111111111111111111111111"),SYSVAR_STAKE_HISTORY_PUBKEY=(new PublicKey("SysvarRewards111111111111111111111111111111"),new PublicKey("SysvarS1otHashes111111111111111111111111111"),new PublicKey("SysvarS1otHistory11111111111111111111111111"),new PublicKey("SysvarStakeHistory1111111111111111111111111"));async function sendAndConfirmTransaction(connection,transaction,signers,options){const sendOptions=options&&{skipPreflight:options.skipPreflight,preflightCommitment:options.preflightCommitment||options.commitment,maxRetries:options.maxRetries,minContextSlot:options.minContextSlot},signature=await connection.sendTransaction(transaction,signers,sendOptions),status=null!=transaction.recentBlockhash&&null!=transaction.lastValidBlockHeight?(await connection.confirmTransaction({signature,blockhash:transaction.recentBlockhash,lastValidBlockHeight:transaction.lastValidBlockHeight},options&&options.commitment)).value:(await connection.confirmTransaction(signature,options&&options.commitment)).value;if(status.err)throw new Error(`Transaction ${signature} failed (${JSON.stringify(status)})`);return signature}function sleep(ms){return new Promise((resolve=>setTimeout(resolve,ms)))}function encodeData(type,fields){const allocLength=type.layout.span>=0?type.layout.span:function getAlloc(type,fields){let alloc=0;return type.layout.fields.forEach((item=>{item.span>=0?alloc+=item.span:"function"==typeof item.alloc&&(alloc+=item.alloc(fields[item.property]))})),alloc}(type,fields),data=node_modules_buffer.lW.alloc(allocLength),layoutFields=Object.assign({instruction:type.index},fields);return type.layout.encode(layoutFields,data),data}const FeeCalculatorLayout=Layout._O("lamportsPerSignature"),NonceAccountLayout=Layout.n_([Layout.Jq("version"),Layout.Jq("state"),publicKey("authorizedPubkey"),publicKey("nonce"),Layout.n_([FeeCalculatorLayout],"feeCalculator")]),NONCE_ACCOUNT_LENGTH=NonceAccountLayout.span;class NonceAccount{constructor(args){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=args.authorizedPubkey,this.nonce=args.nonce,this.feeCalculator=args.feeCalculator}static fromAccountData(buffer){const nonceAccount=NonceAccountLayout.decode(toBuffer(buffer),0);return new NonceAccount({authorizedPubkey:new PublicKey(nonceAccount.authorizedPubkey),nonce:new PublicKey(nonceAccount.nonce).toString(),feeCalculator:nonceAccount.feeCalculator})}}const u64=(length=8,property=>{const layout=(0,Layout.Ik)(length,property),{encode,decode}=(layout=>({decode:layout.decode.bind(layout),encode:layout.encode.bind(layout)}))(layout),bigIntLayout=layout;return bigIntLayout.decode=(buffer,offset)=>{const src=decode(buffer,offset);return(0,browser.oU)(node_modules_buffer.lW.from(src))},bigIntLayout.encode=(bigInt,buffer,offset)=>{const src=(0,browser.k$)(bigInt,length);return encode(src,buffer,offset)},bigIntLayout});var length;const SYSTEM_INSTRUCTION_LAYOUTS=Object.freeze({Create:{index:0,layout:Layout.n_([Layout.Jq("instruction"),Layout.gM("lamports"),Layout.gM("space"),publicKey("programId")])},Assign:{index:1,layout:Layout.n_([Layout.Jq("instruction"),publicKey("programId")])},Transfer:{index:2,layout:Layout.n_([Layout.Jq("instruction"),u64("lamports")])},CreateWithSeed:{index:3,layout:Layout.n_([Layout.Jq("instruction"),publicKey("base"),rustString("seed"),Layout.gM("lamports"),Layout.gM("space"),publicKey("programId")])},AdvanceNonceAccount:{index:4,layout:Layout.n_([Layout.Jq("instruction")])},WithdrawNonceAccount:{index:5,layout:Layout.n_([Layout.Jq("instruction"),Layout.gM("lamports")])},InitializeNonceAccount:{index:6,layout:Layout.n_([Layout.Jq("instruction"),publicKey("authorized")])},AuthorizeNonceAccount:{index:7,layout:Layout.n_([Layout.Jq("instruction"),publicKey("authorized")])},Allocate:{index:8,layout:Layout.n_([Layout.Jq("instruction"),Layout.gM("space")])},AllocateWithSeed:{index:9,layout:Layout.n_([Layout.Jq("instruction"),publicKey("base"),rustString("seed"),Layout.gM("space"),publicKey("programId")])},AssignWithSeed:{index:10,layout:Layout.n_([Layout.Jq("instruction"),publicKey("base"),rustString("seed"),publicKey("programId")])},TransferWithSeed:{index:11,layout:Layout.n_([Layout.Jq("instruction"),u64("lamports"),rustString("seed"),publicKey("programId")])},UpgradeNonceAccount:{index:12,layout:Layout.n_([Layout.Jq("instruction")])}});class SystemProgram{constructor(){}static createAccount(params){const data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Create,{lamports:params.lamports,space:params.space,programId:toBuffer(params.programId.toBuffer())});return new TransactionInstruction({keys:[{pubkey:params.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:params.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data})}static transfer(params){let data,keys;if("basePubkey"in params){data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed,{lamports:BigInt(params.lamports),seed:params.seed,programId:toBuffer(params.programId.toBuffer())}),keys=[{pubkey:params.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:params.basePubkey,isSigner:!0,isWritable:!1},{pubkey:params.toPubkey,isSigner:!1,isWritable:!0}]}else{data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Transfer,{lamports:BigInt(params.lamports)}),keys=[{pubkey:params.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:params.toPubkey,isSigner:!1,isWritable:!0}]}return new TransactionInstruction({keys,programId:this.programId,data})}static assign(params){let data,keys;if("basePubkey"in params){data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed,{base:toBuffer(params.basePubkey.toBuffer()),seed:params.seed,programId:toBuffer(params.programId.toBuffer())}),keys=[{pubkey:params.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:params.basePubkey,isSigner:!0,isWritable:!1}]}else{data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Assign,{programId:toBuffer(params.programId.toBuffer())}),keys=[{pubkey:params.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys,programId:this.programId,data})}static createAccountWithSeed(params){const data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,{base:toBuffer(params.basePubkey.toBuffer()),seed:params.seed,lamports:params.lamports,space:params.space,programId:toBuffer(params.programId.toBuffer())});let keys=[{pubkey:params.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:params.newAccountPubkey,isSigner:!1,isWritable:!0}];return params.basePubkey!=params.fromPubkey&&keys.push({pubkey:params.basePubkey,isSigner:!0,isWritable:!1}),new TransactionInstruction({keys,programId:this.programId,data})}static createNonceAccount(params){const transaction=new Transaction;"basePubkey"in params&&"seed"in params?transaction.add(SystemProgram.createAccountWithSeed({fromPubkey:params.fromPubkey,newAccountPubkey:params.noncePubkey,basePubkey:params.basePubkey,seed:params.seed,lamports:params.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId})):transaction.add(SystemProgram.createAccount({fromPubkey:params.fromPubkey,newAccountPubkey:params.noncePubkey,lamports:params.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId}));const initParams={noncePubkey:params.noncePubkey,authorizedPubkey:params.authorizedPubkey};return transaction.add(this.nonceInitialize(initParams)),transaction}static nonceInitialize(params){const data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,{authorized:toBuffer(params.authorizedPubkey.toBuffer())}),instructionData={keys:[{pubkey:params.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data};return new TransactionInstruction(instructionData)}static nonceAdvance(params){const data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount),instructionData={keys:[{pubkey:params.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:params.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data};return new TransactionInstruction(instructionData)}static nonceWithdraw(params){const data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,{lamports:params.lamports});return new TransactionInstruction({keys:[{pubkey:params.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:params.toPubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:params.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data})}static nonceAuthorize(params){const data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,{authorized:toBuffer(params.newAuthorizedPubkey.toBuffer())});return new TransactionInstruction({keys:[{pubkey:params.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:params.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data})}static allocate(params){let data,keys;if("basePubkey"in params){data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed,{base:toBuffer(params.basePubkey.toBuffer()),seed:params.seed,space:params.space,programId:toBuffer(params.programId.toBuffer())}),keys=[{pubkey:params.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:params.basePubkey,isSigner:!0,isWritable:!1}]}else{data=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Allocate,{space:params.space}),keys=[{pubkey:params.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys,programId:this.programId,data})}}SystemProgram.programId=new PublicKey("11111111111111111111111111111111");class Loader{constructor(){}static getMinNumSignatures(dataLength){return 2*(Math.ceil(dataLength/Loader.chunkSize)+1+1)}static async load(connection,payer,program,programId,data){{const balanceNeeded=await connection.getMinimumBalanceForRentExemption(data.length),programInfo=await connection.getAccountInfo(program.publicKey,"confirmed");let transaction=null;if(null!==programInfo){if(programInfo.executable)return index_browser_esm_console.error("Program load failed, account is already executable"),!1;programInfo.data.length!==data.length&&(transaction=transaction||new Transaction,transaction.add(SystemProgram.allocate({accountPubkey:program.publicKey,space:data.length}))),programInfo.owner.equals(programId)||(transaction=transaction||new Transaction,transaction.add(SystemProgram.assign({accountPubkey:program.publicKey,programId}))),programInfo.lamports<balanceNeeded&&(transaction=transaction||new Transaction,transaction.add(SystemProgram.transfer({fromPubkey:payer.publicKey,toPubkey:program.publicKey,lamports:balanceNeeded-programInfo.lamports})))}else transaction=(new Transaction).add(SystemProgram.createAccount({fromPubkey:payer.publicKey,newAccountPubkey:program.publicKey,lamports:balanceNeeded>0?balanceNeeded:1,space:data.length,programId}));null!==transaction&&await sendAndConfirmTransaction(connection,transaction,[payer,program],{commitment:"confirmed"})}const dataLayout=Layout.n_([Layout.Jq("instruction"),Layout.Jq("offset"),Layout.Jq("bytesLength"),Layout.Jq("bytesLengthPadding"),Layout.A9(Layout.u8("byte"),Layout.cv(Layout.Jq(),-8),"bytes")]),chunkSize=Loader.chunkSize;let offset=0,array=data,transactions=[];for(;array.length>0;){const bytes=array.slice(0,chunkSize),data=node_modules_buffer.lW.alloc(chunkSize+16);dataLayout.encode({instruction:0,offset,bytes,bytesLength:0,bytesLengthPadding:0},data);const transaction=(new Transaction).add({keys:[{pubkey:program.publicKey,isSigner:!0,isWritable:!0}],programId,data});if(transactions.push(sendAndConfirmTransaction(connection,transaction,[payer,program],{commitment:"confirmed"})),connection._rpcEndpoint.includes("solana.com")){const REQUESTS_PER_SECOND=4;await sleep(1e3/REQUESTS_PER_SECOND)}offset+=chunkSize,array=array.slice(chunkSize)}await Promise.all(transactions);{const dataLayout=Layout.n_([Layout.Jq("instruction")]),data=node_modules_buffer.lW.alloc(dataLayout.span);dataLayout.encode({instruction:1},data);const transaction=(new Transaction).add({keys:[{pubkey:program.publicKey,isSigner:!0,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId,data});await sendAndConfirmTransaction(connection,transaction,[payer,program],{commitment:"confirmed"})}return!0}}Loader.chunkSize=932;new PublicKey("BPFLoader2111111111111111111111111111111111");const COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=Object.freeze({RequestUnits:{index:0,layout:Layout.n_([Layout.u8("instruction"),Layout.Jq("units"),Layout.Jq("additionalFee")])},RequestHeapFrame:{index:1,layout:Layout.n_([Layout.u8("instruction"),Layout.Jq("bytes")])},SetComputeUnitLimit:{index:2,layout:Layout.n_([Layout.u8("instruction"),Layout.Jq("units")])},SetComputeUnitPrice:{index:3,layout:Layout.n_([Layout.u8("instruction"),u64("microLamports")])}});class ComputeBudgetProgram{constructor(){}static requestUnits(params){const data=encodeData(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits,params);return new TransactionInstruction({keys:[],programId:this.programId,data})}static requestHeapFrame(params){const data=encodeData(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame,params);return new TransactionInstruction({keys:[],programId:this.programId,data})}static setComputeUnitLimit(params){const data=encodeData(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,params);return new TransactionInstruction({keys:[],programId:this.programId,data})}static setComputeUnitPrice(params){const data=encodeData(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,{microLamports:BigInt(params.microLamports)});return new TransactionInstruction({keys:[],programId:this.programId,data})}}ComputeBudgetProgram.programId=new PublicKey("ComputeBudget111111111111111111111111111111");var objToString=Object.prototype.toString,objKeys=Object.keys||function(obj){var keys=[];for(var name in obj)keys.push(name);return keys};function stringify(val,isArrayProp){var i,max,str,keys,key,propVal,toStr;if(!0===val)return"true";if(!1===val)return"false";switch(typeof val){case"object":if(null===val)return null;if(val.toJSON&&"function"==typeof val.toJSON)return stringify(val.toJSON(),isArrayProp);if("[object Array]"===(toStr=objToString.call(val))){for(str="[",max=val.length-1,i=0;i<max;i++)str+=stringify(val[i],!0)+",";return max>-1&&(str+=stringify(val[i],!0)),str+"]"}if("[object Object]"===toStr){for(max=(keys=objKeys(val).sort()).length,str="",i=0;i<max;)void 0!==(propVal=stringify(val[key=keys[i]],!1))&&(str&&(str+=","),str+=JSON.stringify(key)+":"+propVal),i++;return"{"+str+"}"}return JSON.stringify(val);case"function":case"undefined":return isArrayProp?null:void 0;case"string":return JSON.stringify(val);default:return isFinite(val)?val:null}}var fastStableStringify$1=function(val){var returnVal=stringify(val,!1);if(void 0!==returnVal)return""+returnVal};const URL=globalThis.URL;function trailingZeros(n){let trailingZeros=0;for(;n>1;)n/=2,trailingZeros++;return trailingZeros}class EpochSchedule{constructor(slotsPerEpoch,leaderScheduleSlotOffset,warmup,firstNormalEpoch,firstNormalSlot){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=slotsPerEpoch,this.leaderScheduleSlotOffset=leaderScheduleSlotOffset,this.warmup=warmup,this.firstNormalEpoch=firstNormalEpoch,this.firstNormalSlot=firstNormalSlot}getEpoch(slot){return this.getEpochAndSlotIndex(slot)[0]}getEpochAndSlotIndex(slot){if(slot<this.firstNormalSlot){const epoch=trailingZeros(function nextPowerOfTwo(n){return 0===n?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,1+(n|=n>>32))}(slot+32+1))-trailingZeros(32)-1;return[epoch,slot-(this.getSlotsInEpoch(epoch)-32)]}{const normalSlotIndex=slot-this.firstNormalSlot,normalEpochIndex=Math.floor(normalSlotIndex/this.slotsPerEpoch);return[this.firstNormalEpoch+normalEpochIndex,normalSlotIndex%this.slotsPerEpoch]}}getFirstSlotInEpoch(epoch){return epoch<=this.firstNormalEpoch?32*(Math.pow(2,epoch)-1):(epoch-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(epoch){return this.getFirstSlotInEpoch(epoch)+this.getSlotsInEpoch(epoch)-1}getSlotsInEpoch(epoch){return epoch<this.firstNormalEpoch?Math.pow(2,epoch+trailingZeros(32)):this.slotsPerEpoch}}class SendTransactionError extends Error{constructor(message,logs){super(message),this.logs=void 0,this.logs=logs}}class SolanaJSONRPCError extends Error{constructor({code,message,data},customMessage){super(null!=customMessage?`${customMessage}: ${message}`:message),this.code=void 0,this.data=void 0,this.code=code,this.data=data,this.name="SolanaJSONRPCError"}}var fetchImpl=globalThis.fetch;class TransactionExpiredBlockheightExceededError extends Error{constructor(signature){super(`Signature ${signature} has expired: block height exceeded.`),this.signature=void 0,this.signature=signature}}Object.defineProperty(TransactionExpiredBlockheightExceededError.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class TransactionExpiredTimeoutError extends Error{constructor(signature,timeoutSeconds){super(`Transaction was not confirmed in ${timeoutSeconds.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${signature} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=signature}}Object.defineProperty(TransactionExpiredTimeoutError.prototype,"name",{value:"TransactionExpiredTimeoutError"});const PublicKeyFromString=coerce(instance(PublicKey),string(),(value=>new PublicKey(value))),RawAccountDataResult=tuple([string(),literal("base64")]),BufferFromRawAccountData=coerce(instance(node_modules_buffer.lW),RawAccountDataResult,(value=>node_modules_buffer.lW.from(value[0],"base64")));function extractCommitmentFromConfig(commitmentOrConfig){let commitment,config;if("string"==typeof commitmentOrConfig)commitment=commitmentOrConfig;else if(commitmentOrConfig){const{commitment:specifiedCommitment,...specifiedConfig}=commitmentOrConfig;commitment=specifiedCommitment,config=specifiedConfig}return{commitment,config}}function createRpcResult(result){return union([type({jsonrpc:literal("2.0"),id:string(),result}),type({jsonrpc:literal("2.0"),id:string(),error:type({code:unknown(),message:string(),data:optional(index_es_define("any",(()=>!0)))})})])}const UnknownRpcResult=createRpcResult(unknown());function jsonRpcResult(schema){return coerce(createRpcResult(schema),UnknownRpcResult,(value=>"error"in value?value:{...value,result:create(value.result,schema)}))}function jsonRpcResultAndContext(value){return jsonRpcResult(type({context:type({slot:number()}),value}))}function notificationResultAndContext(value){return type({context:type({slot:number()}),value})}const GetInflationGovernorResult=type({foundation:number(),foundationTerm:number(),initial:number(),taper:number(),terminal:number()}),GetInflationRewardResult=jsonRpcResult(array(nullable(type({epoch:number(),effectiveSlot:number(),amount:number(),postBalance:number()})))),GetEpochInfoResult=type({epoch:number(),slotIndex:number(),slotsInEpoch:number(),absoluteSlot:number(),blockHeight:optional(number()),transactionCount:optional(number())}),GetEpochScheduleResult=type({slotsPerEpoch:number(),leaderScheduleSlotOffset:number(),warmup:index_es_boolean(),firstNormalEpoch:number(),firstNormalSlot:number()}),GetLeaderScheduleResult=record(string(),array(number())),TransactionErrorResult=nullable(union([type({}),string()])),SignatureStatusResult=type({err:TransactionErrorResult}),SignatureReceivedResult=literal("receivedSignature"),VersionResult=type({"solana-core":string(),"feature-set":optional(number())}),SimulatedTransactionResponseStruct=jsonRpcResultAndContext(type({err:nullable(union([type({}),string()])),logs:nullable(array(string())),accounts:optional(nullable(array(nullable(type({executable:index_es_boolean(),owner:string(),lamports:number(),data:array(string()),rentEpoch:optional(number())}))))),unitsConsumed:optional(number()),returnData:optional(nullable(type({programId:string(),data:tuple([string(),literal("base64")])})))})),BlockProductionResponseStruct=jsonRpcResultAndContext(type({byIdentity:record(string(),array(number())),range:type({firstSlot:number(),lastSlot:number()})}));const GetInflationGovernorRpcResult=jsonRpcResult(GetInflationGovernorResult),GetEpochInfoRpcResult=jsonRpcResult(GetEpochInfoResult),GetEpochScheduleRpcResult=jsonRpcResult(GetEpochScheduleResult),GetLeaderScheduleRpcResult=jsonRpcResult(GetLeaderScheduleResult),SlotRpcResult=jsonRpcResult(number()),GetSupplyRpcResult=jsonRpcResultAndContext(type({total:number(),circulating:number(),nonCirculating:number(),nonCirculatingAccounts:array(PublicKeyFromString)})),TokenAmountResult=type({amount:string(),uiAmount:nullable(number()),decimals:number(),uiAmountString:optional(string())}),GetTokenLargestAccountsResult=jsonRpcResultAndContext(array(type({address:PublicKeyFromString,amount:string(),uiAmount:nullable(number()),decimals:number(),uiAmountString:optional(string())}))),GetTokenAccountsByOwner=jsonRpcResultAndContext(array(type({pubkey:PublicKeyFromString,account:type({executable:index_es_boolean(),owner:PublicKeyFromString,lamports:number(),data:BufferFromRawAccountData,rentEpoch:number()})}))),ParsedAccountDataResult=type({program:string(),parsed:unknown(),space:number()}),GetParsedTokenAccountsByOwner=jsonRpcResultAndContext(array(type({pubkey:PublicKeyFromString,account:type({executable:index_es_boolean(),owner:PublicKeyFromString,lamports:number(),data:ParsedAccountDataResult,rentEpoch:number()})}))),GetLargestAccountsRpcResult=jsonRpcResultAndContext(array(type({lamports:number(),address:PublicKeyFromString}))),AccountInfoResult=type({executable:index_es_boolean(),owner:PublicKeyFromString,lamports:number(),data:BufferFromRawAccountData,rentEpoch:number()}),KeyedAccountInfoResult=type({pubkey:PublicKeyFromString,account:AccountInfoResult}),ParsedOrRawAccountData=coerce(union([instance(node_modules_buffer.lW),ParsedAccountDataResult]),union([RawAccountDataResult,ParsedAccountDataResult]),(value=>Array.isArray(value)?create(value,BufferFromRawAccountData):value)),ParsedAccountInfoResult=type({executable:index_es_boolean(),owner:PublicKeyFromString,lamports:number(),data:ParsedOrRawAccountData,rentEpoch:number()}),KeyedParsedAccountInfoResult=type({pubkey:PublicKeyFromString,account:ParsedAccountInfoResult}),StakeActivationResult=type({state:union([literal("active"),literal("inactive"),literal("activating"),literal("deactivating")]),active:number(),inactive:number()}),GetConfirmedSignaturesForAddress2RpcResult=jsonRpcResult(array(type({signature:string(),slot:number(),err:TransactionErrorResult,memo:nullable(string()),blockTime:optional(nullable(number()))}))),GetSignaturesForAddressRpcResult=jsonRpcResult(array(type({signature:string(),slot:number(),err:TransactionErrorResult,memo:nullable(string()),blockTime:optional(nullable(number()))}))),AccountNotificationResult=type({subscription:number(),result:notificationResultAndContext(AccountInfoResult)}),ProgramAccountInfoResult=type({pubkey:PublicKeyFromString,account:AccountInfoResult}),ProgramAccountNotificationResult=type({subscription:number(),result:notificationResultAndContext(ProgramAccountInfoResult)}),SlotInfoResult=type({parent:number(),slot:number(),root:number()}),SlotNotificationResult=type({subscription:number(),result:SlotInfoResult}),SlotUpdateResult=union([type({type:union([literal("firstShredReceived"),literal("completed"),literal("optimisticConfirmation"),literal("root")]),slot:number(),timestamp:number()}),type({type:literal("createdBank"),parent:number(),slot:number(),timestamp:number()}),type({type:literal("frozen"),slot:number(),timestamp:number(),stats:type({numTransactionEntries:number(),numSuccessfulTransactions:number(),numFailedTransactions:number(),maxTransactionsPerEntry:number()})}),type({type:literal("dead"),slot:number(),timestamp:number(),err:string()})]),SlotUpdateNotificationResult=type({subscription:number(),result:SlotUpdateResult}),SignatureNotificationResult=type({subscription:number(),result:notificationResultAndContext(union([SignatureStatusResult,SignatureReceivedResult]))}),RootNotificationResult=type({subscription:number(),result:number()}),ContactInfoResult=type({pubkey:string(),gossip:nullable(string()),tpu:nullable(string()),rpc:nullable(string()),version:nullable(string())}),VoteAccountInfoResult=type({votePubkey:string(),nodePubkey:string(),activatedStake:number(),epochVoteAccount:index_es_boolean(),epochCredits:array(tuple([number(),number(),number()])),commission:number(),lastVote:number(),rootSlot:nullable(number())}),GetVoteAccounts=jsonRpcResult(type({current:array(VoteAccountInfoResult),delinquent:array(VoteAccountInfoResult)})),ConfirmationStatus=union([literal("processed"),literal("confirmed"),literal("finalized")]),SignatureStatusResponse=type({slot:number(),confirmations:nullable(number()),err:TransactionErrorResult,confirmationStatus:optional(ConfirmationStatus)}),GetSignatureStatusesRpcResult=jsonRpcResultAndContext(array(nullable(SignatureStatusResponse))),GetMinimumBalanceForRentExemptionRpcResult=jsonRpcResult(number()),ConfirmedTransactionResult=type({signatures:array(string()),message:type({accountKeys:array(string()),header:type({numRequiredSignatures:number(),numReadonlySignedAccounts:number(),numReadonlyUnsignedAccounts:number()}),instructions:array(type({accounts:array(number()),data:string(),programIdIndex:number()})),recentBlockhash:string()})}),ParsedInstructionResult=type({parsed:unknown(),program:string(),programId:PublicKeyFromString}),RawInstructionResult=type({accounts:array(PublicKeyFromString),data:string(),programId:PublicKeyFromString}),ParsedOrRawInstruction=coerce(union([RawInstructionResult,ParsedInstructionResult]),union([type({parsed:unknown(),program:string(),programId:string()}),type({accounts:array(string()),data:string(),programId:string()})]),(value=>create(value,"accounts"in value?RawInstructionResult:ParsedInstructionResult))),ParsedConfirmedTransactionResult=type({signatures:array(string()),message:type({accountKeys:array(type({pubkey:PublicKeyFromString,signer:index_es_boolean(),writable:index_es_boolean()})),instructions:array(ParsedOrRawInstruction),recentBlockhash:string()})}),TokenBalanceResult=type({accountIndex:number(),mint:string(),owner:optional(string()),uiTokenAmount:TokenAmountResult}),ConfirmedTransactionMetaResult=type({err:TransactionErrorResult,fee:number(),innerInstructions:optional(nullable(array(type({index:number(),instructions:array(type({accounts:array(number()),data:string(),programIdIndex:number()}))})))),preBalances:array(number()),postBalances:array(number()),logMessages:optional(nullable(array(string()))),preTokenBalances:optional(nullable(array(TokenBalanceResult))),postTokenBalances:optional(nullable(array(TokenBalanceResult)))}),ParsedConfirmedTransactionMetaResult=type({err:TransactionErrorResult,fee:number(),innerInstructions:optional(nullable(array(type({index:number(),instructions:array(ParsedOrRawInstruction)})))),preBalances:array(number()),postBalances:array(number()),logMessages:optional(nullable(array(string()))),preTokenBalances:optional(nullable(array(TokenBalanceResult))),postTokenBalances:optional(nullable(array(TokenBalanceResult)))}),GetBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionResult,meta:nullable(ConfirmedTransactionMetaResult)})),rewards:optional(array(type({pubkey:string(),lamports:number(),postBalance:nullable(number()),rewardType:nullable(string())}))),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetConfirmedBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionResult,meta:nullable(ConfirmedTransactionMetaResult)})),rewards:optional(array(type({pubkey:string(),lamports:number(),postBalance:nullable(number()),rewardType:nullable(string())}))),blockTime:nullable(number())}))),GetBlockSignaturesRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),signatures:array(string()),blockTime:nullable(number())}))),GetTransactionRpcResult=jsonRpcResult(nullable(type({slot:number(),meta:ConfirmedTransactionMetaResult,blockTime:optional(nullable(number())),transaction:ConfirmedTransactionResult}))),GetParsedTransactionRpcResult=jsonRpcResult(nullable(type({slot:number(),transaction:ParsedConfirmedTransactionResult,meta:nullable(ParsedConfirmedTransactionMetaResult),blockTime:optional(nullable(number()))}))),GetRecentBlockhashAndContextRpcResult=jsonRpcResultAndContext(type({blockhash:string(),feeCalculator:type({lamportsPerSignature:number()})})),GetLatestBlockhashRpcResult=jsonRpcResultAndContext(type({blockhash:string(),lastValidBlockHeight:number()})),GetRecentPerformanceSamplesRpcResult=jsonRpcResult(array(type({slot:number(),numTransactions:number(),numSlots:number(),samplePeriodSecs:number()}))),GetFeeCalculatorRpcResult=jsonRpcResultAndContext(nullable(type({feeCalculator:type({lamportsPerSignature:number()})}))),RequestAirdropRpcResult=jsonRpcResult(string()),SendTransactionRpcResult=jsonRpcResult(string()),LogsResult=type({err:TransactionErrorResult,logs:array(string()),signature:string()}),LogsNotificationResult=type({result:notificationResultAndContext(LogsResult),subscription:number()}),COMMON_HTTP_HEADERS={"solana-client":"js/"+(null!=="0.0.0-development"?"0.0.0-development":"UNKNOWN")};class Connection{constructor(endpoint,commitmentOrConfig){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let url=new URL(endpoint);url.protocol;let wsEndpoint,httpHeaders,fetch,fetchMiddleware,disableRetryOnRateLimit;commitmentOrConfig&&"string"==typeof commitmentOrConfig?this._commitment=commitmentOrConfig:commitmentOrConfig&&(this._commitment=commitmentOrConfig.commitment,this._confirmTransactionInitialTimeout=commitmentOrConfig.confirmTransactionInitialTimeout,wsEndpoint=commitmentOrConfig.wsEndpoint,httpHeaders=commitmentOrConfig.httpHeaders,fetch=commitmentOrConfig.fetch,fetchMiddleware=commitmentOrConfig.fetchMiddleware,disableRetryOnRateLimit=commitmentOrConfig.disableRetryOnRateLimit),this._rpcEndpoint=endpoint,this._rpcWsEndpoint=wsEndpoint||function makeWebsocketUrl(endpoint){let url=new URL(endpoint);const useHttps="https:"===url.protocol;return url.protocol=useHttps?"wss:":"ws:",url.host="",""!==url.port&&(url.port=String(Number(url.port)+1)),url.toString()}(endpoint),this._rpcClient=function createRpcClient(url,useHttps,httpHeaders,customFetch,fetchMiddleware,disableRetryOnRateLimit){const fetch=customFetch||fetchImpl;let fetchWithMiddleware;return fetchMiddleware&&(fetchWithMiddleware=async(info,init)=>{const modifiedFetchArgs=await new Promise(((resolve,reject)=>{try{fetchMiddleware(info,init,((modifiedInfo,modifiedInit)=>resolve([modifiedInfo,modifiedInit])))}catch(error){reject(error)}}));return await fetch(...modifiedFetchArgs)}),new(browser_default())((async(request,callback)=>{const options={method:"POST",body:request,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},httpHeaders||{},COMMON_HTTP_HEADERS)};try{let res,too_many_requests_retries=5,waitTime=500;for(;res=fetchWithMiddleware?await fetchWithMiddleware(url,options):await fetch(url,options),429===res.status&&!0!==disableRetryOnRateLimit&&(too_many_requests_retries-=1,0!==too_many_requests_retries);)index_browser_esm_console.log(`Server responded with ${res.status} ${res.statusText}.  Retrying after ${waitTime}ms delay...`),await sleep(waitTime),waitTime*=2;const text=await res.text();res.ok?callback(null,text):callback(new Error(`${res.status} ${res.statusText}: ${text}`))}catch(err){err instanceof Error&&callback(err)}}),{})}(url.toString(),0,httpHeaders,fetch,fetchMiddleware,disableRetryOnRateLimit),this._rpcRequest=function createRpcRequest(client){return(method,args)=>new Promise(((resolve,reject)=>{client.request(method,args,((err,response)=>{err?reject(err):resolve(response)}))}))}(this._rpcClient),this._rpcBatchRequest=function createRpcBatchRequest(client){return requests=>new Promise(((resolve,reject)=>{0===requests.length&&resolve([]);const batch=requests.map((params=>client.request(params.methodName,params.args)));client.request(batch,((err,response)=>{err?reject(err):resolve(response)}))}))}(this._rpcClient),this._rpcWebSocket=new index_browser.K(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(publicKey,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),args=this._buildArgs([publicKey.toBase58()],commitment,void 0,config),res=create(await this._rpcRequest("getBalance",args),jsonRpcResultAndContext(number()));if("error"in res)throw new SolanaJSONRPCError(res.error,`failed to get balance for ${publicKey.toBase58()}`);return res.result}async getBalance(publicKey,commitmentOrConfig){return await this.getBalanceAndContext(publicKey,commitmentOrConfig).then((x=>x.value)).catch((e=>{throw new Error("failed to get balance of account "+publicKey.toBase58()+": "+e)}))}async getBlockTime(slot){const res=create(await this._rpcRequest("getBlockTime",[slot]),jsonRpcResult(nullable(number())));if("error"in res)throw new SolanaJSONRPCError(res.error,`failed to get block time for slot ${slot}`);return res.result}async getMinimumLedgerSlot(){const res=create(await this._rpcRequest("minimumLedgerSlot",[]),jsonRpcResult(number()));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get minimum ledger slot");return res.result}async getFirstAvailableBlock(){const res=create(await this._rpcRequest("getFirstAvailableBlock",[]),SlotRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get first available block");return res.result}async getSupply(config){let configArg={};configArg="string"==typeof config?{commitment:config}:config?{...config,commitment:config&&config.commitment||this.commitment}:{commitment:this.commitment};const res=create(await this._rpcRequest("getSupply",[configArg]),GetSupplyRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get supply");return res.result}async getTokenSupply(tokenMintAddress,commitment){const args=this._buildArgs([tokenMintAddress.toBase58()],commitment),res=create(await this._rpcRequest("getTokenSupply",args),jsonRpcResultAndContext(TokenAmountResult));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get token supply");return res.result}async getTokenAccountBalance(tokenAddress,commitment){const args=this._buildArgs([tokenAddress.toBase58()],commitment),res=create(await this._rpcRequest("getTokenAccountBalance",args),jsonRpcResultAndContext(TokenAmountResult));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get token account balance");return res.result}async getTokenAccountsByOwner(ownerAddress,filter,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);let _args=[ownerAddress.toBase58()];"mint"in filter?_args.push({mint:filter.mint.toBase58()}):_args.push({programId:filter.programId.toBase58()});const args=this._buildArgs(_args,commitment,"base64",config),res=create(await this._rpcRequest("getTokenAccountsByOwner",args),GetTokenAccountsByOwner);if("error"in res)throw new SolanaJSONRPCError(res.error,`failed to get token accounts owned by account ${ownerAddress.toBase58()}`);return res.result}async getParsedTokenAccountsByOwner(ownerAddress,filter,commitment){let _args=[ownerAddress.toBase58()];"mint"in filter?_args.push({mint:filter.mint.toBase58()}):_args.push({programId:filter.programId.toBase58()});const args=this._buildArgs(_args,commitment,"jsonParsed"),res=create(await this._rpcRequest("getTokenAccountsByOwner",args),GetParsedTokenAccountsByOwner);if("error"in res)throw new SolanaJSONRPCError(res.error,`failed to get token accounts owned by account ${ownerAddress.toBase58()}`);return res.result}async getLargestAccounts(config){const arg={...config,commitment:config&&config.commitment||this.commitment},args=arg.filter||arg.commitment?[arg]:[],res=create(await this._rpcRequest("getLargestAccounts",args),GetLargestAccountsRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get largest accounts");return res.result}async getTokenLargestAccounts(mintAddress,commitment){const args=this._buildArgs([mintAddress.toBase58()],commitment),res=create(await this._rpcRequest("getTokenLargestAccounts",args),GetTokenLargestAccountsResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get token largest accounts");return res.result}async getAccountInfoAndContext(publicKey,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),args=this._buildArgs([publicKey.toBase58()],commitment,"base64",config),res=create(await this._rpcRequest("getAccountInfo",args),jsonRpcResultAndContext(nullable(AccountInfoResult)));if("error"in res)throw new SolanaJSONRPCError(res.error,`failed to get info about account ${publicKey.toBase58()}`);return res.result}async getParsedAccountInfo(publicKey,commitment){const args=this._buildArgs([publicKey.toBase58()],commitment,"jsonParsed"),res=create(await this._rpcRequest("getAccountInfo",args),jsonRpcResultAndContext(nullable(ParsedAccountInfoResult)));if("error"in res)throw new SolanaJSONRPCError(res.error,`failed to get info about account ${publicKey.toBase58()}`);return res.result}async getAccountInfo(publicKey,commitmentOrConfig){try{return(await this.getAccountInfoAndContext(publicKey,commitmentOrConfig)).value}catch(e){throw new Error("failed to get info about account "+publicKey.toBase58()+": "+e)}}async getMultipleAccountsInfoAndContext(publicKeys,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),keys=publicKeys.map((key=>key.toBase58())),args=this._buildArgs([keys],commitment,"base64",config),res=create(await this._rpcRequest("getMultipleAccounts",args),jsonRpcResultAndContext(array(nullable(AccountInfoResult))));if("error"in res)throw new SolanaJSONRPCError(res.error,`failed to get info for accounts ${keys}`);return res.result}async getMultipleAccountsInfo(publicKeys,commitmentOrConfig){return(await this.getMultipleAccountsInfoAndContext(publicKeys,commitmentOrConfig)).value}async getStakeActivation(publicKey,commitmentOrConfig,epoch){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),args=this._buildArgs([publicKey.toBase58()],commitment,void 0,{...config,epoch:null!=epoch?epoch:null==config?void 0:config.epoch}),res=create(await this._rpcRequest("getStakeActivation",args),jsonRpcResult(StakeActivationResult));if("error"in res)throw new SolanaJSONRPCError(res.error,`failed to get Stake Activation ${publicKey.toBase58()}`);return res.result}async getProgramAccounts(programId,configOrCommitment){const{commitment,config}=extractCommitmentFromConfig(configOrCommitment),{encoding,...configWithoutEncoding}=config||{},args=this._buildArgs([programId.toBase58()],commitment,encoding||"base64",configWithoutEncoding),res=create(await this._rpcRequest("getProgramAccounts",args),jsonRpcResult(array(KeyedAccountInfoResult)));if("error"in res)throw new SolanaJSONRPCError(res.error,`failed to get accounts owned by program ${programId.toBase58()}`);return res.result}async getParsedProgramAccounts(programId,configOrCommitment){const{commitment,config}=extractCommitmentFromConfig(configOrCommitment),args=this._buildArgs([programId.toBase58()],commitment,"jsonParsed",config),res=create(await this._rpcRequest("getProgramAccounts",args),jsonRpcResult(array(KeyedParsedAccountInfoResult)));if("error"in res)throw new SolanaJSONRPCError(res.error,`failed to get accounts owned by program ${programId.toBase58()}`);return res.result}async confirmTransaction(strategy,commitment){let rawSignature,decodedSignature;if("string"==typeof strategy)rawSignature=strategy;else{rawSignature=strategy.signature}try{decodedSignature=bs58_default().decode(rawSignature)}catch(err){throw new Error("signature must be base58 encoded: "+rawSignature)}index_browser_esm_assert(64===decodedSignature.length,"signature has invalid length");const subscriptionCommitment=commitment||this.commitment;let timeoutId,subscriptionId,done=!1;const confirmationPromise=new Promise(((resolve,reject)=>{try{subscriptionId=this.onSignature(rawSignature,((result,context)=>{subscriptionId=void 0;const response={context,value:result};done=!0,resolve({__type:TransactionStatus.PROCESSED,response})}),subscriptionCommitment)}catch(err){reject(err)}})),expiryPromise=new Promise((resolve=>{if("string"==typeof strategy){let timeoutMs=this._confirmTransactionInitialTimeout||6e4;switch(subscriptionCommitment){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":timeoutMs=this._confirmTransactionInitialTimeout||3e4}timeoutId=setTimeout((()=>resolve({__type:TransactionStatus.TIMED_OUT,timeoutMs})),timeoutMs)}else{let config=strategy;const checkBlockHeight=async()=>{try{return await this.getBlockHeight(commitment)}catch(_e){return-1}};(async()=>{let currentBlockHeight=await checkBlockHeight();if(!done){for(;currentBlockHeight<=config.lastValidBlockHeight;){if(await sleep(1e3),done)return;if(currentBlockHeight=await checkBlockHeight(),done)return}resolve({__type:TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()}}));let result;try{const outcome=await Promise.race([confirmationPromise,expiryPromise]);switch(outcome.__type){case TransactionStatus.BLOCKHEIGHT_EXCEEDED:throw new TransactionExpiredBlockheightExceededError(rawSignature);case TransactionStatus.PROCESSED:result=outcome.response;break;case TransactionStatus.TIMED_OUT:throw new TransactionExpiredTimeoutError(rawSignature,outcome.timeoutMs/1e3)}}finally{clearTimeout(timeoutId),subscriptionId&&this.removeSignatureListener(subscriptionId)}return result}async getClusterNodes(){const res=create(await this._rpcRequest("getClusterNodes",[]),jsonRpcResult(array(ContactInfoResult)));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get cluster nodes");return res.result}async getVoteAccounts(commitment){const args=this._buildArgs([],commitment),res=create(await this._rpcRequest("getVoteAccounts",args),GetVoteAccounts);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get vote accounts");return res.result}async getSlot(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),args=this._buildArgs([],commitment,void 0,config),res=create(await this._rpcRequest("getSlot",args),jsonRpcResult(number()));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get slot");return res.result}async getSlotLeader(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),args=this._buildArgs([],commitment,void 0,config),res=create(await this._rpcRequest("getSlotLeader",args),jsonRpcResult(string()));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get slot leader");return res.result}async getSlotLeaders(startSlot,limit){const args=[startSlot,limit],res=create(await this._rpcRequest("getSlotLeaders",args),jsonRpcResult(array(PublicKeyFromString)));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get slot leaders");return res.result}async getSignatureStatus(signature,config){const{context,value:values}=await this.getSignatureStatuses([signature],config);index_browser_esm_assert(1===values.length);return{context,value:values[0]}}async getSignatureStatuses(signatures,config){const params=[signatures];config&&params.push(config);const res=create(await this._rpcRequest("getSignatureStatuses",params),GetSignatureStatusesRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get signature status");return res.result}async getTransactionCount(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),args=this._buildArgs([],commitment,void 0,config),res=create(await this._rpcRequest("getTransactionCount",args),jsonRpcResult(number()));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get transaction count");return res.result}async getTotalSupply(commitment){return(await this.getSupply({commitment,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(commitment){const args=this._buildArgs([],commitment),res=create(await this._rpcRequest("getInflationGovernor",args),GetInflationGovernorRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get inflation");return res.result}async getInflationReward(addresses,epoch,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),args=this._buildArgs([addresses.map((pubkey=>pubkey.toBase58()))],commitment,void 0,{...config,epoch:null!=epoch?epoch:null==config?void 0:config.epoch}),res=create(await this._rpcRequest("getInflationReward",args),GetInflationRewardResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get inflation reward");return res.result}async getEpochInfo(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),args=this._buildArgs([],commitment,void 0,config),res=create(await this._rpcRequest("getEpochInfo",args),GetEpochInfoRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get epoch info");return res.result}async getEpochSchedule(){const res=create(await this._rpcRequest("getEpochSchedule",[]),GetEpochScheduleRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get epoch schedule");const epochSchedule=res.result;return new EpochSchedule(epochSchedule.slotsPerEpoch,epochSchedule.leaderScheduleSlotOffset,epochSchedule.warmup,epochSchedule.firstNormalEpoch,epochSchedule.firstNormalSlot)}async getLeaderSchedule(){const res=create(await this._rpcRequest("getLeaderSchedule",[]),GetLeaderScheduleRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get leader schedule");return res.result}async getMinimumBalanceForRentExemption(dataLength,commitment){const args=this._buildArgs([dataLength],commitment),res=create(await this._rpcRequest("getMinimumBalanceForRentExemption",args),GetMinimumBalanceForRentExemptionRpcResult);return"error"in res?(index_browser_esm_console.warn("Unable to fetch minimum balance for rent exemption"),0):res.result}async getRecentBlockhashAndContext(commitment){const args=this._buildArgs([],commitment),res=create(await this._rpcRequest("getRecentBlockhash",args),GetRecentBlockhashAndContextRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get recent blockhash");return res.result}async getRecentPerformanceSamples(limit){const res=create(await this._rpcRequest("getRecentPerformanceSamples",limit?[limit]:[]),GetRecentPerformanceSamplesRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get recent performance samples");return res.result}async getFeeCalculatorForBlockhash(blockhash,commitment){const args=this._buildArgs([blockhash],commitment),res=create(await this._rpcRequest("getFeeCalculatorForBlockhash",args),GetFeeCalculatorRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get fee calculator");const{context,value}=res.result;return{context,value:null!==value?value.feeCalculator:null}}async getFeeForMessage(message,commitment){const wireMessage=message.serialize().toString("base64"),args=this._buildArgs([wireMessage],commitment),res=create(await this._rpcRequest("getFeeForMessage",args),jsonRpcResultAndContext(nullable(number())));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get slot");if(null===res.result)throw new Error("invalid blockhash");return res.result}async getRecentBlockhash(commitment){try{return(await this.getRecentBlockhashAndContext(commitment)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(commitmentOrConfig){try{return(await this.getLatestBlockhashAndContext(commitmentOrConfig)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),args=this._buildArgs([],commitment,void 0,config),res=create(await this._rpcRequest("getLatestBlockhash",args),GetLatestBlockhashRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get latest blockhash");return res.result}async getVersion(){const res=create(await this._rpcRequest("getVersion",[]),jsonRpcResult(VersionResult));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get version");return res.result}async getGenesisHash(){const res=create(await this._rpcRequest("getGenesisHash",[]),jsonRpcResult(string()));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get genesis hash");return res.result}async getBlock(slot,opts){const args=this._buildArgsAtLeastConfirmed([slot],opts&&opts.commitment),res=create(await this._rpcRequest("getBlock",args),GetBlockRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get confirmed block");const result=res.result;return result?{...result,transactions:result.transactions.map((({transaction,meta})=>{const message=new Message(transaction.message);return{meta,transaction:{...transaction,message}}}))}:result}async getBlockHeight(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig),args=this._buildArgs([],commitment,void 0,config),res=create(await this._rpcRequest("getBlockHeight",args),jsonRpcResult(number()));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get block height information");return res.result}async getBlockProduction(configOrCommitment){let extra,commitment;if("string"==typeof configOrCommitment)commitment=configOrCommitment;else if(configOrCommitment){const{commitment:c,...rest}=configOrCommitment;commitment=c,extra=rest}const args=this._buildArgs([],commitment,"base64",extra),res=create(await this._rpcRequest("getBlockProduction",args),BlockProductionResponseStruct);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get block production information");return res.result}async getTransaction(signature,opts){const args=this._buildArgsAtLeastConfirmed([signature],opts&&opts.commitment),res=create(await this._rpcRequest("getTransaction",args),GetTransactionRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get transaction");const result=res.result;return result?{...result,transaction:{...result.transaction,message:new Message(result.transaction.message)}}:result}async getParsedTransaction(signature,commitment){const args=this._buildArgsAtLeastConfirmed([signature],commitment,"jsonParsed"),res=create(await this._rpcRequest("getTransaction",args),GetParsedTransactionRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get transaction");return res.result}async getParsedTransactions(signatures,commitment){const batch=signatures.map((signature=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([signature],commitment,"jsonParsed")})));return(await this._rpcBatchRequest(batch)).map((unsafeRes=>{const res=create(unsafeRes,GetParsedTransactionRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get transactions");return res.result}))}async getTransactions(signatures,commitment){const batch=signatures.map((signature=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([signature],commitment)})));return(await this._rpcBatchRequest(batch)).map((unsafeRes=>{const res=create(unsafeRes,GetTransactionRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get transactions");const result=res.result;return result?{...result,transaction:{...result.transaction,message:new Message(result.transaction.message)}}:result}))}async getConfirmedBlock(slot,commitment){const args=this._buildArgsAtLeastConfirmed([slot],commitment),res=create(await this._rpcRequest("getConfirmedBlock",args),GetConfirmedBlockRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get confirmed block");const result=res.result;if(!result)throw new Error("Confirmed block "+slot+" not found");const block={...result,transactions:result.transactions.map((({transaction,meta})=>{const message=new Message(transaction.message);return{meta,transaction:{...transaction,message}}}))};return{...block,transactions:block.transactions.map((({transaction,meta})=>({meta,transaction:Transaction.populate(transaction.message,transaction.signatures)})))}}async getBlocks(startSlot,endSlot,commitment){const args=this._buildArgsAtLeastConfirmed(void 0!==endSlot?[startSlot,endSlot]:[startSlot],commitment),res=create(await this._rpcRequest("getBlocks",args),jsonRpcResult(array(number())));if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get blocks");return res.result}async getBlockSignatures(slot,commitment){const args=this._buildArgsAtLeastConfirmed([slot],commitment,void 0,{transactionDetails:"signatures",rewards:!1}),res=create(await this._rpcRequest("getBlock",args),GetBlockSignaturesRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get block");const result=res.result;if(!result)throw new Error("Block "+slot+" not found");return result}async getConfirmedBlockSignatures(slot,commitment){const args=this._buildArgsAtLeastConfirmed([slot],commitment,void 0,{transactionDetails:"signatures",rewards:!1}),res=create(await this._rpcRequest("getConfirmedBlock",args),GetBlockSignaturesRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get confirmed block");const result=res.result;if(!result)throw new Error("Confirmed block "+slot+" not found");return result}async getConfirmedTransaction(signature,commitment){const args=this._buildArgsAtLeastConfirmed([signature],commitment),res=create(await this._rpcRequest("getConfirmedTransaction",args),GetTransactionRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get transaction");const result=res.result;if(!result)return result;const message=new Message(result.transaction.message),signatures=result.transaction.signatures;return{...result,transaction:Transaction.populate(message,signatures)}}async getParsedConfirmedTransaction(signature,commitment){const args=this._buildArgsAtLeastConfirmed([signature],commitment,"jsonParsed"),res=create(await this._rpcRequest("getConfirmedTransaction",args),GetParsedTransactionRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get confirmed transaction");return res.result}async getParsedConfirmedTransactions(signatures,commitment){const batch=signatures.map((signature=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([signature],commitment,"jsonParsed")})));return(await this._rpcBatchRequest(batch)).map((unsafeRes=>{const res=create(unsafeRes,GetParsedTransactionRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get confirmed transactions");return res.result}))}async getConfirmedSignaturesForAddress(address,startSlot,endSlot){let options={},firstAvailableBlock=await this.getFirstAvailableBlock();for(;!("until"in options)&&!(--startSlot<=0||startSlot<firstAvailableBlock);)try{const block=await this.getConfirmedBlockSignatures(startSlot,"finalized");block.signatures.length>0&&(options.until=block.signatures[block.signatures.length-1].toString())}catch(err){if(err instanceof Error&&err.message.includes("skipped"))continue;throw err}let highestConfirmedRoot=await this.getSlot("finalized");for(;!("before"in options||++endSlot>highestConfirmedRoot);)try{const block=await this.getConfirmedBlockSignatures(endSlot);block.signatures.length>0&&(options.before=block.signatures[block.signatures.length-1].toString())}catch(err){if(err instanceof Error&&err.message.includes("skipped"))continue;throw err}return(await this.getConfirmedSignaturesForAddress2(address,options)).map((info=>info.signature))}async getConfirmedSignaturesForAddress2(address,options,commitment){const args=this._buildArgsAtLeastConfirmed([address.toBase58()],commitment,void 0,options),res=create(await this._rpcRequest("getConfirmedSignaturesForAddress2",args),GetConfirmedSignaturesForAddress2RpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get confirmed signatures for address");return res.result}async getSignaturesForAddress(address,options,commitment){const args=this._buildArgsAtLeastConfirmed([address.toBase58()],commitment,void 0,options),res=create(await this._rpcRequest("getSignaturesForAddress",args),GetSignaturesForAddressRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,"failed to get signatures for address");return res.result}async getNonceAndContext(nonceAccount,commitment){const{context,value:accountInfo}=await this.getAccountInfoAndContext(nonceAccount,commitment);let value=null;return null!==accountInfo&&(value=NonceAccount.fromAccountData(accountInfo.data)),{context,value}}async getNonce(nonceAccount,commitment){return await this.getNonceAndContext(nonceAccount,commitment).then((x=>x.value)).catch((e=>{throw new Error("failed to get nonce for account "+nonceAccount.toBase58()+": "+e)}))}async requestAirdrop(to,lamports){const res=create(await this._rpcRequest("requestAirdrop",[to.toBase58(),lamports]),RequestAirdropRpcResult);if("error"in res)throw new SolanaJSONRPCError(res.error,`airdrop to ${to.toBase58()} failed`);return res.result}async _blockhashWithExpiryBlockHeight(disableCache){if(!disableCache){for(;this._pollingBlockhash;)await sleep(100);const expired=Date.now()-this._blockhashInfo.lastFetch>=3e4;if(null!==this._blockhashInfo.latestBlockhash&&!expired)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const startTime=Date.now(),cachedLatestBlockhash=this._blockhashInfo.latestBlockhash,cachedBlockhash=cachedLatestBlockhash?cachedLatestBlockhash.blockhash:null;for(let i=0;i<50;i++){const latestBlockhash=await this.getLatestBlockhash("finalized");if(cachedBlockhash!==latestBlockhash.blockhash)return this._blockhashInfo={latestBlockhash,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},latestBlockhash;await sleep(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-startTime}ms`)}finally{this._pollingBlockhash=!1}}async simulateTransaction(transactionOrMessage,signers,includeAccounts){let transaction;if(transactionOrMessage instanceof Transaction){let originalTx=transactionOrMessage;transaction=new Transaction,transaction.feePayer=originalTx.feePayer,transaction.instructions=transactionOrMessage.instructions,transaction.nonceInfo=originalTx.nonceInfo,transaction.signatures=originalTx.signatures}else transaction=Transaction.populate(transactionOrMessage),transaction._message=transaction._json=void 0;if(transaction.nonceInfo&&signers)transaction.sign(...signers);else{let disableCache=this._disableBlockhashCaching;for(;;){const latestBlockhash=await this._blockhashWithExpiryBlockHeight(disableCache);if(transaction.lastValidBlockHeight=latestBlockhash.lastValidBlockHeight,transaction.recentBlockhash=latestBlockhash.blockhash,!signers)break;if(transaction.sign(...signers),!transaction.signature)throw new Error("!signature");const signature=transaction.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(signature)&&!this._blockhashInfo.transactionSignatures.includes(signature)){this._blockhashInfo.simulatedSignatures.push(signature);break}disableCache=!0}}const message=transaction._compile(),signData=message.serialize(),encodedTransaction=transaction._serialize(signData).toString("base64"),config={encoding:"base64",commitment:this.commitment};if(includeAccounts){const addresses=(Array.isArray(includeAccounts)?includeAccounts:message.nonProgramIds()).map((key=>key.toBase58()));config.accounts={encoding:"base64",addresses}}signers&&(config.sigVerify=!0);const args=[encodedTransaction,config],res=create(await this._rpcRequest("simulateTransaction",args),SimulatedTransactionResponseStruct);if("error"in res){let logs;if("data"in res.error&&(logs=res.error.data.logs,logs&&Array.isArray(logs))){const traceIndent="\n    ",logTrace=traceIndent+logs.join(traceIndent);index_browser_esm_console.error(res.error.message,logTrace)}throw new SendTransactionError("failed to simulate transaction: "+res.error.message,logs)}return res.result}async sendTransaction(transaction,signers,options){if(transaction.nonceInfo)transaction.sign(...signers);else{let disableCache=this._disableBlockhashCaching;for(;;){const latestBlockhash=await this._blockhashWithExpiryBlockHeight(disableCache);if(transaction.lastValidBlockHeight=latestBlockhash.lastValidBlockHeight,transaction.recentBlockhash=latestBlockhash.blockhash,transaction.sign(...signers),!transaction.signature)throw new Error("!signature");const signature=transaction.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(signature)){this._blockhashInfo.transactionSignatures.push(signature);break}disableCache=!0}}const wireTransaction=transaction.serialize();return await this.sendRawTransaction(wireTransaction,options)}async sendRawTransaction(rawTransaction,options){const encodedTransaction=toBuffer(rawTransaction).toString("base64");return await this.sendEncodedTransaction(encodedTransaction,options)}async sendEncodedTransaction(encodedTransaction,options){const config={encoding:"base64"},skipPreflight=options&&options.skipPreflight,preflightCommitment=options&&options.preflightCommitment||this.commitment;options&&null!=options.maxRetries&&(config.maxRetries=options.maxRetries),options&&null!=options.minContextSlot&&(config.minContextSlot=options.minContextSlot),skipPreflight&&(config.skipPreflight=skipPreflight),preflightCommitment&&(config.preflightCommitment=preflightCommitment);const args=[encodedTransaction,config],res=create(await this._rpcRequest("sendTransaction",args),SendTransactionRpcResult);if("error"in res){let logs;throw"data"in res.error&&(logs=res.error.data.logs),new SendTransactionError("failed to send transaction: "+res.error.message,logs)}return res.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{this._rpcWebSocket.notify("ping").catch((()=>{}))}),5e3),this._updateSubscriptions()}_wsOnError(err){this._rpcWebSocketConnected=!1,index_browser_esm_console.error("ws error:",err.message)}_wsOnClose(code){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration++,this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==code?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([hash,subscription])=>{this._subscriptionsByHash[hash]={...subscription,state:"pending"}}))):this._updateSubscriptions()}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(err){err instanceof Error&&index_browser_esm_console.log(`Error when closing socket connection: ${err.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const activeWebSocketGeneration=this._rpcWebSocketGeneration,isCurrentConnectionStillActive=()=>activeWebSocketGeneration===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async hash=>{const subscription=this._subscriptionsByHash[hash];if(void 0!==subscription)switch(subscription.state){case"pending":case"unsubscribed":if(0===subscription.callbacks.size)return delete this._subscriptionsByHash[hash],"unsubscribed"===subscription.state&&delete this._subscriptionCallbacksByServerSubscriptionId[subscription.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args,method}=subscription;try{this._subscriptionsByHash[hash]={...subscription,state:"subscribing"};const serverSubscriptionId=await this._rpcWebSocket.call(method,args);this._subscriptionsByHash[hash]={...subscription,serverSubscriptionId,state:"subscribed"},this._subscriptionCallbacksByServerSubscriptionId[serverSubscriptionId]=subscription.callbacks,await this._updateSubscriptions()}catch(e){if(e instanceof Error&&index_browser_esm_console.error(`${method} error for argument`,args,e.message),!isCurrentConnectionStillActive())return;this._subscriptionsByHash[hash]={...subscription,state:"pending"},await this._updateSubscriptions()}})();break;case"subscribed":0===subscription.callbacks.size&&await(async()=>{const{serverSubscriptionId,unsubscribeMethod}=subscription;if(this._subscriptionsAutoDisposedByRpc.has(serverSubscriptionId))this._subscriptionsAutoDisposedByRpc.delete(serverSubscriptionId);else{this._subscriptionsByHash[hash]={...subscription,state:"unsubscribing"};try{await this._rpcWebSocket.call(unsubscribeMethod,[serverSubscriptionId])}catch(e){if(e instanceof Error&&index_browser_esm_console.error(`${unsubscribeMethod} error:`,e.message),!isCurrentConnectionStillActive())return;return this._subscriptionsByHash[hash]={...subscription,state:"subscribed"},void await this._updateSubscriptions()}}this._subscriptionsByHash[hash]={...subscription,state:"unsubscribed"},await this._updateSubscriptions()})()}})))}_handleServerNotification(serverSubscriptionId,callbackArgs){const callbacks=this._subscriptionCallbacksByServerSubscriptionId[serverSubscriptionId];void 0!==callbacks&&callbacks.forEach((cb=>{try{cb(...callbackArgs)}catch(e){index_browser_esm_console.error(e)}}))}_wsOnAccountNotification(notification){const{result,subscription}=create(notification,AccountNotificationResult);this._handleServerNotification(subscription,[result.value,result.context])}_makeSubscription(subscriptionConfig,args){const clientSubscriptionId=this._nextClientSubscriptionId++,hash=fastStableStringify$1([subscriptionConfig.method,args],!0),existingSubscription=this._subscriptionsByHash[hash];return void 0===existingSubscription?this._subscriptionsByHash[hash]={...subscriptionConfig,args,callbacks:new Set([subscriptionConfig.callback]),state:"pending"}:existingSubscription.callbacks.add(subscriptionConfig.callback),this._subscriptionDisposeFunctionsByClientSubscriptionId[clientSubscriptionId]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[clientSubscriptionId];const subscription=this._subscriptionsByHash[hash];index_browser_esm_assert(void 0!==subscription,`Could not find a \`Subscription\` when tearing down client subscription #${clientSubscriptionId}`),subscription.callbacks.delete(subscriptionConfig.callback),await this._updateSubscriptions()},this._updateSubscriptions(),clientSubscriptionId}onAccountChange(publicKey,callback,commitment){const args=this._buildArgs([publicKey.toBase58()],commitment||this._commitment||"finalized","base64");return this._makeSubscription({callback,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},args)}async removeAccountChangeListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"account change")}_wsOnProgramAccountNotification(notification){const{result,subscription}=create(notification,ProgramAccountNotificationResult);this._handleServerNotification(subscription,[{accountId:result.value.pubkey,accountInfo:result.value.account},result.context])}onProgramAccountChange(programId,callback,commitment,filters){const args=this._buildArgs([programId.toBase58()],commitment||this._commitment||"finalized","base64",filters?{filters}:void 0);return this._makeSubscription({callback,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},args)}async removeProgramAccountChangeListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"program account change")}onLogs(filter,callback,commitment){const args=this._buildArgs(["object"==typeof filter?{mentions:[filter.toString()]}:filter],commitment||this._commitment||"finalized");return this._makeSubscription({callback,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},args)}async removeOnLogsListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"logs")}_wsOnLogsNotification(notification){const{result,subscription}=create(notification,LogsNotificationResult);this._handleServerNotification(subscription,[result.value,result.context])}_wsOnSlotNotification(notification){const{result,subscription}=create(notification,SlotNotificationResult);this._handleServerNotification(subscription,[result])}onSlotChange(callback){return this._makeSubscription({callback,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"slot change")}_wsOnSlotUpdatesNotification(notification){const{result,subscription}=create(notification,SlotUpdateNotificationResult);this._handleServerNotification(subscription,[result])}onSlotUpdate(callback){return this._makeSubscription({callback,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"slot update")}async _unsubscribeClientSubscription(clientSubscriptionId,subscriptionName){const dispose=this._subscriptionDisposeFunctionsByClientSubscriptionId[clientSubscriptionId];dispose?await dispose():index_browser_esm_console.warn(`Ignored unsubscribe request because an active subscription with id \`${clientSubscriptionId}\` for '${subscriptionName}' events could not be found.`)}_buildArgs(args,override,encoding,extra){const commitment=override||this._commitment;if(commitment||encoding||extra){let options={};encoding&&(options.encoding=encoding),commitment&&(options.commitment=commitment),extra&&(options=Object.assign(options,extra)),args.push(options)}return args}_buildArgsAtLeastConfirmed(args,override,encoding,extra){const commitment=override||this._commitment;if(commitment&&!["confirmed","finalized"].includes(commitment))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(args,override,encoding,extra)}_wsOnSignatureNotification(notification){const{result,subscription}=create(notification,SignatureNotificationResult);"receivedSignature"!==result.value&&this._subscriptionsAutoDisposedByRpc.add(subscription),this._handleServerNotification(subscription,"receivedSignature"===result.value?[{type:"received"},result.context]:[{type:"status",result:result.value},result.context])}onSignature(signature,callback,commitment){const args=this._buildArgs([signature],commitment||this._commitment||"finalized"),clientSubscriptionId=this._makeSubscription({callback:(notification,context)=>{if("status"===notification.type){callback(notification.result,context);try{this.removeSignatureListener(clientSubscriptionId)}catch(_err){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},args);return clientSubscriptionId}onSignatureWithOptions(signature,callback,options){const{commitment,...extra}={...options,commitment:options&&options.commitment||this._commitment||"finalized"},args=this._buildArgs([signature],commitment,void 0,extra),clientSubscriptionId=this._makeSubscription({callback:(notification,context)=>{callback(notification,context);try{this.removeSignatureListener(clientSubscriptionId)}catch(_err){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},args);return clientSubscriptionId}async removeSignatureListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"signature result")}_wsOnRootNotification(notification){const{result,subscription}=create(notification,RootNotificationResult);this._handleServerNotification(subscription,[result])}onRootChange(callback){return this._makeSubscription({callback,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"root change")}}class Keypair{constructor(keypair){this._keypair=void 0,this._keypair=keypair||nacl_fast_default().sign.keyPair()}static generate(){return new Keypair(nacl_fast_default().sign.keyPair())}static fromSecretKey(secretKey,options){const keypair=nacl_fast_default().sign.keyPair.fromSecretKey(secretKey);if(!options||!options.skipValidation){const signData=(new TextEncoder).encode("@solana/web3.js-validation-v1"),signature=nacl_fast_default().sign.detached(signData,keypair.secretKey);if(!nacl_fast_default().sign.detached.verify(signData,signature,keypair.publicKey))throw new Error("provided secretKey is invalid")}return new Keypair(keypair)}static fromSeed(seed){return new Keypair(nacl_fast_default().sign.keyPair.fromSeed(seed))}get publicKey(){return new PublicKey(this._keypair.publicKey)}get secretKey(){return this._keypair.secretKey}}const ED25519_INSTRUCTION_LAYOUT=Layout.n_([Layout.u8("numSignatures"),Layout.u8("padding"),Layout.KB("signatureOffset"),Layout.KB("signatureInstructionIndex"),Layout.KB("publicKeyOffset"),Layout.KB("publicKeyInstructionIndex"),Layout.KB("messageDataOffset"),Layout.KB("messageDataSize"),Layout.KB("messageInstructionIndex")]);class Ed25519Program{constructor(){}static createInstructionWithPublicKey(params){const{publicKey,message,signature,instructionIndex}=params;index_browser_esm_assert(32===publicKey.length,`Public Key must be 32 bytes but received ${publicKey.length} bytes`),index_browser_esm_assert(64===signature.length,`Signature must be 64 bytes but received ${signature.length} bytes`);const publicKeyOffset=ED25519_INSTRUCTION_LAYOUT.span,signatureOffset=publicKeyOffset+publicKey.length,messageDataOffset=signatureOffset+signature.length,instructionData=node_modules_buffer.lW.alloc(messageDataOffset+message.length),index=null==instructionIndex?65535:instructionIndex;return ED25519_INSTRUCTION_LAYOUT.encode({numSignatures:1,padding:0,signatureOffset,signatureInstructionIndex:index,publicKeyOffset,publicKeyInstructionIndex:index,messageDataOffset,messageDataSize:message.length,messageInstructionIndex:index},instructionData),instructionData.fill(publicKey,publicKeyOffset),instructionData.fill(signature,signatureOffset),instructionData.fill(message,messageDataOffset),new TransactionInstruction({keys:[],programId:Ed25519Program.programId,data:instructionData})}static createInstructionWithPrivateKey(params){const{privateKey,message,instructionIndex}=params;index_browser_esm_assert(64===privateKey.length,`Private key must be 64 bytes but received ${privateKey.length} bytes`);try{const keypair=Keypair.fromSecretKey(privateKey),publicKey=keypair.publicKey.toBytes(),signature=nacl_fast_default().sign.detached(message,keypair.secretKey);return this.createInstructionWithPublicKey({publicKey,message,signature,instructionIndex})}catch(error){throw new Error(`Error creating instruction; ${error}`)}}}Ed25519Program.programId=new PublicKey("Ed25519SigVerify111111111111111111111111111");const STAKE_CONFIG_ID=new PublicKey("StakeConfig11111111111111111111111111111111");class Lockup{constructor(unixTimestamp,epoch,custodian){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=unixTimestamp,this.epoch=epoch,this.custodian=custodian}}Lockup.default=new Lockup(0,0,PublicKey.default);const STAKE_INSTRUCTION_LAYOUTS=Object.freeze({Initialize:{index:0,layout:Layout.n_([Layout.Jq("instruction"),((property="authorized")=>Layout.n_([publicKey("staker"),publicKey("withdrawer")],property))(),((property="lockup")=>Layout.n_([Layout.gM("unixTimestamp"),Layout.gM("epoch"),publicKey("custodian")],property))()])},Authorize:{index:1,layout:Layout.n_([Layout.Jq("instruction"),publicKey("newAuthorized"),Layout.Jq("stakeAuthorizationType")])},Delegate:{index:2,layout:Layout.n_([Layout.Jq("instruction")])},Split:{index:3,layout:Layout.n_([Layout.Jq("instruction"),Layout.gM("lamports")])},Withdraw:{index:4,layout:Layout.n_([Layout.Jq("instruction"),Layout.gM("lamports")])},Deactivate:{index:5,layout:Layout.n_([Layout.Jq("instruction")])},Merge:{index:7,layout:Layout.n_([Layout.Jq("instruction")])},AuthorizeWithSeed:{index:8,layout:Layout.n_([Layout.Jq("instruction"),publicKey("newAuthorized"),Layout.Jq("stakeAuthorizationType"),rustString("authoritySeed"),publicKey("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class StakeProgram{constructor(){}static initialize(params){const{stakePubkey,authorized,lockup:maybeLockup}=params,lockup=maybeLockup||Lockup.default,data=encodeData(STAKE_INSTRUCTION_LAYOUTS.Initialize,{authorized:{staker:toBuffer(authorized.staker.toBuffer()),withdrawer:toBuffer(authorized.withdrawer.toBuffer())},lockup:{unixTimestamp:lockup.unixTimestamp,epoch:lockup.epoch,custodian:toBuffer(lockup.custodian.toBuffer())}}),instructionData={keys:[{pubkey:stakePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data};return new TransactionInstruction(instructionData)}static createAccountWithSeed(params){const transaction=new Transaction;transaction.add(SystemProgram.createAccountWithSeed({fromPubkey:params.fromPubkey,newAccountPubkey:params.stakePubkey,basePubkey:params.basePubkey,seed:params.seed,lamports:params.lamports,space:this.space,programId:this.programId}));const{stakePubkey,authorized,lockup}=params;return transaction.add(this.initialize({stakePubkey,authorized,lockup}))}static createAccount(params){const transaction=new Transaction;transaction.add(SystemProgram.createAccount({fromPubkey:params.fromPubkey,newAccountPubkey:params.stakePubkey,lamports:params.lamports,space:this.space,programId:this.programId}));const{stakePubkey,authorized,lockup}=params;return transaction.add(this.initialize({stakePubkey,authorized,lockup}))}static delegate(params){const{stakePubkey,authorizedPubkey,votePubkey}=params,data=encodeData(STAKE_INSTRUCTION_LAYOUTS.Delegate);return(new Transaction).add({keys:[{pubkey:stakePubkey,isSigner:!1,isWritable:!0},{pubkey:votePubkey,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:STAKE_CONFIG_ID,isSigner:!1,isWritable:!1},{pubkey:authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data})}static authorize(params){const{stakePubkey,authorizedPubkey,newAuthorizedPubkey,stakeAuthorizationType,custodianPubkey}=params,data=encodeData(STAKE_INSTRUCTION_LAYOUTS.Authorize,{newAuthorized:toBuffer(newAuthorizedPubkey.toBuffer()),stakeAuthorizationType:stakeAuthorizationType.index}),keys=[{pubkey:stakePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!0},{pubkey:authorizedPubkey,isSigner:!0,isWritable:!1}];return custodianPubkey&&keys.push({pubkey:custodianPubkey,isSigner:!1,isWritable:!1}),(new Transaction).add({keys,programId:this.programId,data})}static authorizeWithSeed(params){const{stakePubkey,authorityBase,authoritySeed,authorityOwner,newAuthorizedPubkey,stakeAuthorizationType,custodianPubkey}=params,data=encodeData(STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,{newAuthorized:toBuffer(newAuthorizedPubkey.toBuffer()),stakeAuthorizationType:stakeAuthorizationType.index,authoritySeed,authorityOwner:toBuffer(authorityOwner.toBuffer())}),keys=[{pubkey:stakePubkey,isSigner:!1,isWritable:!0},{pubkey:authorityBase,isSigner:!0,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}];return custodianPubkey&&keys.push({pubkey:custodianPubkey,isSigner:!1,isWritable:!1}),(new Transaction).add({keys,programId:this.programId,data})}static splitInstruction(params){const{stakePubkey,authorizedPubkey,splitStakePubkey,lamports}=params,data=encodeData(STAKE_INSTRUCTION_LAYOUTS.Split,{lamports});return new TransactionInstruction({keys:[{pubkey:stakePubkey,isSigner:!1,isWritable:!0},{pubkey:splitStakePubkey,isSigner:!1,isWritable:!0},{pubkey:authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data})}static split(params){const transaction=new Transaction;return transaction.add(SystemProgram.createAccount({fromPubkey:params.authorizedPubkey,newAccountPubkey:params.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),transaction.add(this.splitInstruction(params))}static splitWithSeed(params){const{stakePubkey,authorizedPubkey,splitStakePubkey,basePubkey,seed,lamports}=params,transaction=new Transaction;return transaction.add(SystemProgram.allocate({accountPubkey:splitStakePubkey,basePubkey,seed,space:this.space,programId:this.programId})),transaction.add(this.splitInstruction({stakePubkey,authorizedPubkey,splitStakePubkey,lamports}))}static merge(params){const{stakePubkey,sourceStakePubKey,authorizedPubkey}=params,data=encodeData(STAKE_INSTRUCTION_LAYOUTS.Merge);return(new Transaction).add({keys:[{pubkey:stakePubkey,isSigner:!1,isWritable:!0},{pubkey:sourceStakePubKey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data})}static withdraw(params){const{stakePubkey,authorizedPubkey,toPubkey,lamports,custodianPubkey}=params,data=encodeData(STAKE_INSTRUCTION_LAYOUTS.Withdraw,{lamports}),keys=[{pubkey:stakePubkey,isSigner:!1,isWritable:!0},{pubkey:toPubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:authorizedPubkey,isSigner:!0,isWritable:!1}];return custodianPubkey&&keys.push({pubkey:custodianPubkey,isSigner:!1,isWritable:!1}),(new Transaction).add({keys,programId:this.programId,data})}static deactivate(params){const{stakePubkey,authorizedPubkey}=params,data=encodeData(STAKE_INSTRUCTION_LAYOUTS.Deactivate);return(new Transaction).add({keys:[{pubkey:stakePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data})}}StakeProgram.programId=new PublicKey("Stake11111111111111111111111111111111111111"),StakeProgram.space=200;const{publicKeyCreate,ecdsaSign}=elliptic_default(),SECP256K1_INSTRUCTION_LAYOUT=Layout.n_([Layout.u8("numSignatures"),Layout.KB("signatureOffset"),Layout.u8("signatureInstructionIndex"),Layout.KB("ethAddressOffset"),Layout.u8("ethAddressInstructionIndex"),Layout.KB("messageDataOffset"),Layout.KB("messageDataSize"),Layout.u8("messageInstructionIndex"),Layout.Ik(20,"ethAddress"),Layout.Ik(64,"signature"),Layout.u8("recoveryId")]);class Secp256k1Program{constructor(){}static publicKeyToEthAddress(publicKey){index_browser_esm_assert(64===publicKey.length,`Public key must be 64 bytes but received ${publicKey.length} bytes`);try{return node_modules_buffer.lW.from(sha3_default().keccak_256.update(toBuffer(publicKey)).digest()).slice(-20)}catch(error){throw new Error(`Error constructing Ethereum address: ${error}`)}}static createInstructionWithPublicKey(params){const{publicKey,message,signature,recoveryId,instructionIndex}=params;return Secp256k1Program.createInstructionWithEthAddress({ethAddress:Secp256k1Program.publicKeyToEthAddress(publicKey),message,signature,recoveryId,instructionIndex})}static createInstructionWithEthAddress(params){const{ethAddress:rawAddress,message,signature,recoveryId,instructionIndex=0}=params;let ethAddress;ethAddress="string"==typeof rawAddress?rawAddress.startsWith("0x")?node_modules_buffer.lW.from(rawAddress.substr(2),"hex"):node_modules_buffer.lW.from(rawAddress,"hex"):rawAddress,index_browser_esm_assert(20===ethAddress.length,`Address must be 20 bytes but received ${ethAddress.length} bytes`);const signatureOffset=12+ethAddress.length,messageDataOffset=signatureOffset+signature.length+1,instructionData=node_modules_buffer.lW.alloc(SECP256K1_INSTRUCTION_LAYOUT.span+message.length);return SECP256K1_INSTRUCTION_LAYOUT.encode({numSignatures:1,signatureOffset,signatureInstructionIndex:instructionIndex,ethAddressOffset:12,ethAddressInstructionIndex:instructionIndex,messageDataOffset,messageDataSize:message.length,messageInstructionIndex:instructionIndex,signature:toBuffer(signature),ethAddress:toBuffer(ethAddress),recoveryId},instructionData),instructionData.fill(toBuffer(message),SECP256K1_INSTRUCTION_LAYOUT.span),new TransactionInstruction({keys:[],programId:Secp256k1Program.programId,data:instructionData})}static createInstructionWithPrivateKey(params){const{privateKey:pkey,message,instructionIndex}=params;index_browser_esm_assert(32===pkey.length,`Private key must be 32 bytes but received ${pkey.length} bytes`);try{const privateKey=toBuffer(pkey),publicKey=publicKeyCreate(privateKey,!1).slice(1),messageHash=node_modules_buffer.lW.from(sha3_default().keccak_256.update(toBuffer(message)).digest()),{signature,recid:recoveryId}=ecdsaSign(messageHash,privateKey);return this.createInstructionWithPublicKey({publicKey,message,signature,recoveryId,instructionIndex})}catch(error){throw new Error(`Error creating instruction; ${error}`)}}}Secp256k1Program.programId=new PublicKey("KeccakSecp256k11111111111111111111111111111");new PublicKey("Va1idator1nfo111111111111111111111111111111"),type({name:string(),website:optional(string()),details:optional(string()),keybaseUsername:optional(string())});new PublicKey("Vote111111111111111111111111111111111111111"),Layout.n_([publicKey("nodePubkey"),publicKey("authorizedWithdrawer"),Layout.u8("commission"),Layout._O(),Layout.A9(Layout.n_([Layout._O("slot"),Layout.Jq("confirmationCount")]),Layout.cv(Layout.Jq(),-8),"votes"),Layout.u8("rootSlotValid"),Layout._O("rootSlot"),Layout._O(),Layout.A9(Layout.n_([Layout._O("epoch"),publicKey("authorizedVoter")]),Layout.cv(Layout.Jq(),-8),"authorizedVoters"),Layout.n_([Layout.A9(Layout.n_([publicKey("authorizedPubkey"),Layout._O("epochOfLastAuthorizedSwitch"),Layout._O("targetEpoch")]),32,"buf"),Layout._O("idx"),Layout.u8("isEmpty")],"priorVoters"),Layout._O(),Layout.A9(Layout.n_([Layout._O("epoch"),Layout._O("credits"),Layout._O("prevCredits")]),Layout.cv(Layout.Jq(),-8),"epochCredits"),Layout.n_([Layout._O("slot"),Layout._O("timestamp")],"lastTimestamp")]);const VOTE_INSTRUCTION_LAYOUTS=Object.freeze({InitializeAccount:{index:0,layout:Layout.n_([Layout.Jq("instruction"),((property="voteInit")=>Layout.n_([publicKey("nodePubkey"),publicKey("authorizedVoter"),publicKey("authorizedWithdrawer"),Layout.u8("commission")],property))()])},Authorize:{index:1,layout:Layout.n_([Layout.Jq("instruction"),publicKey("newAuthorized"),Layout.Jq("voteAuthorizationType")])},Withdraw:{index:3,layout:Layout.n_([Layout.Jq("instruction"),Layout.gM("lamports")])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class VoteProgram{constructor(){}static initializeAccount(params){const{votePubkey,nodePubkey,voteInit}=params,data=encodeData(VOTE_INSTRUCTION_LAYOUTS.InitializeAccount,{voteInit:{nodePubkey:toBuffer(voteInit.nodePubkey.toBuffer()),authorizedVoter:toBuffer(voteInit.authorizedVoter.toBuffer()),authorizedWithdrawer:toBuffer(voteInit.authorizedWithdrawer.toBuffer()),commission:voteInit.commission}}),instructionData={keys:[{pubkey:votePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:nodePubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data};return new TransactionInstruction(instructionData)}static createAccount(params){const transaction=new Transaction;return transaction.add(SystemProgram.createAccount({fromPubkey:params.fromPubkey,newAccountPubkey:params.votePubkey,lamports:params.lamports,space:this.space,programId:this.programId})),transaction.add(this.initializeAccount({votePubkey:params.votePubkey,nodePubkey:params.voteInit.nodePubkey,voteInit:params.voteInit}))}static authorize(params){const{votePubkey,authorizedPubkey,newAuthorizedPubkey,voteAuthorizationType}=params,data=encodeData(VOTE_INSTRUCTION_LAYOUTS.Authorize,{newAuthorized:toBuffer(newAuthorizedPubkey.toBuffer()),voteAuthorizationType:voteAuthorizationType.index}),keys=[{pubkey:votePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:authorizedPubkey,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys,programId:this.programId,data})}static withdraw(params){const{votePubkey,authorizedWithdrawerPubkey,lamports,toPubkey}=params,data=encodeData(VOTE_INSTRUCTION_LAYOUTS.Withdraw,{lamports}),keys=[{pubkey:votePubkey,isSigner:!1,isWritable:!0},{pubkey:toPubkey,isSigner:!1,isWritable:!0},{pubkey:authorizedWithdrawerPubkey,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys,programId:this.programId,data})}}VoteProgram.programId=new PublicKey("Vote111111111111111111111111111111111111111"),VoteProgram.space=3731},"./node_modules/.pnpm/@web3auth+solana-provider@1.1.1_6q6l43ixbnrc7bgejtmqcq6qmi/node_modules/@web3auth/solana-provider/dist/solanaProvider.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PhantomInjectedProvider:()=>PhantomInjectedProvider,SlopeInjectedProxyProvider:()=>SlopeInjectedProxyProvider,SolanaPrivateKeyProvider:()=>SolanaPrivateKeyProvider,SolanaWallet:()=>SolanaWallet,SolflareInjectedProvider:()=>SolflareInjectedProvider,SolletInjectedProvider:()=>SolletInjectedProvider,TorusInjectedProvider:()=>TorusInjectedProvider});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@toruslabs+base-controllers@2.2.1_@babel+runtime@7.18.3/node_modules/@toruslabs/base-controllers/dist/baseControllers.esm.js"),_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@toruslabs+openlogin-jrpc@2.1.0_@babel+runtime@7.18.3/node_modules/@toruslabs/openlogin-jrpc/dist/openloginJrpc.esm.js"),_web3auth_base__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@web3auth+base@1.1.1_@babel+runtime@7.18.3/node_modules/@web3auth/base/dist/base.esm.js"),_web3auth_base_provider__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@web3auth+base-provider@1.1.1_@babel+runtime@7.18.3/node_modules/@web3auth/base-provider/dist/baseProvider.esm.js"),bs58__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/bs58@4.0.1/node_modules/bs58/index.js"),bs58__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(bs58__WEBPACK_IMPORTED_MODULE_4__),eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/eth-rpc-errors@4.0.3/node_modules/eth-rpc-errors/dist/index.js"),_solana_web3_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/@solana+web3.js@1.47.4_react-native@0.69.1/node_modules/@solana/web3.js/lib/index.browser.esm.js"),_toruslabs_tweetnacl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/.pnpm/@toruslabs+tweetnacl-js@1.0.3/node_modules/@toruslabs/tweetnacl-js/nacl-fast.js"),_toruslabs_tweetnacl_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_toruslabs_tweetnacl_js__WEBPACK_IMPORTED_MODULE_7__),Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;function createChainIdMiddleware(chainId){return(req,res,next,end)=>"solana_chainId"===req.method?(res.result=chainId,end()):next()}function createProviderConfigMiddleware(providerConfig){return(req,res,next,end)=>"solana_provider_config"===req.method?(res.result=providerConfig,end()):next()}function createConfigMiddleware(providerConfig){const{chainId}=providerConfig;return(0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.UZ)([createChainIdMiddleware(chainId),createProviderConfigMiddleware(providerConfig)])}function createGetAccountsMiddleware(_ref){let{getAccounts}=_ref;return(0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.Pk)((async(request,response,next)=>{const{method}=request;if("getAccounts"!==method)return next();if(!getAccounts)throw new Error("WalletMiddleware - opts.getAccounts not provided");const accounts=await getAccounts(request);response.result=accounts}))}function createRequestAccountsMiddleware(_ref2){let{requestAccounts}=_ref2;return(0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.Pk)((async(request,response,next)=>{const{method}=request;if("requestAccounts"!==method)return next();if(!requestAccounts)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const accounts=await requestAccounts(request);response.result=accounts}))}function createGenericJRPCMiddleware(targetMethod,handler){return(0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.Pk)((async(request,response,next)=>{const{method}=request;if(method!==targetMethod)return next();if(!handler)throw new Error("WalletMiddleware - ".concat(targetMethod," not provided"));const result=await handler(request);response.result=result}))}function createSolanaMiddleware(providerHandlers){const{getAccounts,requestAccounts,signTransaction,signAndSendTransaction,signAllTransactions,signMessage,getPrivateKey,getSecretKey}=providerHandlers;return(0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.UZ)([createRequestAccountsMiddleware({requestAccounts}),createGetAccountsMiddleware({getAccounts}),createGenericJRPCMiddleware("signTransaction",signTransaction),createGenericJRPCMiddleware("signAndSendTransaction",signAndSendTransaction),createGenericJRPCMiddleware("signAllTransactions",signAllTransactions),createGenericJRPCMiddleware("signMessage",signMessage),createGenericJRPCMiddleware("solanaPrivateKey",getPrivateKey),createGenericJRPCMiddleware("solanaSecretKey",getSecretKey)])}function ownKeys$3(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread$3(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys$3(Object(source),!0).forEach((function(key){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$3(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}class BaseInjectedProvider extends _web3auth_base_provider__WEBPACK_IMPORTED_MODULE_3__.Zk{constructor(_ref){let{config,state}=_ref;super({config:{chainConfig:_objectSpread$3(_objectSpread$3({},config.chainConfig),{},{chainNamespace:_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.EN.SOLANA})},state})}async switchChain(_){return Promise.resolve()}async setupProvider(injectedProvider){const engine=new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.eI,solanaMiddleware=createSolanaMiddleware(this.getProviderHandlers(injectedProvider));engine.push(solanaMiddleware);const configMiddleware=createConfigMiddleware(this.config.chainConfig);engine.push(configMiddleware);const injectedProviderProxy=this.getInjectedProviderProxy(injectedProvider);injectedProviderProxy&&engine.push(injectedProviderProxy);const provider=(0,_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_0__.Xj)(engine);this.updateProviderEngineProxy(provider),await this.lookupNetwork()}async lookupNetwork(){const{chainConfig}=this.config;return this.update({chainId:chainConfig.chainId}),chainConfig.chainId||""}getInjectedProviderProxy(_){}}const getBaseProviderHandlers=injectedProvider=>({requestAccounts:async()=>injectedProvider.publicKey?[bs58__WEBPACK_IMPORTED_MODULE_4___default().encode(injectedProvider.publicKey.toBytes())]:[],getAccounts:async()=>injectedProvider.publicKey?[bs58__WEBPACK_IMPORTED_MODULE_4___default().encode(injectedProvider.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.methodNotSupported()},signTransaction:async req=>await injectedProvider.signTransaction(req.params.message),signMessage:async req=>await injectedProvider.signMessage(req.params.message),signAllTransactions:async req=>{var _req$params,_req$params2;if(null===(_req$params=req.params)||void 0===_req$params||!_req$params.message||null===(_req$params2=req.params)||void 0===_req$params2||!_req$params2.message.length)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("message");return await injectedProvider.signAllTransactions(req.params.message)},signAndSendTransaction:async req=>({signature:(await injectedProvider.signAndSendTransaction(req.params.message)).signature})});function ownKeys$2(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function createInjectedProviderProxyMiddleware(provider){return(0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.Pk)((async(req,res,_next)=>{const result=await provider.request(function _objectSpread$2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys$2(Object(source),!0).forEach((function(key){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$2(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},req));res.result=result}))}class PhantomInjectedProvider extends BaseInjectedProvider{getProviderHandlers(injectedProvider){return getBaseProviderHandlers(injectedProvider)}getInjectedProviderProxy(injectedProvider){return createInjectedProviderProxyMiddleware(injectedProvider)}}class SlopeInjectedProxyProvider extends BaseInjectedProvider{getProviderHandlers(injectedProvider){return((injectedProvider,getProviderEngineProxy)=>({requestAccounts:async()=>{const{data}=await injectedProvider.connect();return[data.publicKey]},getAccounts:async()=>{const{data}=await injectedProvider.connect();return[data.publicKey]},getPrivateKey:async()=>{throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.methodNotSupported()},signTransaction:async req=>{const txMessage=req.params.message;if(!txMessage)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data}=await injectedProvider.signTransaction(bs58__WEBPACK_IMPORTED_MODULE_4___default().encode(txMessage.serializeMessage()));if(!data.publicKey||!data.signature)throw new Error("Invalid signature from slope wallet");const publicKey=new _solana_web3_js__WEBPACK_IMPORTED_MODULE_6__.nh(data.publicKey),signature=bs58__WEBPACK_IMPORTED_MODULE_4___default().decode(data.signature);return txMessage.addSignature(publicKey,signature),txMessage},signMessage:async req=>{const response=await injectedProvider.signMessage(req.params.message);return bs58__WEBPACK_IMPORTED_MODULE_4___default().decode(response.data.signature)},signAndSendTransaction:async req=>{const provider=getProviderEngineProxy();if(!provider)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const txMessage=req.params.message;if(!txMessage)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data}=await injectedProvider.signTransaction(bs58__WEBPACK_IMPORTED_MODULE_4___default().encode(txMessage.serializeMessage()));if(!data.publicKey||!data.signature)throw new Error("Invalid signature from slope wallet");const publicKey=new _solana_web3_js__WEBPACK_IMPORTED_MODULE_6__.nh(data.publicKey),signature=bs58__WEBPACK_IMPORTED_MODULE_4___default().decode(data.signature);txMessage.addSignature(publicKey,signature);const chainConfig=await provider.request({method:"solana_provider_config",params:[]}),conn=new _solana_web3_js__WEBPACK_IMPORTED_MODULE_6__.ew(chainConfig.rpcTarget);return{signature:await conn.sendRawTransaction(txMessage.serialize())}},signAllTransactions:async req=>{var _req$params,_req$params2,_data$signatures;if(null===(_req$params=req.params)||void 0===_req$params||!_req$params.message||null===(_req$params2=req.params)||void 0===_req$params2||!_req$params2.message.length)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("message");const allTxns=req.params.message,{length}=allTxns,unsignedTx=[];for(let i=0;i<length;i++)unsignedTx.push(bs58__WEBPACK_IMPORTED_MODULE_4___default().encode(req.params.message[i].serializeMessage()));const{msg,data}=await injectedProvider.signAllTransactions(unsignedTx);if(!data.publicKey||(null===(_data$signatures=data.signatures)||void 0===_data$signatures?void 0:_data$signatures.length)!==length)throw new Error(msg);const publicKey=new _solana_web3_js__WEBPACK_IMPORTED_MODULE_6__.nh(data.publicKey);for(let i=0;i<length;i++){const signature=bs58__WEBPACK_IMPORTED_MODULE_4___default().decode(data.signatures[i]);allTxns[i].addSignature(publicKey,signature)}return allTxns}}))(injectedProvider,this.getProviderEngineProxy.bind(this))}}class SolflareInjectedProvider extends BaseInjectedProvider{getProviderHandlers(injectedProvider){return((injectedProvider,getProviderEngineProxy)=>{const solflareProviderHandlers=getBaseProviderHandlers(injectedProvider);return solflareProviderHandlers.signAndSendTransaction=async req=>{const provider=getProviderEngineProxy();if(!provider)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const transaction=await injectedProvider.signTransaction(req.params.message),chainConfig=await provider.request({method:"solana_provider_config",params:[]}),conn=new _solana_web3_js__WEBPACK_IMPORTED_MODULE_6__.ew(chainConfig.rpcTarget);return{signature:await conn.sendRawTransaction(transaction.serialize())}},solflareProviderHandlers})(injectedProvider,this.getProviderEngineProxy.bind(this))}}class SolletInjectedProvider extends BaseInjectedProvider{getProviderHandlers(injectedProvider){return((injectedProvider,getProviderEngineProxy)=>{const providerHandlers=getBaseProviderHandlers(injectedProvider);return providerHandlers.signMessage=async req=>{const{signature}=await injectedProvider.sign(req.params.message,"utf8");return signature},providerHandlers.signAndSendTransaction=async req=>{const provider=getProviderEngineProxy();if(!provider)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const transaction=await injectedProvider.signTransaction(req.params.message),chainConfig=await provider.request({method:"solana_provider_config",params:[]}),conn=new _solana_web3_js__WEBPACK_IMPORTED_MODULE_6__.ew(chainConfig.rpcTarget);return{signature:await conn.sendRawTransaction(transaction.serialize())}},providerHandlers})(injectedProvider,this.getProviderEngineProxy.bind(this))}}function ownKeys$1(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread$1(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys$1(Object(source),!0).forEach((function(key){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$1(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}class TorusInjectedProvider extends _web3auth_base_provider__WEBPACK_IMPORTED_MODULE_3__.Zk{constructor(_ref){let{config,state}=_ref;super({config:{chainConfig:_objectSpread$1(_objectSpread$1({},config.chainConfig),{},{chainNamespace:_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.EN.SOLANA})},state})}async switchChain(_){return Promise.resolve()}async setupProvider(injectedProvider){this.handleInjectedProviderUpdate(injectedProvider),await this.setupEngine(injectedProvider)}async lookupNetwork(){if(!this.provider)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});const{chainId}=this.config.chainConfig,connectedChainId=await this.provider.request({method:"solana_chainId"}),connectedHexChainId=(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.H2)(connectedChainId.toString())?connectedChainId:"0x".concat(parseInt(connectedChainId,10).toString(16));if(chainId!==connectedHexChainId)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.Ty.rpcConnectionError("Invalid network, net_version is: ".concat(connectedHexChainId,", expected: ").concat(chainId));return this.update({chainId:connectedHexChainId}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),this.state.chainId}async setupEngine(injectedProvider){const providerHandlers=(injectedProvider=>({requestAccounts:async()=>await injectedProvider.request({method:"solana_requestAccounts",params:{}}),getAccounts:async()=>await injectedProvider.request({method:"solana_accounts",params:{}}),getPrivateKey:async()=>{throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.methodNotSupported()},signMessage:async req=>{var _req$params;if(null===(_req$params=req.params)||void 0===_req$params||!_req$params.message)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("message");return await injectedProvider.signMessage(req.params.message)},signTransaction:async req=>{var _req$params2;if(null===(_req$params2=req.params)||void 0===_req$params2||!_req$params2.message)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("message");const txMessage=req.params.message;return await injectedProvider.signTransaction(txMessage)},signAndSendTransaction:async req=>{var _req$params3;if(null===(_req$params3=req.params)||void 0===_req$params3||!_req$params3.message)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("message");const txMessage=req.params.message;return{signature:await injectedProvider.sendTransaction(txMessage)}},signAllTransactions:async req=>{var _req$params4,_req$params5;if(null===(_req$params4=req.params)||void 0===_req$params4||!_req$params4.message||null===(_req$params5=req.params)||void 0===_req$params5||!_req$params5.message.length)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("message");const transactions=req.params.message;return await injectedProvider.signAllTransactions(transactions)}}))(injectedProvider),solanaMiddleware=createSolanaMiddleware(providerHandlers),injectedProviderProxy=createInjectedProviderProxyMiddleware(injectedProvider),engine=new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.eI;engine.push(solanaMiddleware),engine.push(injectedProviderProxy);const provider=(0,_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_0__.Xj)(engine);this.updateProviderEngineProxy(provider),await this.lookupNetwork()}async handleInjectedProviderUpdate(injectedProvider){injectedProvider.on("accountsChanged",(async accounts=>{this.provider.emit("accountsChanged",accounts)})),injectedProvider.on("chainChanged",(async chainId=>{const connectedHexChainId=(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.H2)(chainId)?chainId:"0x".concat(parseInt(chainId,10).toString(16));this.configure({chainConfig:_objectSpread$1(_objectSpread$1({},this.config.chainConfig),{},{chainId:connectedHexChainId})}),await this.setupProvider(injectedProvider)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}class SolanaPrivateKeyProvider extends _web3auth_base_provider__WEBPACK_IMPORTED_MODULE_3__.Zk{constructor(_ref){let{config,state}=_ref;super({config:{chainConfig:_objectSpread(_objectSpread({},config.chainConfig),{},{chainNamespace:_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.EN.SOLANA})},state})}async enable(){if(!this.state.privateKey)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(privKey){const providerHandlers=await async function getProviderHandlers(_ref){let{privKey,getProviderEngineProxy}=_ref;if("string"!=typeof privKey)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.Ty.invalidParams("privKey must be a string");const keyPair=_solana_web3_js__WEBPACK_IMPORTED_MODULE_6__.RG.fromSecretKey(Buffer.from(privKey,"hex"));return{requestAccounts:async()=>[keyPair.publicKey.toBase58()],getAccounts:async()=>[keyPair.publicKey.toBase58()],getPrivateKey:async()=>privKey,getSecretKey:async()=>bs58__WEBPACK_IMPORTED_MODULE_4___default().encode(keyPair.secretKey),signTransaction:async req=>{var _req$params;if(null===(_req$params=req.params)||void 0===_req$params||!_req$params.message)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("message");const transaction=req.params.message;return transaction.partialSign(keyPair),transaction},signMessage:async req=>{var _req$params2;if(null===(_req$params2=req.params)||void 0===_req$params2||!_req$params2.message)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("message");return _toruslabs_tweetnacl_js__WEBPACK_IMPORTED_MODULE_7___default().sign.detached(req.params.message,keyPair.secretKey)},signAndSendTransaction:async req=>{var _req$params3;if(null===(_req$params3=req.params)||void 0===_req$params3||!_req$params3.message)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("message");const _providerEngineProxy=getProviderEngineProxy();if(!_providerEngineProxy)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const transaction=req.params.message;return transaction.sign(keyPair),{signature:await _providerEngineProxy.request({method:"sendTransaction",params:[bs58__WEBPACK_IMPORTED_MODULE_4___default().encode(transaction.serialize())]})}},signAllTransactions:async req=>{var _req$params4,_req$params5,_req$params6;if(null===(_req$params4=req.params)||void 0===_req$params4||!_req$params4.message||null===(_req$params5=req.params)||void 0===_req$params5||!_req$params5.message.length)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("message");const txns=null===(_req$params6=req.params)||void 0===_req$params6?void 0:_req$params6.message;for(const tx of txns||[])tx.partialSign(keyPair);return txns}}}({privKey,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),solanaMiddleware=createSolanaMiddleware(providerHandlers),engine=new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.eI,{networkMiddleware}=function createJsonRpcClient(providerConfig){const{rpcTarget}=providerConfig,fetchMiddleware=(0,_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_0__.v$)({rpcTarget});return{networkMiddleware:(0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.UZ)([createConfigMiddleware(providerConfig),fetchMiddleware]),fetchMiddleware}}(this.config.chainConfig);engine.push(this.getChainSwitchMiddleware()),engine.push(this.getAccountMiddleware()),engine.push(solanaMiddleware),engine.push(networkMiddleware);const provider=(0,_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_0__.Xj)(engine);this.updateProviderEngineProxy(provider),await this.lookupNetwork()}async updateAccount(params){if(!this._providerEngineProxy)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==params.privateKey&&(await this.setupProvider(params.privateKey),this._providerEngineProxy.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"requestAccounts"})}))}async switchChain(params){if(!this._providerEngineProxy)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const chainConfig=this.getChainConfig(params.chainId);this.update({chainId:"loading"}),this.configure({chainConfig});const privKey=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(privKey)}async lookupNetwork(){if(!this._providerEngineProxy)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const health=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig}=this.config;if("ok"!==health)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.Ty.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(chainConfig.rpcTarget));return this.update({chainId:chainConfig.chainId}),this.state.chainId!==chainConfig.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return function createChainSwitchMiddleware(_ref3){let{addNewChainConfig,switchSolanaChain}=_ref3;return(0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.UZ)([createGenericJRPCMiddleware("addSolanaChain",addNewChainConfig),createGenericJRPCMiddleware("switchSolanaChain",switchSolanaChain)])}({addNewChainConfig:async req=>{if(!req.params)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("Missing request params");const{chainId,chainName,rpcUrls,blockExplorerUrls,nativeCurrency}=req.params;if(!chainId)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("Missing chainId in chainParams");if(!rpcUrls||0===rpcUrls.length)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");if(!nativeCurrency)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.EN.SOLANA,chainId,ticker:(null==nativeCurrency?void 0:nativeCurrency.symbol)||"SOL",tickerName:(null==nativeCurrency?void 0:nativeCurrency.name)||"Solana",displayName:chainName,rpcTarget:rpcUrls[0],blockExplorer:(null==blockExplorerUrls?void 0:blockExplorerUrls[0])||""})},switchSolanaChain:async req=>{if(!req.params)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("Missing request params");if(!req.params.chainId)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("Missing chainId");await this.switchChain(req.params)}})}getAccountMiddleware(){return function createAccountMiddleware(_ref4){let{updatePrivatekey}=_ref4;return(0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__.UZ)([createGenericJRPCMiddleware("updateAccount",updatePrivatekey)])}({updatePrivatekey:async req=>{if(!req.params)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("Missing request params");if(!req.params.privateKey)throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_5__.ethErrors.rpc.invalidParams("Missing privateKey");const{privateKey}=req.params;await this.updateAccount({privateKey})}})}}(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__.Z)(SolanaPrivateKeyProvider,"getProviderInstance",(async params=>{const providerFactory=new SolanaPrivateKeyProvider({config:{chainConfig:params.chainConfig}});return await providerFactory.setupProvider(params.privKey),providerFactory}));class SolanaWallet{constructor(provider){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__.Z)(this,"provider",void 0),this.provider=provider}async requestAccounts(){return await this.provider.request({method:"requestAccounts",params:{}})}async signAndSendTransaction(transaction){const{signature}=await this.provider.request({method:"signAndSendTransaction",params:{message:transaction}});return{signature}}async signTransaction(transaction){return await this.provider.request({method:"signTransaction",params:{message:transaction}})}async signAllTransactions(transactions){return await this.provider.request({method:"signAllTransactions",params:{message:transactions}})}async signMessage(data){return await this.provider.request({method:"signMessage",params:{message:data}})}async request(args){return await this.provider.request(args)}}},"./node_modules/.pnpm/base-x@3.0.9/node_modules/base-x/src/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js").Buffer;module.exports=function base(ALPHABET){if(ALPHABET.length>=255)throw new TypeError("Alphabet too long");for(var BASE_MAP=new Uint8Array(256),j=0;j<BASE_MAP.length;j++)BASE_MAP[j]=255;for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i),xc=x.charCodeAt(0);if(255!==BASE_MAP[xc])throw new TypeError(x+" is ambiguous");BASE_MAP[xc]=i}var BASE=ALPHABET.length,LEADER=ALPHABET.charAt(0),FACTOR=Math.log(BASE)/Math.log(256),iFACTOR=Math.log(256)/Math.log(BASE);function decodeUnsafe(source){if("string"!=typeof source)throw new TypeError("Expected String");if(0===source.length)return _Buffer.alloc(0);for(var psz=0,zeroes=0,length=0;source[psz]===LEADER;)zeroes++,psz++;for(var size=(source.length-psz)*FACTOR+1>>>0,b256=new Uint8Array(size);source[psz];){var carry=BASE_MAP[source.charCodeAt(psz)];if(255===carry)return;for(var i=0,it3=size-1;(0!==carry||i<length)&&-1!==it3;it3--,i++)carry+=BASE*b256[it3]>>>0,b256[it3]=carry%256>>>0,carry=carry/256>>>0;if(0!==carry)throw new Error("Non-zero carry");length=i,psz++}for(var it4=size-length;it4!==size&&0===b256[it4];)it4++;var vch=_Buffer.allocUnsafe(zeroes+(size-it4));vch.fill(0,0,zeroes);for(var j=zeroes;it4!==size;)vch[j++]=b256[it4++];return vch}return{encode:function encode(source){if((Array.isArray(source)||source instanceof Uint8Array)&&(source=_Buffer.from(source)),!_Buffer.isBuffer(source))throw new TypeError("Expected Buffer");if(0===source.length)return"";for(var zeroes=0,length=0,pbegin=0,pend=source.length;pbegin!==pend&&0===source[pbegin];)pbegin++,zeroes++;for(var size=(pend-pbegin)*iFACTOR+1>>>0,b58=new Uint8Array(size);pbegin!==pend;){for(var carry=source[pbegin],i=0,it1=size-1;(0!==carry||i<length)&&-1!==it1;it1--,i++)carry+=256*b58[it1]>>>0,b58[it1]=carry%BASE>>>0,carry=carry/BASE>>>0;if(0!==carry)throw new Error("Non-zero carry");length=i,pbegin++}for(var it2=size-length;it2!==size&&0===b58[it2];)it2++;for(var str=LEADER.repeat(zeroes);it2<size;++it2)str+=ALPHABET.charAt(b58[it2]);return str},decodeUnsafe,decode:function decode(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw new Error("Non-base"+BASE+" character")}}}},"./node_modules/.pnpm/bigint-buffer@1.1.5/node_modules/bigint-buffer/dist/browser.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;exports.oU=function toBigIntLE(buf){{const reversed=Buffer.from(buf);reversed.reverse();const hex=reversed.toString("hex");return 0===hex.length?BigInt(0):BigInt(`0x${hex}`)}},exports.k$=function toBufferLE(num,width){{const hex=num.toString(16),buffer=Buffer.from(hex.padStart(2*width,"0").slice(0,2*width),"hex");return buffer.reverse(),buffer}}},"./node_modules/.pnpm/borsh@0.7.0/node_modules/borsh/lib/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,__createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserializeUnchecked=exports.deserialize=exports.serialize=exports.BinaryReader=exports.BinaryWriter=exports.BorshError=exports.baseDecode=exports.baseEncode=void 0;const bn_js_1=__importDefault(__webpack_require__("./node_modules/.pnpm/bn.js@5.2.1/node_modules/bn.js/lib/bn.js")),bs58_1=__importDefault(__webpack_require__("./node_modules/.pnpm/bs58@4.0.1/node_modules/bs58/index.js")),encoding=__importStar(__webpack_require__("./node_modules/.pnpm/text-encoding-utf-8@1.0.2/node_modules/text-encoding-utf-8/lib/encoding.lib.mjs")),textDecoder=new("function"!=typeof TextDecoder?encoding.TextDecoder:TextDecoder)("utf-8",{fatal:!0});exports.baseEncode=function baseEncode(value){return"string"==typeof value&&(value=Buffer.from(value,"utf8")),bs58_1.default.encode(Buffer.from(value))},exports.baseDecode=function baseDecode(value){return Buffer.from(bs58_1.default.decode(value))};class BorshError extends Error{constructor(message){super(message),this.fieldPath=[],this.originalMessage=message}addToFieldPath(fieldName){this.fieldPath.splice(0,0,fieldName),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}exports.BorshError=BorshError;class BinaryWriter{constructor(){this.buf=Buffer.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(1024)]))}writeU8(value){this.maybeResize(),this.buf.writeUInt8(value,this.length),this.length+=1}writeU16(value){this.maybeResize(),this.buf.writeUInt16LE(value,this.length),this.length+=2}writeU32(value){this.maybeResize(),this.buf.writeUInt32LE(value,this.length),this.length+=4}writeU64(value){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray("le",8)))}writeU128(value){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray("le",16)))}writeU256(value){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray("le",32)))}writeU512(value){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray("le",64)))}writeBuffer(buffer){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),buffer,Buffer.alloc(1024)]),this.length+=buffer.length}writeString(str){this.maybeResize();const b=Buffer.from(str,"utf8");this.writeU32(b.length),this.writeBuffer(b)}writeFixedArray(array){this.writeBuffer(Buffer.from(array))}writeArray(array,fn){this.maybeResize(),this.writeU32(array.length);for(const elem of array)this.maybeResize(),fn(elem)}toArray(){return this.buf.subarray(0,this.length)}}function handlingRangeError(target,propertyKey,propertyDescriptor){const originalMethod=propertyDescriptor.value;propertyDescriptor.value=function(...args){try{return originalMethod.apply(this,args)}catch(e){if(e instanceof RangeError){const code=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(code)>=0)throw new BorshError("Reached the end of buffer when deserializing")}throw e}}}exports.BinaryWriter=BinaryWriter;class BinaryReader{constructor(buf){this.buf=buf,this.offset=0}readU8(){const value=this.buf.readUInt8(this.offset);return this.offset+=1,value}readU16(){const value=this.buf.readUInt16LE(this.offset);return this.offset+=2,value}readU32(){const value=this.buf.readUInt32LE(this.offset);return this.offset+=4,value}readU64(){const buf=this.readBuffer(8);return new bn_js_1.default(buf,"le")}readU128(){const buf=this.readBuffer(16);return new bn_js_1.default(buf,"le")}readU256(){const buf=this.readBuffer(32);return new bn_js_1.default(buf,"le")}readU512(){const buf=this.readBuffer(64);return new bn_js_1.default(buf,"le")}readBuffer(len){if(this.offset+len>this.buf.length)throw new BorshError(`Expected buffer length ${len} isn't within bounds`);const result=this.buf.slice(this.offset,this.offset+len);return this.offset+=len,result}readString(){const len=this.readU32(),buf=this.readBuffer(len);try{return textDecoder.decode(buf)}catch(e){throw new BorshError(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(len){return new Uint8Array(this.readBuffer(len))}readArray(fn){const len=this.readU32(),result=Array();for(let i=0;i<len;++i)result.push(fn());return result}}function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}function serializeField(schema,fieldName,value,fieldType,writer){try{if("string"==typeof fieldType)writer[`write${capitalizeFirstLetter(fieldType)}`](value);else if(fieldType instanceof Array)if("number"==typeof fieldType[0]){if(value.length!==fieldType[0])throw new BorshError(`Expecting byte array of length ${fieldType[0]}, but got ${value.length} bytes`);writer.writeFixedArray(value)}else if(2===fieldType.length&&"number"==typeof fieldType[1]){if(value.length!==fieldType[1])throw new BorshError(`Expecting byte array of length ${fieldType[1]}, but got ${value.length} bytes`);for(let i=0;i<fieldType[1];i++)serializeField(schema,null,value[i],fieldType[0],writer)}else writer.writeArray(value,(item=>{serializeField(schema,fieldName,item,fieldType[0],writer)}));else if(void 0!==fieldType.kind)switch(fieldType.kind){case"option":null==value?writer.writeU8(0):(writer.writeU8(1),serializeField(schema,fieldName,value,fieldType.type,writer));break;case"map":writer.writeU32(value.size),value.forEach(((val,key)=>{serializeField(schema,fieldName,key,fieldType.key,writer),serializeField(schema,fieldName,val,fieldType.value,writer)}));break;default:throw new BorshError(`FieldType ${fieldType} unrecognized`)}else serializeStruct(schema,value,writer)}catch(error){throw error instanceof BorshError&&error.addToFieldPath(fieldName),error}}function serializeStruct(schema,obj,writer){if("function"==typeof obj.borshSerialize)return void obj.borshSerialize(writer);const structSchema=schema.get(obj.constructor);if(!structSchema)throw new BorshError(`Class ${obj.constructor.name} is missing in schema`);if("struct"===structSchema.kind)structSchema.fields.map((([fieldName,fieldType])=>{serializeField(schema,fieldName,obj[fieldName],fieldType,writer)}));else{if("enum"!==structSchema.kind)throw new BorshError(`Unexpected schema kind: ${structSchema.kind} for ${obj.constructor.name}`);{const name=obj[structSchema.field];for(let idx=0;idx<structSchema.values.length;++idx){const[fieldName,fieldType]=structSchema.values[idx];if(fieldName===name){writer.writeU8(idx),serializeField(schema,fieldName,obj[fieldName],fieldType,writer);break}}}}}function deserializeField(schema,fieldName,fieldType,reader){try{if("string"==typeof fieldType)return reader[`read${capitalizeFirstLetter(fieldType)}`]();if(fieldType instanceof Array){if("number"==typeof fieldType[0])return reader.readFixedArray(fieldType[0]);if("number"==typeof fieldType[1]){const arr=[];for(let i=0;i<fieldType[1];i++)arr.push(deserializeField(schema,null,fieldType[0],reader));return arr}return reader.readArray((()=>deserializeField(schema,fieldName,fieldType[0],reader)))}if("option"===fieldType.kind){return reader.readU8()?deserializeField(schema,fieldName,fieldType.type,reader):void 0}if("map"===fieldType.kind){let map=new Map;const length=reader.readU32();for(let i=0;i<length;i++){const key=deserializeField(schema,fieldName,fieldType.key,reader),val=deserializeField(schema,fieldName,fieldType.value,reader);map.set(key,val)}return map}return deserializeStruct(schema,fieldType,reader)}catch(error){throw error instanceof BorshError&&error.addToFieldPath(fieldName),error}}function deserializeStruct(schema,classType,reader){if("function"==typeof classType.borshDeserialize)return classType.borshDeserialize(reader);const structSchema=schema.get(classType);if(!structSchema)throw new BorshError(`Class ${classType.name} is missing in schema`);if("struct"===structSchema.kind){const result={};for(const[fieldName,fieldType]of schema.get(classType).fields)result[fieldName]=deserializeField(schema,fieldName,fieldType,reader);return new classType(result)}if("enum"===structSchema.kind){const idx=reader.readU8();if(idx>=structSchema.values.length)throw new BorshError(`Enum index: ${idx} is out of range`);const[fieldName,fieldType]=structSchema.values[idx];return new classType({[fieldName]:deserializeField(schema,fieldName,fieldType,reader)})}throw new BorshError(`Unexpected schema kind: ${structSchema.kind} for ${classType.constructor.name}`)}__decorate([handlingRangeError],BinaryReader.prototype,"readU8",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU16",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU32",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU64",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU128",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU256",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU512",null),__decorate([handlingRangeError],BinaryReader.prototype,"readString",null),__decorate([handlingRangeError],BinaryReader.prototype,"readFixedArray",null),__decorate([handlingRangeError],BinaryReader.prototype,"readArray",null),exports.BinaryReader=BinaryReader,exports.serialize=function serialize(schema,obj,Writer=BinaryWriter){const writer=new Writer;return serializeStruct(schema,obj,writer),writer.toArray()},exports.deserialize=function deserialize(schema,classType,buffer,Reader=BinaryReader){const reader=new Reader(buffer),result=deserializeStruct(schema,classType,reader);if(reader.offset<buffer.length)throw new BorshError(`Unexpected ${buffer.length-reader.offset} bytes after deserialized data`);return result},exports.deserializeUnchecked=function deserializeUnchecked(schema,classType,buffer,Reader=BinaryReader){return deserializeStruct(schema,classType,new Reader(buffer))}},"./node_modules/.pnpm/bs58@4.0.1/node_modules/bs58/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var basex=__webpack_require__("./node_modules/.pnpm/base-x@3.0.9/node_modules/base-x/src/index.js");module.exports=basex("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},"./node_modules/.pnpm/buffer@6.0.1/node_modules/buffer/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const base64=__webpack_require__("./node_modules/.pnpm/base64-js@1.5.1/node_modules/base64-js/index.js"),ieee754=__webpack_require__("./node_modules/.pnpm/ieee754@1.2.1/node_modules/ieee754/index.js"),customInspectSymbol="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;exports.lW=Buffer,exports.h2=50;function createBuffer(length){if(length>2147483647)throw new RangeError('The value "'+length+'" is invalid for option "size"');const buf=new Uint8Array(length);return Object.setPrototypeOf(buf,Buffer.prototype),buf}function Buffer(arg,encodingOrOffset,length){if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}function from(value,encodingOrOffset,length){if("string"==typeof value)return function fromString(string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);const length=0|byteLength(string,encoding);let buf=createBuffer(length);const actual=buf.write(string,encoding);actual!==length&&(buf=buf.slice(0,actual));return buf}(value,encodingOrOffset);if(ArrayBuffer.isView(value))return function fromArrayView(arrayView){if(isInstance(arrayView,Uint8Array)){const copy=new Uint8Array(arrayView);return fromArrayBuffer(copy.buffer,copy.byteOffset,copy.byteLength)}return fromArrayLike(arrayView)}(value);if(null==value)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value);if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer))return fromArrayBuffer(value,encodingOrOffset,length);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(value,SharedArrayBuffer)||value&&isInstance(value.buffer,SharedArrayBuffer)))return fromArrayBuffer(value,encodingOrOffset,length);if("number"==typeof value)throw new TypeError('The "value" argument must not be of type number. Received type number');const valueOf=value.valueOf&&value.valueOf();if(null!=valueOf&&valueOf!==value)return Buffer.from(valueOf,encodingOrOffset,length);const b=function fromObject(obj){if(Buffer.isBuffer(obj)){const len=0|checked(obj.length),buf=createBuffer(len);return 0===buf.length||obj.copy(buf,0,0,len),buf}if(void 0!==obj.length)return"number"!=typeof obj.length||numberIsNaN(obj.length)?createBuffer(0):fromArrayLike(obj);if("Buffer"===obj.type&&Array.isArray(obj.data))return fromArrayLike(obj.data)}(value);if(b)return b;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof value[Symbol.toPrimitive])return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be of type number');if(size<0)throw new RangeError('The value "'+size+'" is invalid for option "size"')}function allocUnsafe(size){return assertSize(size),createBuffer(size<0?0:0|checked(size))}function fromArrayLike(array){const length=array.length<0?0:0|checked(array.length),buf=createBuffer(length);for(let i=0;i<length;i+=1)buf[i]=255&array[i];return buf}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset)throw new RangeError('"offset" is outside of buffer bounds');if(array.byteLength<byteOffset+(length||0))throw new RangeError('"length" is outside of buffer bounds');let buf;return buf=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length),Object.setPrototypeOf(buf,Buffer.prototype),buf}function checked(length){if(length>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer))return string.byteLength;if("string"!=typeof string)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof string);const len=string.length,mustMatch=arguments.length>2&&!0===arguments[2];if(!mustMatch&&0===len)return 0;let loweredCase=!1;for(;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return mustMatch?-1:utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){let loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){const i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),numberIsNaN(byteOffset=+byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){let i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){let foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){let found=!0;for(let j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;const remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;const strLen=string.length;let i;for(length>strLen/2&&(length=strLen/2),i=0;i<length;++i){const parsed=parseInt(string.substr(2*i,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function asciiToBytes(str){const byteArray=[];for(let i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function utf16leToBytes(str,units){let c,hi,lo;const byteArray=[];for(let i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);const res=[];let i=start;for(;i<end;){const firstByte=buf[i];let codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){let secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:secondByte=buf[i+1],128==(192&secondByte)&&(tempCodePoint=(31&firstByte)<<6|63&secondByte,tempCodePoint>127&&(codePoint=tempCodePoint));break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte,tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint));break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte,tempCodePoint>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint))}}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function decodeCodePointsArray(codePoints){const len=codePoints.length;if(len<=4096)return String.fromCharCode.apply(String,codePoints);let res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=4096));return res}(res)}Buffer.TYPED_ARRAY_SUPPORT=function typedArraySupport(){try{const arr=new Uint8Array(1),proto={foo:function(){return 42}};return Object.setPrototypeOf(proto,Uint8Array.prototype),Object.setPrototypeOf(arr,proto),42===arr.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||void 0===console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(size,fill,encoding){return function alloc(size,fill,encoding){return assertSize(size),size<=0?createBuffer(size):void 0!==fill?"string"==typeof encoding?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill):createBuffer(size)}(size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)},Buffer.isBuffer=function isBuffer(b){return null!=b&&!0===b._isBuffer&&b!==Buffer.prototype},Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array)&&(a=Buffer.from(a,a.offset,a.byteLength)),isInstance(b,Uint8Array)&&(b=Buffer.from(b,b.offset,b.byteLength)),!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let x=a.length,y=b.length;for(let i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(list,length){if(!Array.isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);let i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;const buffer=Buffer.allocUnsafe(length);let pos=0;for(i=0;i<list.length;++i){let buf=list[i];if(isInstance(buf,Uint8Array))pos+buf.length>buffer.length?(Buffer.isBuffer(buf)||(buf=Buffer.from(buf)),buf.copy(buffer,pos)):Uint8Array.prototype.set.call(buffer,buf,pos);else{if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos)}pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){const len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function swap32(){const len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function swap64(){const len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function toString(){const length=this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function inspect(){let str="";const max=exports.h2;return str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim(),this.length>max&&(str+=" ... "),"<Buffer "+str+">"},customInspectSymbol&&(Buffer.prototype[customInspectSymbol]=Buffer.prototype.inspect),Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)&&(target=Buffer.from(target,target.offset,target.byteLength)),!Buffer.isBuffer(target))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof target);if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;let x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0);const len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end);for(let i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function includes(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function write(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset>>>=0,isFinite(length)?(length>>>=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}const remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");let loweredCase=!1;for(;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":case"latin1":case"binary":return asciiWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function asciiSlice(buf,start,end){let ret="";end=Math.min(buf.length,end);for(let i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){let ret="";end=Math.min(buf.length,end);for(let i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){const len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);let out="";for(let i=start;i<end;++i)out+=hexSliceLookupTable[buf[i]];return out}function utf16leSlice(buf,start,end){const bytes=buf.slice(start,end);let res="";for(let i=0;i<bytes.length-1;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function wrtBigUInt64LE(buf,value,offset,min,max){checkIntBI(value,min,max,buf,offset,7);let lo=Number(value&BigInt(4294967295));buf[offset++]=lo,lo>>=8,buf[offset++]=lo,lo>>=8,buf[offset++]=lo,lo>>=8,buf[offset++]=lo;let hi=Number(value>>BigInt(32)&BigInt(4294967295));return buf[offset++]=hi,hi>>=8,buf[offset++]=hi,hi>>=8,buf[offset++]=hi,hi>>=8,buf[offset++]=hi,offset}function wrtBigUInt64BE(buf,value,offset,min,max){checkIntBI(value,min,max,buf,offset,7);let lo=Number(value&BigInt(4294967295));buf[offset+7]=lo,lo>>=8,buf[offset+6]=lo,lo>>=8,buf[offset+5]=lo,lo>>=8,buf[offset+4]=lo;let hi=Number(value>>BigInt(32)&BigInt(4294967295));return buf[offset+3]=hi,hi>>=8,buf[offset+2]=hi,hi>>=8,buf[offset+1]=hi,hi>>=8,buf[offset]=hi,offset+8}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function slice(start,end){const len=this.length;(start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start);const newBuf=this.subarray(start,end);return Object.setPrototypeOf(newBuf,Buffer.prototype),newBuf},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);let val=this[offset],mul=1,i=0;for(;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);let val=this[offset+--byteLength],mul=1;for(;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod((function readBigUInt64LE(offset){validateNumber(offset>>>=0,"offset");const first=this[offset],last=this[offset+7];void 0!==first&&void 0!==last||boundsError(offset,this.length-8);const lo=first+256*this[++offset]+65536*this[++offset]+this[++offset]*2**24,hi=this[++offset]+256*this[++offset]+65536*this[++offset]+last*2**24;return BigInt(lo)+(BigInt(hi)<<BigInt(32))})),Buffer.prototype.readBigUInt64BE=defineBigIntMethod((function readBigUInt64BE(offset){validateNumber(offset>>>=0,"offset");const first=this[offset],last=this[offset+7];void 0!==first&&void 0!==last||boundsError(offset,this.length-8);const hi=first*2**24+65536*this[++offset]+256*this[++offset]+this[++offset],lo=this[++offset]*2**24+65536*this[++offset]+256*this[++offset]+last;return(BigInt(hi)<<BigInt(32))+BigInt(lo)})),Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);let val=this[offset],mul=1,i=0;for(;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);let i=byteLength,mul=1,val=this[offset+--i];for(;i>0&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function readInt8(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);const val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);const val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod((function readBigInt64LE(offset){validateNumber(offset>>>=0,"offset");const first=this[offset],last=this[offset+7];void 0!==first&&void 0!==last||boundsError(offset,this.length-8);const val=this[offset+4]+256*this[offset+5]+65536*this[offset+6]+(last<<24);return(BigInt(val)<<BigInt(32))+BigInt(first+256*this[++offset]+65536*this[++offset]+this[++offset]*2**24)})),Buffer.prototype.readBigInt64BE=defineBigIntMethod((function readBigInt64BE(offset){validateNumber(offset>>>=0,"offset");const first=this[offset],last=this[offset+7];void 0!==first&&void 0!==last||boundsError(offset,this.length-8);const val=(first<<24)+65536*this[++offset]+256*this[++offset]+this[++offset];return(BigInt(val)<<BigInt(32))+BigInt(this[++offset]*2**24+65536*this[++offset]+256*this[++offset]+last)})),Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,byteLength>>>=0,!noAssert){checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0)}let mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,byteLength>>>=0,!noAssert){checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0)}let i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,255,0),this[offset]=255&value,offset+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value,offset+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod((function writeBigUInt64LE(value,offset=0){return wrtBigUInt64LE(this,value,offset,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod((function writeBigUInt64BE(value,offset=0){return wrtBigUInt64BE(this,value,offset,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){const limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}let i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){const limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}let i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,127,-128),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24,offset+4},Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod((function writeBigInt64LE(value,offset=0){return wrtBigUInt64LE(this,value,offset,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeBigInt64BE=defineBigIntMethod((function writeBigInt64BE(value,offset=0){return wrtBigUInt64BE(this,value,offset,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);const len=end-start;return this===target&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(targetStart,start,end):Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart),len},Buffer.prototype.fill=function fill(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);if(1===val.length){const code=val.charCodeAt(0);("utf8"===encoding&&code<128||"latin1"===encoding)&&(val=code)}}else"number"==typeof val?val&=255:"boolean"==typeof val&&(val=Number(val));if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;let i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{const bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding),len=bytes.length;if(0===len)throw new TypeError('The value "'+val+'" is invalid for argument "value"');for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};const errors={};function E(sym,getMessage,Base){errors[sym]=class NodeError extends Base{constructor(){super(),Object.defineProperty(this,"message",{value:getMessage.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${sym}]`,this.stack,delete this.name}get code(){return sym}set code(value){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value,writable:!0})}toString(){return`${this.name} [${sym}]: ${this.message}`}}}function addNumericalSeparator(val){let res="",i=val.length;const start="-"===val[0]?1:0;for(;i>=start+4;i-=3)res=`_${val.slice(i-3,i)}${res}`;return`${val.slice(0,i)}${res}`}function checkIntBI(value,min,max,buf,offset,byteLength){if(value>max||value<min){const n="bigint"==typeof min?"n":"";let range;throw range=byteLength>3?0===min||min===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(byteLength+1)}${n}`:`>= -(2${n} ** ${8*(byteLength+1)-1}${n}) and < 2 ** ${8*(byteLength+1)-1}${n}`:`>= ${min}${n} and <= ${max}${n}`,new errors.ERR_OUT_OF_RANGE("value",range,value)}!function checkBounds(buf,offset,byteLength){validateNumber(offset,"offset"),void 0!==buf[offset]&&void 0!==buf[offset+byteLength]||boundsError(offset,buf.length-(byteLength+1))}(buf,offset,byteLength)}function validateNumber(value,name){if("number"!=typeof value)throw new errors.ERR_INVALID_ARG_TYPE(name,"number",value)}function boundsError(value,length,type){if(Math.floor(value)!==value)throw validateNumber(value,type),new errors.ERR_OUT_OF_RANGE(type||"offset","an integer",value);if(length<0)throw new errors.ERR_BUFFER_OUT_OF_BOUNDS;throw new errors.ERR_OUT_OF_RANGE(type||"offset",`>= ${type?1:0} and <= ${length}`,value)}E("ERR_BUFFER_OUT_OF_BOUNDS",(function(name){return name?`${name} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),E("ERR_INVALID_ARG_TYPE",(function(name,actual){return`The "${name}" argument must be of type number. Received type ${typeof actual}`}),TypeError),E("ERR_OUT_OF_RANGE",(function(str,range,input){let msg=`The value of "${str}" is out of range.`,received=input;return Number.isInteger(input)&&Math.abs(input)>2**32?received=addNumericalSeparator(String(input)):"bigint"==typeof input&&(received=String(input),(input>BigInt(2)**BigInt(32)||input<-(BigInt(2)**BigInt(32)))&&(received=addNumericalSeparator(received)),received+="n"),msg+=` It must be ${range}. Received ${received}`,msg}),RangeError);const INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(string,units){let codePoint;units=units||1/0;const length=string.length;let leadSurrogate=null;const bytes=[];for(let i=0;i<length;++i){if(codePoint=string.charCodeAt(i),codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function base64clean(str){if((str=(str=str.split("=")[0]).trim().replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){let i;for(i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isInstance(obj,type){return obj instanceof type||null!=obj&&null!=obj.constructor&&null!=obj.constructor.name&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!=obj}const hexSliceLookupTable=function(){const table=new Array(256);for(let i=0;i<16;++i){const i16=16*i;for(let j=0;j<16;++j)table[i16+j]="0123456789abcdef"[i]+"0123456789abcdef"[j]}return table}();function defineBigIntMethod(fn){return"undefined"==typeof BigInt?BufferBigIntNotDefined:fn}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}},"./node_modules/.pnpm/jayson@3.6.6/node_modules/jayson/lib/client/browser/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const uuid=__webpack_require__("./node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/index.js").v4,generateRequest=__webpack_require__("./node_modules/.pnpm/jayson@3.6.6/node_modules/jayson/lib/generateRequest.js"),ClientBrowser=function(callServer,options){if(!(this instanceof ClientBrowser))return new ClientBrowser(callServer,options);options||(options={}),this.options={reviver:void 0!==options.reviver?options.reviver:null,replacer:void 0!==options.replacer?options.replacer:null,generator:void 0!==options.generator?options.generator:function(){return uuid()},version:void 0!==options.version?options.version:2,notificationIdNull:"boolean"==typeof options.notificationIdNull&&options.notificationIdNull},this.callServer=callServer};module.exports=ClientBrowser,ClientBrowser.prototype.request=function(method,params,id,callback){const self=this;let request=null;const isBatch=Array.isArray(method)&&"function"==typeof params;if(1===this.options.version&&isBatch)throw new TypeError("JSON-RPC 1.0 does not support batching");if(isBatch||!isBatch&&method&&"object"==typeof method&&"function"==typeof params)callback=params,request=method;else{"function"==typeof id&&(callback=id,id=void 0);const hasCallback="function"==typeof callback;try{request=generateRequest(method,params,id,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(err){if(hasCallback)return callback(err);throw err}if(!hasCallback)return request}let message;try{message=JSON.stringify(request,this.options.replacer)}catch(err){return callback(err)}return this.callServer(message,(function(err,response){self._parseResponse(err,response,callback)})),request},ClientBrowser.prototype._parseResponse=function(err,responseText,callback){if(err)return void callback(err);if(!responseText)return callback();let response;try{response=JSON.parse(responseText,this.options.reviver)}catch(err){return callback(err)}if(3===callback.length){if(Array.isArray(response)){const isError=function(res){return void 0!==res.error},isNotError=function(res){return!isError(res)};return callback(null,response.filter(isError),response.filter(isNotError))}return callback(null,response.error,response.result)}callback(null,response)}},"./node_modules/.pnpm/jayson@3.6.6/node_modules/jayson/lib/generateRequest.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const uuid=__webpack_require__("./node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/index.js").v4;module.exports=function(method,params,id,options){if("string"!=typeof method)throw new TypeError(method+" must be a string");const version="number"==typeof(options=options||{}).version?options.version:2;if(1!==version&&2!==version)throw new TypeError(version+" must be 1 or 2");const request={method};if(2===version&&(request.jsonrpc="2.0"),params){if("object"!=typeof params&&!Array.isArray(params))throw new TypeError(params+" must be an object, array or omitted");request.params=params}if(void 0===id){const generator="function"==typeof options.generator?options.generator:function(){return uuid()};request.id=generator(request,options)}else 2===version&&null===id?options.notificationIdNull&&(request.id=null):request.id=id;return request}},"./node_modules/.pnpm/rpc-websockets@7.5.0/node_modules/rpc-websockets/dist/index.browser.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/interopRequireDefault.js");exports.K=void 0;var _createClass2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/createClass.js")),_classCallCheck2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/classCallCheck.js")),_inherits2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/inherits.js")),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),_getPrototypeOf2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/getPrototypeOf.js")),_websocket=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/rpc-websockets@7.5.0/node_modules/rpc-websockets/dist/lib/client/websocket.browser.js"));function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=(0,_getPrototypeOf2.default)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,result)}}var Client=function(_CommonClient){(0,_inherits2.default)(Client,_CommonClient);var _super=_createSuper(Client);function Client(){var address=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8080",_ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$autoconnect=_ref.autoconnect,autoconnect=void 0===_ref$autoconnect||_ref$autoconnect,_ref$reconnect=_ref.reconnect,reconnect=void 0===_ref$reconnect||_ref$reconnect,_ref$reconnect_interv=_ref.reconnect_interval,reconnect_interval=void 0===_ref$reconnect_interv?1e3:_ref$reconnect_interv,_ref$max_reconnects=_ref.max_reconnects,max_reconnects=void 0===_ref$max_reconnects?5:_ref$max_reconnects,generate_request_id=arguments.length>2?arguments[2]:void 0;return(0,_classCallCheck2.default)(this,Client),_super.call(this,_websocket.default,address,{autoconnect,reconnect,reconnect_interval,max_reconnects},generate_request_id)}return(0,_createClass2.default)(Client)}(_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/rpc-websockets@7.5.0/node_modules/rpc-websockets/dist/lib/client.js")).default);exports.K=Client},"./node_modules/.pnpm/rpc-websockets@7.5.0/node_modules/rpc-websockets/dist/lib/client.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,_interopRequireDefault=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/regenerator/index.js")),_asyncToGenerator2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/asyncToGenerator.js")),_typeof2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/typeof.js")),_classCallCheck2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/classCallCheck.js")),_createClass2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/createClass.js")),_inherits2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/inherits.js")),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),_getPrototypeOf2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/getPrototypeOf.js")),_eventemitter=__webpack_require__("./node_modules/.pnpm/eventemitter3@4.0.7/node_modules/eventemitter3/index.js");function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=(0,_getPrototypeOf2.default)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,result)}}var __rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},CommonClient=function(_EventEmitter){(0,_inherits2.default)(CommonClient,_EventEmitter);var _unsubscribe,_subscribe,_listMethods,_login,_super=_createSuper(CommonClient);function CommonClient(webSocketFactory){var _this,address=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ws://localhost:8080",_a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},generate_request_id=arguments.length>3?arguments[3]:void 0;(0,_classCallCheck2.default)(this,CommonClient);var _a$autoconnect=_a.autoconnect,autoconnect=void 0===_a$autoconnect||_a$autoconnect,_a$reconnect=_a.reconnect,reconnect=void 0===_a$reconnect||_a$reconnect,_a$reconnect_interval=_a.reconnect_interval,reconnect_interval=void 0===_a$reconnect_interval?1e3:_a$reconnect_interval,_a$max_reconnects=_a.max_reconnects,max_reconnects=void 0===_a$max_reconnects?5:_a$max_reconnects,rest_options=__rest(_a,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return(_this=_super.call(this)).webSocketFactory=webSocketFactory,_this.queue={},_this.rpc_id=0,_this.address=address,_this.autoconnect=autoconnect,_this.ready=!1,_this.reconnect=reconnect,_this.reconnect_interval=reconnect_interval,_this.max_reconnects=max_reconnects,_this.rest_options=rest_options,_this.current_reconnects=0,_this.generate_request_id=generate_request_id||function(){return++_this.rpc_id},_this.autoconnect&&_this._connect(_this.address,Object.assign({autoconnect:_this.autoconnect,reconnect:_this.reconnect,reconnect_interval:_this.reconnect_interval,max_reconnects:_this.max_reconnects},_this.rest_options)),_this}return(0,_createClass2.default)(CommonClient,[{key:"connect",value:function connect(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function call(method,params,timeout,ws_opts){var _this2=this;return ws_opts||"object"!==(0,_typeof2.default)(timeout)||(ws_opts=timeout,timeout=null),new Promise((function(resolve,reject){if(!_this2.ready)return reject(new Error("socket not ready"));var rpc_id=_this2.generate_request_id(method,params),message={jsonrpc:"2.0",method,params:params||null,id:rpc_id};_this2.socket.send(JSON.stringify(message),ws_opts,(function(error){if(error)return reject(error);_this2.queue[rpc_id]={promise:[resolve,reject]},timeout&&(_this2.queue[rpc_id].timeout=setTimeout((function(){delete _this2.queue[rpc_id],reject(new Error("reply timeout"))}),timeout))}))}))}},{key:"login",value:(_login=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(params){var resp;return _regenerator.default.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.call("rpc.login",params);case 2:if(resp=_context.sent){_context.next=5;break}throw new Error("authentication failed");case 5:return _context.abrupt("return",resp);case 6:case"end":return _context.stop()}}),_callee,this)}))),function login(_x){return _login.apply(this,arguments)})},{key:"listMethods",value:(_listMethods=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee2(){return _regenerator.default.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.call("__listMethods");case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2,this)}))),function listMethods(){return _listMethods.apply(this,arguments)})},{key:"notify",value:function notify(method,params){var _this3=this;return new Promise((function(resolve,reject){if(!_this3.ready)return reject(new Error("socket not ready"));var message={jsonrpc:"2.0",method,params:params||null};_this3.socket.send(JSON.stringify(message),(function(error){if(error)return reject(error);resolve()}))}))}},{key:"subscribe",value:(_subscribe=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee3(event){var result;return _regenerator.default.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return"string"==typeof event&&(event=[event]),_context3.next=3,this.call("rpc.on",event);case 3:if(result=_context3.sent,"string"!=typeof event||"ok"===result[event]){_context3.next=6;break}throw new Error("Failed subscribing to an event '"+event+"' with: "+result[event]);case 6:return _context3.abrupt("return",result);case 7:case"end":return _context3.stop()}}),_callee3,this)}))),function subscribe(_x2){return _subscribe.apply(this,arguments)})},{key:"unsubscribe",value:(_unsubscribe=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee4(event){var result;return _regenerator.default.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return"string"==typeof event&&(event=[event]),_context4.next=3,this.call("rpc.off",event);case 3:if(result=_context4.sent,"string"!=typeof event||"ok"===result[event]){_context4.next=6;break}throw new Error("Failed unsubscribing from an event with: "+result);case 6:return _context4.abrupt("return",result);case 7:case"end":return _context4.stop()}}),_callee4,this)}))),function unsubscribe(_x3){return _unsubscribe.apply(this,arguments)})},{key:"close",value:function close(code,data){this.socket.close(code||1e3,data)}},{key:"_connect",value:function _connect(address,options){var _this4=this;this.socket=this.webSocketFactory(address,options),this.socket.addEventListener("open",(function(){_this4.ready=!0,_this4.emit("open"),_this4.current_reconnects=0})),this.socket.addEventListener("message",(function(_ref){var message=_ref.data;message instanceof ArrayBuffer&&(message=Buffer.from(message).toString());try{message=JSON.parse(message)}catch(error){return}if(message.notification&&_this4.listeners(message.notification).length){if(!Object.keys(message.params).length)return _this4.emit(message.notification);var args=[message.notification];if(message.params.constructor===Object)args.push(message.params);else for(var i=0;i<message.params.length;i++)args.push(message.params[i]);return Promise.resolve().then((function(){_this4.emit.apply(_this4,args)}))}if(!_this4.queue[message.id])return message.method&&message.params?Promise.resolve().then((function(){_this4.emit(message.method,message.params)})):void 0;"error"in message=="result"in message&&_this4.queue[message.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),_this4.queue[message.id].timeout&&clearTimeout(_this4.queue[message.id].timeout),message.error?_this4.queue[message.id].promise[1](message.error):_this4.queue[message.id].promise[0](message.result),delete _this4.queue[message.id]})),this.socket.addEventListener("error",(function(error){return _this4.emit("error",error)})),this.socket.addEventListener("close",(function(_ref2){var code=_ref2.code,reason=_ref2.reason;_this4.ready&&setTimeout((function(){return _this4.emit("close",code,reason)}),0),_this4.ready=!1,_this4.socket=void 0,1e3!==code&&(_this4.current_reconnects++,_this4.reconnect&&(_this4.max_reconnects>_this4.current_reconnects||0===_this4.max_reconnects)&&setTimeout((function(){return _this4._connect(address,options)}),_this4.reconnect_interval))}))}}]),CommonClient}(_eventemitter.EventEmitter);exports.default=CommonClient},"./node_modules/.pnpm/rpc-websockets@7.5.0/node_modules/rpc-websockets/dist/lib/client/websocket.browser.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function _default(address,options){return new WebSocketBrowserImpl(address,options)};var _classCallCheck2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/classCallCheck.js")),_createClass2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/createClass.js")),_inherits2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/inherits.js")),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),_getPrototypeOf2=_interopRequireDefault(__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=(0,_getPrototypeOf2.default)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,result)}}var WebSocketBrowserImpl=function(_EventEmitter){(0,_inherits2.default)(WebSocketBrowserImpl,_EventEmitter);var _super=_createSuper(WebSocketBrowserImpl);function WebSocketBrowserImpl(address,options,protocols){var _this;return(0,_classCallCheck2.default)(this,WebSocketBrowserImpl),(_this=_super.call(this)).socket=new window.WebSocket(address,protocols),_this.socket.onopen=function(){return _this.emit("open")},_this.socket.onmessage=function(event){return _this.emit("message",event.data)},_this.socket.onerror=function(error){return _this.emit("error",error)},_this.socket.onclose=function(event){_this.emit("close",event.code,event.reason)},_this}return(0,_createClass2.default)(WebSocketBrowserImpl,[{key:"send",value:function send(data,optionsOrCallback,callback){var cb=callback||optionsOrCallback;try{this.socket.send(data),cb()}catch(error){cb(error)}}},{key:"close",value:function close(code,reason){this.socket.close(code,reason)}},{key:"addEventListener",value:function addEventListener(type,listener,options){this.socket.addEventListener(type,listener,options)}}]),WebSocketBrowserImpl}(__webpack_require__("./node_modules/.pnpm/eventemitter3@4.0.7/node_modules/eventemitter3/index.js").EventEmitter)},"./node_modules/.pnpm/text-encoding-utf-8@1.0.2/node_modules/text-encoding-utf-8/lib/encoding.lib.mjs":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";function inRange(a,min,max){return min<=a&&a<=max}function ToDictionary(o){if(void 0===o)return{};if(o===Object(o))return o;throw TypeError("Could not convert argument to dictionary")}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TextDecoder:()=>TextDecoder,TextEncoder:()=>TextEncoder});function Stream(tokens){this.tokens=[].slice.call(tokens)}Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(token){if(Array.isArray(token))for(var tokens=token;tokens.length;)this.tokens.unshift(tokens.pop());else this.tokens.unshift(token)},push:function(token){if(Array.isArray(token))for(var tokens=token;tokens.length;)this.tokens.push(tokens.shift());else this.tokens.push(token)}};function decoderError(fatal,opt_code_point){if(fatal)throw TypeError("Decoder error");return opt_code_point||65533}function TextDecoder(encoding,options){if(!(this instanceof TextDecoder))return new TextDecoder(encoding,options);if("utf-8"!==(encoding=void 0!==encoding?String(encoding).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");options=ToDictionary(options),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(options.fatal),this._ignoreBOM=Boolean(options.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function TextEncoder(encoding,options){if(!(this instanceof TextEncoder))return new TextEncoder(encoding,options);if("utf-8"!==(encoding=void 0!==encoding?String(encoding).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");options=ToDictionary(options),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(options.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function UTF8Decoder(options){var fatal=options.fatal,utf8_code_point=0,utf8_bytes_seen=0,utf8_bytes_needed=0,utf8_lower_boundary=128,utf8_upper_boundary=191;this.handler=function(stream,bite){if(-1===bite&&0!==utf8_bytes_needed)return utf8_bytes_needed=0,decoderError(fatal);if(-1===bite)return-1;if(0===utf8_bytes_needed){if(inRange(bite,0,127))return bite;if(inRange(bite,194,223))utf8_bytes_needed=1,utf8_code_point=bite-192;else if(inRange(bite,224,239))224===bite&&(utf8_lower_boundary=160),237===bite&&(utf8_upper_boundary=159),utf8_bytes_needed=2,utf8_code_point=bite-224;else{if(!inRange(bite,240,244))return decoderError(fatal);240===bite&&(utf8_lower_boundary=144),244===bite&&(utf8_upper_boundary=143),utf8_bytes_needed=3,utf8_code_point=bite-240}return utf8_code_point<<=6*utf8_bytes_needed,null}if(!inRange(bite,utf8_lower_boundary,utf8_upper_boundary))return utf8_code_point=utf8_bytes_needed=utf8_bytes_seen=0,utf8_lower_boundary=128,utf8_upper_boundary=191,stream.prepend(bite),decoderError(fatal);if(utf8_lower_boundary=128,utf8_upper_boundary=191,utf8_code_point+=bite-128<<6*(utf8_bytes_needed-(utf8_bytes_seen+=1)),utf8_bytes_seen!==utf8_bytes_needed)return null;var code_point=utf8_code_point;return utf8_code_point=utf8_bytes_needed=utf8_bytes_seen=0,code_point}}function UTF8Encoder(options){options.fatal;this.handler=function(stream,code_point){if(-1===code_point)return-1;if(inRange(code_point,0,127))return code_point;var count,offset;inRange(code_point,128,2047)?(count=1,offset=192):inRange(code_point,2048,65535)?(count=2,offset=224):inRange(code_point,65536,1114111)&&(count=3,offset=240);for(var bytes=[(code_point>>6*count)+offset];count>0;){var temp=code_point>>6*(count-1);bytes.push(128|63&temp),count-=1}return bytes}}TextDecoder.prototype={decode:function decode(input,options){var bytes;bytes="object"==typeof input&&input instanceof ArrayBuffer?new Uint8Array(input):"object"==typeof input&&"buffer"in input&&input.buffer instanceof ArrayBuffer?new Uint8Array(input.buffer,input.byteOffset,input.byteLength):new Uint8Array(0),options=ToDictionary(options),this._streaming||(this._decoder=new UTF8Decoder({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(options.stream);for(var result,input_stream=new Stream(bytes),code_points=[];!input_stream.endOfStream()&&-1!==(result=this._decoder.handler(input_stream,input_stream.read()));)null!==result&&(Array.isArray(result)?code_points.push.apply(code_points,result):code_points.push(result));if(!this._streaming){do{if(-1===(result=this._decoder.handler(input_stream,input_stream.read())))break;null!==result&&(Array.isArray(result)?code_points.push.apply(code_points,result):code_points.push(result))}while(!input_stream.endOfStream());this._decoder=null}return code_points.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===code_points[0]?(this._BOMseen=!0,code_points.shift()):this._BOMseen=!0)),function codePointsToString(code_points){for(var s="",i=0;i<code_points.length;++i){var cp=code_points[i];cp<=65535?s+=String.fromCharCode(cp):(cp-=65536,s+=String.fromCharCode(55296+(cp>>10),56320+(1023&cp)))}return s}(code_points)}},TextEncoder.prototype={encode:function encode(opt_string,options){opt_string=opt_string?String(opt_string):"",options=ToDictionary(options),this._streaming||(this._encoder=new UTF8Encoder(this._options)),this._streaming=Boolean(options.stream);for(var result,bytes=[],input_stream=new Stream(function stringToCodePoints(string){for(var s=String(string),n=s.length,i=0,u=[];i<n;){var c=s.charCodeAt(i);if(c<55296||c>57343)u.push(c);else if(56320<=c&&c<=57343)u.push(65533);else if(55296<=c&&c<=56319)if(i===n-1)u.push(65533);else{var d=string.charCodeAt(i+1);if(56320<=d&&d<=57343){var a=1023&c,b=1023&d;u.push(65536+(a<<10)+b),i+=1}else u.push(65533)}i+=1}return u}(opt_string));!input_stream.endOfStream()&&-1!==(result=this._encoder.handler(input_stream,input_stream.read()));)Array.isArray(result)?bytes.push.apply(bytes,result):bytes.push(result);if(!this._streaming){for(;-1!==(result=this._encoder.handler(input_stream,input_stream.read()));)Array.isArray(result)?bytes.push.apply(bytes,result):bytes.push(result);this._encoder=null}return new Uint8Array(bytes)}}}}]);