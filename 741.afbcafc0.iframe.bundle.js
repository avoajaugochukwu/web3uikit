"use strict";(self.webpackChunkweb3uikit=self.webpackChunkweb3uikit||[]).push([[741],{"./node_modules/.pnpm/@web3auth+openlogin-adapter@1.1.1_6q6l43ixbnrc7bgejtmqcq6qmi/node_modules/@web3auth/openlogin-adapter/dist/openloginAdapter.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{OpenloginAdapter:()=>OpenloginAdapter,getOpenloginDefaultOptions:()=>getOpenloginDefaultOptions});var _toruslabs_openlogin__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@toruslabs+openlogin@2.3.0_@babel+runtime@7.18.3/node_modules/@toruslabs/openlogin/dist/openlogin.esm.js"),_web3auth_base__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@web3auth+base@1.1.1_@babel+runtime@7.18.3/node_modules/@web3auth/base/dist/base.esm.js"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_web3auth_base_provider__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@web3auth+base-provider@1.1.1_@babel+runtime@7.18.3/node_modules/@web3auth/base-provider/dist/baseProvider.esm.js"),lodash_merge__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/lodash.merge@4.6.2/node_modules/lodash.merge/index.js"),lodash_merge__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_3__);const getOpenloginDefaultOptions=(chainNamespace,chainId)=>({adapterSettings:{network:_toruslabs_openlogin__WEBPACK_IMPORTED_MODULE_0__.dr.MAINNET,clientId:"",uxMode:_toruslabs_openlogin__WEBPACK_IMPORTED_MODULE_0__.$e.POPUP},chainConfig:chainNamespace?(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.h2)(chainNamespace,chainId):null,loginSettings:{}});function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}class OpenloginAdapter extends _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.J5{constructor(params){var _params$chainConfig,_params$chainConfig2,_params$chainConfig3;super(),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"name",_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.rW.OPENLOGIN),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"adapterNamespace",_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.yk.MULTICHAIN),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"type",_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.hN.IN_APP),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"openloginInstance",null),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"status",_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.MP.NOT_READY),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"currentChainNamespace",_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.EN.EIP155),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"openloginOptions",void 0),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"loginSettings",{}),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"privKeyProvider",null),_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.cM.debug("const openlogin adapter",params);const defaultOptions=getOpenloginDefaultOptions(null===(_params$chainConfig=params.chainConfig)||void 0===_params$chainConfig?void 0:_params$chainConfig.chainNamespace,null===(_params$chainConfig2=params.chainConfig)||void 0===_params$chainConfig2?void 0:_params$chainConfig2.chainId);if(this.openloginOptions=_objectSpread(_objectSpread({clientId:"",network:_toruslabs_openlogin__WEBPACK_IMPORTED_MODULE_0__.dr.MAINNET},defaultOptions.adapterSettings),params.adapterSettings||{}),this.loginSettings=_objectSpread(_objectSpread({},defaultOptions.loginSettings),params.loginSettings),null!==(_params$chainConfig3=params.chainConfig)&&void 0!==_params$chainConfig3&&_params$chainConfig3.chainNamespace){var _params$chainConfig4;this.currentChainNamespace=null===(_params$chainConfig4=params.chainConfig)||void 0===_params$chainConfig4?void 0:_params$chainConfig4.chainNamespace;const defaultChainIdConfig=defaultOptions.chainConfig?defaultOptions.chainConfig:{};if(this.chainConfig=_objectSpread(_objectSpread({},defaultChainIdConfig),null==params?void 0:params.chainConfig),_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.cM.debug("const openlogin chainConfig",this.chainConfig),!this.chainConfig.rpcTarget&&params.chainConfig.chainNamespace!==_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.EN.OTHER)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.Ty.invalidParams("rpcTarget is required in chainConfig")}}get chainConfigProxy(){return this.chainConfig?_objectSpread({},this.chainConfig):null}get provider(){var _this$privKeyProvider;return(null===(_this$privKeyProvider=this.privKeyProvider)||void 0===_this$privKeyProvider?void 0:_this$privKeyProvider.provider)||null}set provider(_){throw new Error("Not implemented")}async init(options){var _this$openloginOption;if(super.checkInitializationRequirements(),null===(_this$openloginOption=this.openloginOptions)||void 0===_this$openloginOption||!_this$openloginOption.clientId)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.Ty.invalidParams("clientId is required before openlogin's initialization");if(!this.chainConfig)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.Ty.invalidParams("chainConfig is required before initialization");let isRedirectResult=!1;if(this.openloginOptions.uxMode===_toruslabs_openlogin__WEBPACK_IMPORTED_MODULE_0__.$e.REDIRECT){const redirectResult=(0,_toruslabs_openlogin__WEBPACK_IMPORTED_MODULE_0__.Gv)();Object.keys(redirectResult).length>0&&redirectResult._pid&&(isRedirectResult=!0)}this.openloginOptions=_objectSpread(_objectSpread({},this.openloginOptions),{},{replaceUrlOnRedirect:isRedirectResult}),this.openloginInstance=new _toruslabs_openlogin__WEBPACK_IMPORTED_MODULE_0__.ZP(this.openloginOptions),_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.cM.debug("initializing openlogin adapter init"),await this.openloginInstance.init(),this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.MP.READY,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.n2.READY,_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.rW.OPENLOGIN);try{_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.cM.debug("initializing openlogin adapter"),this.openloginInstance.privKey&&(options.autoConnect||isRedirectResult)&&await this.connect()}catch(error){_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.cM.error("Failed to connect with cached openlogin provider",error),this.emit("ERRORED",error)}}async connect(params){super.checkConnectionRequirements(),this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.MP.CONNECTING,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.n2.CONNECTING,_objectSpread(_objectSpread({},params),{},{adapter:_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.rW.OPENLOGIN}));try{return await this.connectWithProvider(params),this.provider}catch(error){if(_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.cM.error("Failed to connect with openlogin provider",error),this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.MP.READY,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.n2.ERRORED,error),null!=error&&error.message.includes("user closed popup"))throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.RM.popupClosed();throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.RM.connectionError("Failed to login with openlogin")}}async disconnect(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};if(this.status!==_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.MP.CONNECTED)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.RM.notConnectedError("Not connected with wallet");if(!this.openloginInstance)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.Ty.notReady("openloginInstance is not ready");await this.openloginInstance.logout(),options.cleanup?(this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.MP.NOT_READY,this.openloginInstance=null,this.privKeyProvider=null):this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.MP.READY,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.n2.DISCONNECTED)}async getUserInfo(){if(this.status!==_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.MP.CONNECTED)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.RM.notConnectedError("Not connected with wallet");if(!this.openloginInstance)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.Ty.notReady("openloginInstance is not ready");return await this.openloginInstance.getUserInfo()}setAdapterSettings(adapterSettings){if(this.status===_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.MP.READY)return;const defaultOptions=getOpenloginDefaultOptions();this.openloginOptions=_objectSpread(_objectSpread(_objectSpread({},defaultOptions.adapterSettings),this.openloginOptions||{}),adapterSettings)}setChainConfig(customChainConfig){super.setChainConfig(customChainConfig),this.currentChainNamespace=customChainConfig.chainNamespace}async connectWithProvider(params){if(!this.chainConfig)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.Ty.invalidParams("chainConfig is required before initialization");if(!this.openloginInstance)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_1__.Ty.notReady("openloginInstance is not ready");if(this.currentChainNamespace===_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.EN.SOLANA){const{SolanaPrivateKeyProvider}=await Promise.all([__webpack_require__.e(711),__webpack_require__.e(951),__webpack_require__.e(914),__webpack_require__.e(873)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@web3auth+solana-provider@1.1.1_6q6l43ixbnrc7bgejtmqcq6qmi/node_modules/@web3auth/solana-provider/dist/solanaProvider.esm.js"));this.privKeyProvider=new SolanaPrivateKeyProvider({config:{chainConfig:this.chainConfig}})}else if(this.currentChainNamespace===_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.EN.EIP155){const{EthereumPrivateKeyProvider}=await Promise.all([__webpack_require__.e(711),__webpack_require__.e(720),__webpack_require__.e(201)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@web3auth+ethereum-provider@1.1.1_@babel+runtime@7.18.3/node_modules/@web3auth/ethereum-provider/dist/ethereumProvider.esm.js"));this.privKeyProvider=new EthereumPrivateKeyProvider({config:{chainConfig:this.chainConfig}})}else{if(this.currentChainNamespace!==_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.EN.OTHER)throw new Error("Invalid chainNamespace: ".concat(this.currentChainNamespace," found while connecting to wallet"));this.privKeyProvider=new _web3auth_base_provider__WEBPACK_IMPORTED_MODULE_2__.FL}var _params$extraLoginOpt;!this.openloginInstance.privKey&&params&&(this.loginSettings.curve||(this.loginSettings.curve=this.currentChainNamespace===_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.EN.SOLANA?_toruslabs_openlogin__WEBPACK_IMPORTED_MODULE_0__.x7.ED25519:_toruslabs_openlogin__WEBPACK_IMPORTED_MODULE_0__.x7.SECP256K1),await this.openloginInstance.login(lodash_merge__WEBPACK_IMPORTED_MODULE_3___default()(this.loginSettings,{loginProvider:params.loginProvider},{extraLoginOptions:_objectSpread(_objectSpread({},params.extraLoginOptions||{}),{},{login_hint:params.login_hint||(null===(_params$extraLoginOpt=params.extraLoginOptions)||void 0===_params$extraLoginOpt?void 0:_params$extraLoginOpt.login_hint)})})));let finalPrivKey=this.openloginInstance.privKey;if(finalPrivKey){if(this.currentChainNamespace===_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.EN.SOLANA){const{getED25519Key}=await Promise.all([__webpack_require__.e(951),__webpack_require__.e(870)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/@toruslabs+openlogin-ed25519@2.0.0_@babel+runtime@7.18.3/node_modules/@toruslabs/openlogin-ed25519/dist/openloginEd25519.esm.js"));finalPrivKey=getED25519Key(finalPrivKey).sk.toString("hex")}await this.privKeyProvider.setupProvider(finalPrivKey),this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.MP.CONNECTED,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.n2.CONNECTED,{adapter:_web3auth_base__WEBPACK_IMPORTED_MODULE_1__.rW.OPENLOGIN,reconnected:!params})}}}}}]);